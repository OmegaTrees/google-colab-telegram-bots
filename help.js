!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("HiPlayer",[],t):"object"==typeof exports?exports.HiPlayer=t():e.HiPlayer=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=82)}([function(e,t,r){(function(t){var i;e.exports=(i=i||function(e,i){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==t&&t.crypto&&(n=t.crypto),!n)try{n=r(50)}catch(e){}var a=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},l=s.lib={},u=l.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},h=l.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<n;a++){var o=r[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=o<<24-(i+a)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(a());return new h.init(t,e)}}),c=s.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new h.init(r,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new h.init(r,t)}},p=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},g=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,i=this._data,n=i.words,a=i.sigBytes,o=this.blockSize,s=a/(4*o),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,u=e.min(4*l,a);if(l){for(var c=0;c<l;c+=o)this._doProcessBlock(n,c);r=n.splice(0,l),i.sigBytes-=u}return new h.init(r,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(l.Hasher=g.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math),i)}).call(this,r(5))},function(e,t,r){var i,n,a,o,s,l,u,h,c,d,f,p,g,m,v,y,b,_,w;e.exports=(i=r(0),r(2),void(i.lib.Cipher||(n=i,a=n.lib,o=a.Base,s=a.WordArray,l=a.BufferedBlockAlgorithm,u=n.enc,u.Utf8,h=u.Base64,c=n.algo.EvpKDF,d=a.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:b}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),a.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=n.mode={},p=a.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){var e=p.extend();function t(e,t,r){var i,n=this._iv;n?(i=n,this._iv=void 0):i=this._prevBlock;for(var a=0;a<r;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize;t.call(this,e,r,n),i.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize,a=e.slice(r,r+n);i.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=a}}),e}(),m=(n.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(n);var l=s.create(a,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.BlockCipher=d.extend({cfg:d.cfg.extend({mode:g,padding:m}),reset:function(){var e;d.reset.call(this);var t=this.cfg,r=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),v=a.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?s.create([1398893684,1701076831]).concat(r).concat(t):t).toString(h)},parse:function(e){var t,r=h.parse(e),i=r.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=s.create(i.slice(2,4)),i.splice(0,4),r.sigBytes-=16),v.create({ciphertext:r,salt:t})}},b=a.SerializableCipher=o.extend({cfg:o.extend({format:y}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),a=n.finalize(t),o=n.cfg;return v.create({ciphertext:a,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(n.kdf={}).OpenSSL={execute:function(e,t,r,i){i||(i=s.random(8));var n=c.create({keySize:t+r}).compute(e,i),a=s.create(n.words.slice(t),4*r);return n.sigBytes=4*t,v.create({key:n,iv:a,salt:i})}},w=a.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:_}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var a=b.encrypt.call(this,e,t,n.key,i);return a.mixIn(n),a},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,b.decrypt.call(this,e,t,n.key,i)}}))))},function(e,t,r){var i,n,a,o,s,l,u,h;e.exports=(h=r(0),r(8),r(9),n=(i=h).lib,a=n.Base,o=n.WordArray,s=i.algo,l=s.MD5,u=s.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,i=this.cfg,n=i.hasher.create(),a=o.create(),s=a.words,l=i.keySize,u=i.iterations;s.length<l;){r&&n.update(r),r=n.update(e).finalize(t),n.reset();for(var h=1;h<u;h++)r=n.finalize(r),n.reset();a.concat(r)}return a.sigBytes=4*l,a}}),i.EvpKDF=function(e,t,r){return u.create(r).compute(e,t)},h.EvpKDF)},function(e,t,r){var i,n,a;e.exports=(a=r(0),n=(i=a).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],a=0;a<r;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<r;s++)n.push(i.charAt(o>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var o=r.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,r){for(var i=[],a=0,o=0;o<t;o++)if(o%4){var s=r[e.charCodeAt(o-1)]<<o%4*2,l=r[e.charCodeAt(o)]>>>6-o%4*2,u=s|l;i[a>>>2]|=u<<24-a%4*8,a++}return n.create(i,a)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},function(e,t,r){var i;e.exports=(i=r(0),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=o.MD5=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a=this._hash.words,o=e[t+0],l=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],_=e[t+9],w=e[t+10],k=e[t+11],S=e[t+12],T=e[t+13],E=e[t+14],x=e[t+15],A=a[0],R=a[1],C=a[2],L=a[3];A=u(A,R,C,L,o,7,s[0]),L=u(L,A,R,C,l,12,s[1]),C=u(C,L,A,R,f,17,s[2]),R=u(R,C,L,A,p,22,s[3]),A=u(A,R,C,L,g,7,s[4]),L=u(L,A,R,C,m,12,s[5]),C=u(C,L,A,R,v,17,s[6]),R=u(R,C,L,A,y,22,s[7]),A=u(A,R,C,L,b,7,s[8]),L=u(L,A,R,C,_,12,s[9]),C=u(C,L,A,R,w,17,s[10]),R=u(R,C,L,A,k,22,s[11]),A=u(A,R,C,L,S,7,s[12]),L=u(L,A,R,C,T,12,s[13]),C=u(C,L,A,R,E,17,s[14]),A=h(A,R=u(R,C,L,A,x,22,s[15]),C,L,l,5,s[16]),L=h(L,A,R,C,v,9,s[17]),C=h(C,L,A,R,k,14,s[18]),R=h(R,C,L,A,o,20,s[19]),A=h(A,R,C,L,m,5,s[20]),L=h(L,A,R,C,w,9,s[21]),C=h(C,L,A,R,x,14,s[22]),R=h(R,C,L,A,g,20,s[23]),A=h(A,R,C,L,_,5,s[24]),L=h(L,A,R,C,E,9,s[25]),C=h(C,L,A,R,p,14,s[26]),R=h(R,C,L,A,b,20,s[27]),A=h(A,R,C,L,T,5,s[28]),L=h(L,A,R,C,f,9,s[29]),C=h(C,L,A,R,y,14,s[30]),A=c(A,R=h(R,C,L,A,S,20,s[31]),C,L,m,4,s[32]),L=c(L,A,R,C,b,11,s[33]),C=c(C,L,A,R,k,16,s[34]),R=c(R,C,L,A,E,23,s[35]),A=c(A,R,C,L,l,4,s[36]),L=c(L,A,R,C,g,11,s[37]),C=c(C,L,A,R,y,16,s[38]),R=c(R,C,L,A,w,23,s[39]),A=c(A,R,C,L,T,4,s[40]),L=c(L,A,R,C,o,11,s[41]),C=c(C,L,A,R,p,16,s[42]),R=c(R,C,L,A,v,23,s[43]),A=c(A,R,C,L,_,4,s[44]),L=c(L,A,R,C,S,11,s[45]),C=c(C,L,A,R,x,16,s[46]),A=d(A,R=c(R,C,L,A,f,23,s[47]),C,L,o,6,s[48]),L=d(L,A,R,C,y,10,s[49]),C=d(C,L,A,R,E,15,s[50]),R=d(R,C,L,A,m,21,s[51]),A=d(A,R,C,L,S,6,s[52]),L=d(L,A,R,C,p,10,s[53]),C=d(C,L,A,R,w,15,s[54]),R=d(R,C,L,A,l,21,s[55]),A=d(A,R,C,L,b,6,s[56]),L=d(L,A,R,C,x,10,s[57]),C=d(C,L,A,R,v,15,s[58]),R=d(R,C,L,A,T,21,s[59]),A=d(A,R,C,L,g,6,s[60]),L=d(L,A,R,C,k,10,s[61]),C=d(C,L,A,R,f,15,s[62]),R=d(R,C,L,A,_,21,s[63]),a[0]=a[0]+A|0,a[1]=a[1]+R|0,a[2]=a[2]+C|0,a[3]=a[3]+L|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var a=e.floor(i/4294967296),o=i;r[15+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var h=l[u];l[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,i,n,a,o){var s=e+(t&r|~t&i)+n+o;return(s<<a|s>>>32-a)+t}function h(e,t,r,i,n,a,o){var s=e+(t&i|r&~i)+n+o;return(s<<a|s>>>32-a)+t}function c(e,t,r,i,n,a,o){var s=e+(t^r^i)+n+o;return(s<<a|s>>>32-a)+t}function d(e,t,r,i,n,a,o){var s=e+(r^(t|~i))+n+o;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(l),t.HmacMD5=a._createHmacHelper(l)}(Math),i.MD5)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i,n,a,o,s,l;e.exports=(l=r(0),n=(i=l).lib,a=n.Base,o=n.WordArray,(s=i.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}}),l)},function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=r(40)("./"+e+".ts").default;return function(e){return t&&t[e]?t[e]:e}}},function(e,t,r){var i,n,a,o,s,l,u,h;e.exports=(h=r(0),n=(i=h).lib,a=n.WordArray,o=n.Hasher,s=i.algo,l=[],u=s.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],u=0;u<80;u++){if(u<16)l[u]=0|e[t+u];else{var h=l[u-3]^l[u-8]^l[u-14]^l[u-16];l[u]=h<<1|h>>>31}var c=(i<<5|i>>>27)+s+l[u];c+=u<20?1518500249+(n&a|~n&o):u<40?1859775393+(n^a^o):u<60?(n&a|n&o|a&o)-1894007588:(n^a^o)-899497514,s=o,o=a,a=n<<30|n>>>2,n=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=o._createHelper(u),i.HmacSHA1=o._createHmacHelper(u),h.SHA1)},function(e,t,r){var i,n,a,o;e.exports=(i=r(0),a=(n=i).lib.Base,o=n.enc.Utf8,void(n.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),a=this._iKey=t.clone(),s=n.words,l=a.words,u=0;u<r;u++)s[u]^=1549556828,l[u]^=909522486;n.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},function(e,t,r){"use strict";var i=r(17),n=r.n(i),a=r(11),o=r.n(a),s=r(18),l=r(19),u=n()((function(e){return e[1]})),h=o()(s.a),c=o()(l.a);u.push([e.i,'@-webkit-keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}:root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;transform-origin:top;transform:translateY(var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid transparent;border-left:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid transparent;border-right:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}[data-balloon]:before{display:none}[aria-label][data-balloon-pos]:after{padding:10px 20px;font-size:16px!important;border-radius:4px;background:rgba(0,0,0,.7)}.hiplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.hiplayer-bezel .hiplayer-loading-icon{display:none;position:absolute;top:calc(50% - 29px);left:calc(50% - 29px);height:58px;width:58px;pointer-events:none}.hiplayer-bezel .hiplayer-loading-icon .hiplayer-loading-hide{display:none}.hiplayer-bezel .hiplayer-loading-icon .hiplayer-loading-dot{width:16px;height:16px;position:absolute;top:calc(50% - 8px);left:calc(50% - 8px);border-radius:50%;-webkit-animation:dot-spin 1.2s ease infinite;animation:dot-spin 1.2s ease infinite}.hiplayer-bezel .hiplayer-loading-icon .hiplayer-loading-dot-1{background-color:#ccabff;animation-delay:-2s;-webkit-animation-delay:-2s}.hiplayer-bezel .hiplayer-loading-icon .hiplayer-loading-dot-2{background-color:#ff66bf;animation-delay:-1.4s;-webkit-animation-delay:-1.4s}@-webkit-keyframes dot-spin{0%{z-index:1;transform:scale(1) translateZ(0);-webkit-transform:scale(1) translateZ(0)}25%{z-index:1;transform:scale(1.375) translate3d(-21px,0,0);-webkit-transform:scale(1.375) translate3d(-21px,0,0)}50%{z-index:2;transform:scale(2) translateZ(100px);-webkit-transform:scale(2) translateZ(100px)}75%{z-index:1;transform:scale(1.375) translate3d(21px,0,0);-webkit-transform:scale(1.375) translate3d(21px,0,0)}to{z-index:1;transform:scale(1) translateZ(0);-webkit-transform:scale(1) translateZ(0)}}@keyframes dot-spin{0%{z-index:1;transform:scale(1) translateZ(0);-webkit-transform:scale(1) translateZ(0)}25%{z-index:1;transform:scale(1.375) translate3d(-21px,0,0);-webkit-transform:scale(1.375) translate3d(-21px,0,0)}50%{z-index:2;transform:scale(2) translateZ(100px);-webkit-transform:scale(2) translateZ(100px)}75%{z-index:1;transform:scale(1.375) translate3d(21px,0,0);-webkit-transform:scale(1.375) translate3d(21px,0,0)}to{z-index:1;transform:scale(1) translateZ(0);-webkit-transform:scale(1) translateZ(0)}}.hiplayer-mobile .hiplayer-bezel .hiplayer-loading-icon{transform:scale(.5)}.hiplayer-controller-mask{background:linear-gradient(0deg,rgba(23,23,26,.75),transparent);height:190px;width:100%}.hiplayer-controller,.hiplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.hiplayer-controller{left:0;right:0;height:60px;padding:0 30px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;justify-content:space-between;align-items:center}.hiplayer-controller .hiplayer-bar-wrap{cursor:pointer;position:absolute;left:0;bottom:60px;box-sizing:content-box;width:100%;height:4px;padding-bottom:4px}.hiplayer-controller .hiplayer-bar-wrap:hover .hiplayer-highlight{display:block;width:8px;transform:translateX(-4px);top:4px;height:40%}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar-bg{position:absolute;height:3px;width:100%;background:hsla(0,0%,100%,.3)}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar-bg .hiplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.5);height:3px;transition:all .5s ease;will-change:width}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar{position:relative;height:3px;width:calc(100% - 20px);cursor:pointer}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played{position:absolute;left:0;top:0;bottom:0;transform:translateY(-10%);height:4px;will-change:width}.hiplayer-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played .hiplayer-thumb{position:absolute;top:-12px;right:-23px;height:26px;width:26px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out}.hiplayer-controller .hiplayer-icons{width:50%;height:60px;padding:5px 0}.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask{position:absolute;left:50%;bottom:38px;width:120%;padding:10px 0;transform:translate(-50%);border-radius:5px 5px 0 0;border:1px solid #444;background:#232326;font-size:18px;color:#ccc;text-align:center;transition:all .3s ease-in-out;overflow:hidden}.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item{height:50px;line-height:50px;cursor:pointer}.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item.hiplayer-subtitle-item-auto{height:67px}.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item.hiplayer-subtitle-item{position:relative}.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item-std,.hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item:hover{color:#dc41eb}.hiplayer-controller .hiplayer-icons.hiplayer-icons-left{max-width:50%;display:flex;justify-content:flex-start;align-items:center}.hiplayer-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-play-icon{order:1}.hiplayer-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-next-play-icon{order:2}.hiplayer-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-seek{order:3}.hiplayer-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-time{order:5}.hiplayer-controller .hiplayer-icons.hiplayer-icons-right{display:flex;justify-content:flex-end;align-items:center}.hiplayer-controller .hiplayer-icons .hiplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}.hiplayer-controller .hiplayer-icons .hiplayer-text{position:relative;width:auto;height:40px;line-height:40px;padding:0 15px;white-space:nowrap;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:18px;color:#ccc;cursor:pointer}.hiplayer-controller .hiplayer-icons .hiplayer-text:hover{color:#fff}.hiplayer-controller .hiplayer-icons .hiplayer-text .hiplayer-dtime{color:#999}.hiplayer-controller .hiplayer-icons .hiplayer-text.hiplayer-speed-text{width:55px;text-align:center}.hiplayer-controller .hiplayer-icons .hiplayer-icon{flex-shrink:0;width:20px;margin:0 20px;border:none;background-color:transparent;outline:none;cursor:pointer;font-size:0;box-sizing:border-box}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-play-icon{width:20px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-next-play-icon{width:21px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-seek-rew-icon{margin:0 10px 0 20px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-seek-ff-icon{margin:0 20px 0 10px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-camera-icon{padding:10px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-volume-icon{width:34px;height:100%;margin-left:15px}.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-full-icon,.hiplayer-controller .hiplayer-icons .hiplayer-icon.hiplayer-more-icon{width:24px;height:100%}.hiplayer-controller .hiplayer-icons .hiplayer-seek{display:flex;justify-content:center;align-items:center}.hiplayer-controller .hiplayer-icons .hiplayer-volume{position:relative;cursor:pointer;height:100%;z-index:2}.hiplayer-controller .hiplayer-icons .hiplayer-volume:hover .hiplayer-volume-mask{display:flex}.hiplayer-controller .hiplayer-icons .hiplayer-volume.hiplayer-volume-active .hiplayer-volume-bar-wrap .hiplayer-volume-bar .hiplayer-volume-bar-inner .hiplayer-thumb{transform:scale(1)}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask{display:none;bottom:45px}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask .hiplayer-volume-setting{display:flex;flex-direction:column;justify-content:space-around;width:100%;height:160px;align-items:center}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask .hiplayer-volume-setting .hiplayer-volume-bar-wrap{height:120px;width:23px;padding:0 9px;display:flex;justify-content:center}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask .hiplayer-volume-setting .hiplayer-volume-bar-wrap .hiplayer-volume-bar{position:relative;width:3px;height:120px;background:#aaa;transition:all .3s ease-in-out}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask .hiplayer-volume-setting .hiplayer-volume-bar-wrap .hiplayer-volume-bar .hiplayer-volume-bar-inner{position:absolute;bottom:0;left:0;width:100%;transition:all .1s ease;will-change:height}.hiplayer-controller .hiplayer-icons .hiplayer-volume .hiplayer-volume-mask .hiplayer-volume-setting .hiplayer-volume-bar-wrap .hiplayer-volume-bar .hiplayer-volume-bar-inner .hiplayer-thumb{position:absolute;top:0;right:6px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out}.hiplayer-controller .hiplayer-icons .hiplayer-full{display:inline-block;height:100%;position:relative}.hiplayer-controller .hiplayer-icons .hiplayer-full:hover .hiplayer-full-in-icon{display:block}.hiplayer-controller .hiplayer-icons .hiplayer-full .hiplayer-full-in-icon{position:absolute;top:-40px;padding:6px;z-index:1;display:none}.hiplayer-controller .hiplayer-icons .hiplayer-more{position:relative;z-index:2;height:100%}.hiplayer-controller .hiplayer-icons .hiplayer-more:hover .hiplayer-more-mask{display:block;min-width:350px;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:0 20px 20px;left:0;transform:translate(-80%)}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask{display:none}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .more-row-group{display:flex;justify-content:space-between;color:#ccc;margin-top:20px}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .more-row-group .text-desc{font-size:16px;line-height:19px;font-weight:400;text-align:initial;flex:1}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .more-row-group .icon-img{width:32px;height:20px;flex-shrink:0}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .hiplayer-feedback-group-btn{cursor:pointer}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .hiplayer-feedback-group-btn svg{fill:transparent}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .auto-charge-group .icon-img{cursor:pointer}.hiplayer-controller .hiplayer-icons .hiplayer-more .hiplayer-more-mask .auto-charge-desc{margin-top:10px;font-size:12px;line-height:18px;font-weight:400;color:#aaa;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;text-align:left}.hiplayer-controller .hiplayer-icons .hiplayer-quality{position:relative;z-index:2}.hiplayer-controller .hiplayer-icons .hiplayer-quality:hover .hiplayer-quality-list,.hiplayer-controller .hiplayer-icons .hiplayer-quality:hover .hiplayer-quality-mask{display:block}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-mask{display:none;width:120px}.hiplayer-controller .hiplayer-icons .hiplayer-quality .quality-vip-container{width:160px}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list{display:none}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list .hiplayer-quality-item{text-align:center}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list .hiplayer-pop-item-std{position:relative}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list .hiplayer-pop-item-std:before{content:"";position:absolute;top:17px;display:inline-block;width:16px;height:16px;margin-left:-24px;background:url('+h+');background-repeat:no-repeat;background-size:contain}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list .quality-vip{position:relative}.hiplayer-controller .hiplayer-icons .hiplayer-quality .hiplayer-quality-list .quality-vip:after{content:"";position:absolute;top:17px;display:inline-block;width:29px;height:16px;margin-left:8px;background-image:url('+c+');background-size:contain;background-repeat:no-repeat}.hiplayer-controller .hiplayer-icons .hiplayer-episodes{position:relative;z-index:2;display:none}.hiplayer-controller .hiplayer-icons .hiplayer-episodes:hover .hiplayer-episode-mask{display:block}.hiplayer-controller .hiplayer-icons .hiplayer-episodes .hiplayer-episode-mask{width:514px;display:none;padding:16px}.hiplayer-controller .hiplayer-icons .hiplayer-subtitle{position:relative;z-index:2}.hiplayer-controller .hiplayer-icons .hiplayer-subtitle:hover .hiplayer-subtitle-list,.hiplayer-controller .hiplayer-icons .hiplayer-subtitle:hover .hiplayer-subtitle-mask{display:block}.hiplayer-controller .hiplayer-icons .hiplayer-subtitle .hiplayer-subtitle-mask{display:none;width:200px}.hiplayer-controller .hiplayer-icons .hiplayer-subtitle .hiplayer-subtitle-list{display:none;max-height:300px;overflow:auto}.hiplayer-controller .hiplayer-icons .hiplayer-speed{position:relative;z-index:2}.hiplayer-controller .hiplayer-icons .hiplayer-speed:hover .hiplayer-speed-list{display:block}.hiplayer-controller .hiplayer-icons .hiplayer-speed:hover .hiplayer-speed-mask{display:block;width:88px}.hiplayer-controller .hiplayer-icons .hiplayer-speed .hiplayer-speed-list,.hiplayer-controller .hiplayer-icons .hiplayer-speed .hiplayer-speed-mask{display:none}.hiplayer-controller .hiplayer-icons .hiplayer-label{color:#eee;font-size:16px;display:inline-block;vertical-align:middle;white-space:nowrap}.hiplayer-controller .hiplayer-icons .hiplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input{max-height:0;max-width:0;display:none}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input+label:after,.hiplayer-controller .hiplayer-icons .hiplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}.hiplayer-controller .hiplayer-icons .hiplayer-toggle input:checked+label:after{left:12px}.hiplayer-mobile-controller{position:absolute;bottom:0;left:0;right:0;height:45px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:all .3s ease;padding:0 6px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}@media only screen and (min-width:750px){.hiplayer-mobile-controller{height:70px;padding:0 12px}}@media only screen and (min-width:1200px){.hiplayer-mobile-controller{height:90px}}.hiplayer-mobile-controller .hiplayer-icon{width:40px;height:40px;box-sizing:border-box;padding:8px}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-icon{width:44px;height:44px;padding:10px}}@media only screen and (min-width:1200px){.hiplayer-mobile-controller .hiplayer-icon{width:60px;height:60px;padding:10px}}.hiplayer-mobile-controller .hiplayer-icon .hiplayer-icon-content{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.hiplayer-mobile-controller .hiplayer-time{color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:14px}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-time{font-size:20px}}@media only screen and (min-width:1200px){.hiplayer-mobile-controller .hiplayer-time{font-size:28px}}.hiplayer-mobile-controller .hiplayer-bar-wrap{cursor:pointer;position:relative;width:calc(100% - 150px);height:3px}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-bar-wrap{width:calc(100% - 220px);height:6px}}@media only screen and (min-width:1200px){.hiplayer-mobile-controller .hiplayer-bar-wrap{width:calc(100% - 300px);height:6px}}.hiplayer-mobile-controller .hiplayer-bar-wrap:hover .hiplayer-bar .hiplayer-played .hiplayer-thumb{transform:scale(1)}.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar{height:6px}}.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.4);height:3px;transition:all .5s ease;will-change:width}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-loaded{height:6px}}.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played{height:6px}}.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played .hiplayer-thumb{position:absolute;top:0;right:0;margin-top:-5px;margin-right:-6.5px;height:13px;width:13px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#fff}@media only screen and (min-width:750px){.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played .hiplayer-thumb{margin-top:-6px;margin-right:-9px;height:18px;width:18px}}@media only screen and (min-width:1200px){.hiplayer-mobile-controller .hiplayer-bar-wrap .hiplayer-bar .hiplayer-played .hiplayer-thumb{margin-top:-10px;margin-right:-13px;height:26px;width:26px}}.hiplayer-big-play-icon{position:absolute;left:50%;bottom:50%;transform:translate(-50%,40%);display:block;width:70px;height:70px;border:none;background-color:transparent;outline:none;cursor:pointer;box-sizing:border-box;opacity:.8;transition:all .3s ease}.hiplayer-subtitle-translate-type{color:#999;position:absolute;font-size:12px;bottom:16px;line-height:12px;width:100%;text-align:center}.hiplayer-rtl .hiplayer-controller,.hiplayer-rtl .hiplayer-controller .hiplayer-bar-wrap,.hiplayer-rtl .hiplayer-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-seek,.hiplayer-rtl .hiplayer-mobile-controller,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-bar-wrap,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-icons.hiplayer-icons-left .hiplayer-seek{direction:ltr}.hiplayer-rtl .hiplayer-controller .hiplayer-more-mask,.hiplayer-rtl .hiplayer-controller .hiplayer-quality-mask,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-more-mask,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-quality-mask{direction:rtl}.hiplayer-rtl .hiplayer-controller .hiplayer-quality-mask .hiplayer-pop-item-std:before,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-quality-mask .hiplayer-pop-item-std:before{margin-left:0;margin-right:-24px}.hiplayer-rtl .hiplayer-controller .hiplayer-quality-mask .quality-vip:after,.hiplayer-rtl .hiplayer-mobile-controller .hiplayer-quality-mask .quality-vip:after{margin-left:0;margin-right:8px}.hiplayer-logo{display:none}.hiplayer-logo,.hiplayer-notice{pointer-events:none;position:absolute}.hiplayer-notice{opacity:0;left:0;bottom:80px;height:40px;line-height:40px;font-size:18px;border-radius:20px;color:#ccc;padding:0 16px;background:rgba(23,23,26,.7);transition:all .3s ease-in-out;overflow:hidden}.hiplayer-mobile .hiplayer-notice{bottom:40px;height:30px;line-height:30px;font-size:14px}.hiplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.hiplayer-mask.hiplayer-mask-show{display:block}.hiplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.hiplayer-video-wrap .hiplayer-video-inner-wrap{position:absolute;width:100%;height:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.hiplayer-video-wrap .hiplayer-video-inner-wrap .hiplayer-video{width:100%;height:100%;display:none;-o-object-fit:contain;object-fit:contain}.hiplayer-video-wrap .hiplayer-video-inner-wrap .hiplayer-video-current{display:block}.hiplayer-video-wrap .hiplayer-video-inner-wrap .hiplayer-video-prepare{display:none}.hiplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.hiplayer *{box-sizing:border-box}.hiplayer svg{width:100%;height:100%;fill:#fff}.hiplayer svg:hover{fill:#ddd}.hiplayer.hiplayer-rtl{direction:rtl}.hiplayer.hiplayer-arrow .hiplayer-controller .hiplayer-icons .hiplayer-icon{margin:0 10px}.hiplayer.hiplayer-arrow .hiplayer-controller .hiplayer-icons .hiplayer-text{padding:0 7.5px}.hiplayer.hiplayer-mobile .hiplayer-big-play-icon{position:absolute;left:50%;bottom:50%;width:60px;height:60px;opacity:.6;transform:translate(-50%,40%)}@media only screen and (min-width:750px){.hiplayer.hiplayer-mobile .hiplayer-big-play-icon{width:120px;height:120px}}.hiplayer.hiplayer-mobile .hiplayer-controller-mask{height:80px}.hiplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:1500;left:0;top:0;margin:0;padding:0;transform:translate(0)}.hiplayer:-webkit-full-screen .hiplayer-controller .hiplayer-icons .hiplayer-episodes{display:block}.hiplayer:-webkit-full-screen .hiplayer-video{object-fit:contain}.hiplayer:-webkit-full-screen .hiplayer-controller .hiplayer-icons .hiplayer-full:hover .hiplayer-full-in-icon{display:inline-block}.hiplayer:-webkit-full-screen .hiplayer-controller .hiplayer-icons .hiplayer-full .hiplayer-full-in-icon{position:relative;top:0;z-index:1;display:inline-block}.hiplayer.hiplayer-live .hiplayer-bar-wrap,.hiplayer.hiplayer-live .hiplayer-next-play-icon,.hiplayer.hiplayer-live .hiplayer-setting-speed,.hiplayer.hiplayer-live .hiplayer-time{display:none}.hiplayer.hiplayer-loading .hiplayer-bezel .hiplayer-loading-icon{display:block}.hiplayer.hiplayer-loading .hiplayer-seek-container .hiplayer-play-icon .hiplayer-icon-content{display:none}.hiplayer.hiplayer-hide-controller{cursor:none}.hiplayer.hiplayer-hide-controller .hiplayer-controller,.hiplayer.hiplayer-hide-controller .hiplayer-controller-mask,.hiplayer.hiplayer-hide-controller .hiplayer-mobile-controller{opacity:0;transform:translateY(100%)}.hiplayer.hiplayer-hide-controller .hiplayer-big-play-icon{display:none}.hiplayer.hiplayer-hide-controller .hiplayer-seekff .hiplayer-play-icon,.hiplayer.hiplayer-hide-controller .hiplayer-seekff .hiplayer-seek-rew-icon,.hiplayer.hiplayer-hide-controller .hiplayer-seekrew .hiplayer-play-icon,.hiplayer.hiplayer-hide-controller .hiplayer-seekrew .hiplayer-seek-ff-icon{opacity:0}.hiplayer.hiplayer-hide-controller .hiplayer-seek-container{display:none}.hiplayer.hiplayer-hide-controller .hiplayer-seekff,.hiplayer.hiplayer-hide-controller .hiplayer-seekrew{display:flex}.hiplayer.hiplayer-show-controller .hiplayer-controller,.hiplayer.hiplayer-show-controller .hiplayer-controller-mask{opacity:1}.hiplayer.hiplayer-show-controller .hiplayer-big-play-icon{display:block}.hiplayer.hiplayer-fulled{position:fixed;z-index:1500;left:0;top:0;width:100%!important;height:100%!important}.hiplayer.hiplayer-fulled .hiplayer-controller .hiplayer-icons .hiplayer-episodes{display:block}.hiplayer.hiplayer-id-id .hiplayer-controller .hiplayer-icons .hiplayer-subtitle .hiplayer-subtitle-mask{width:280px}.hiplayer.hiplayer-ar-ae .hiplayer-controller .hiplayer-icons .hiplayer-subtitle .hiplayer-subtitle-mask,.hiplayer.hiplayer-zh-cn .hiplayer-controller .hiplayer-icons .hiplayer-subtitle .hiplayer-subtitle-mask{width:140px}.hiplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}.hiplayer-web-fullscreen-fix .hiplayer-controller .hiplayer-icons .hiplayer-full:hover .hiplayer-full-in-icon{display:inline-block}.hiplayer-web-fullscreen-fix .hiplayer-controller .hiplayer-icons .hiplayer-full .hiplayer-full-in-icon{position:relative;top:0;z-index:1;display:inline-block}.hiplayer-subtitle-wrapper{text-align:center;color:#fff;font-size:20px;line-height:1.3;font-family:Arial,sans-serif;text-underline-offset:4px}.hiplayer-subtitle-wrapper p{display:inline-block;margin:0;padding:0}.hiplayer-subtitle-wrapper .subtitle-text{position:relative;z-index:0}.hiplayer-subtitle-wrapper .subtitle-cue span{display:inline-block}.hiplayer-subtitle-wrapper .subtitle-text:before{content:attr(data-text);position:absolute;-webkit-text-stroke-width:2px;z-index:-1;left:0;width:100%;white-space:pre-line}.hiplayer-subtitle-wrapper.hiplayer-subtitle-hide{display:none}.hiplayer-mobile .hiplayer-subtitle-wrapper{bottom:40px;font-size:14px;text-underline-offset:0}.hiplayer-mobile .hiplayer-subtitle-wrapper .subtitle-text:before{-webkit-text-stroke-width:1px}.hiplayer-rtl .hiplayer-subtitle-wrapper{direction:ltr}.hiplayer-seek-container{position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:space-around}.hiplayer-seek-container .hiplayer-icon{display:flex;justify-content:center;align-items:center}.hiplayer-seek-container .hiplayer-icon .hiplayer-icon-content{display:inline-block;width:30px;height:30px;position:relative}@media only screen and (min-width:750px){.hiplayer-seek-container .hiplayer-icon .hiplayer-icon-content{width:40px;height:40px}}@media only screen and (min-width:1200px){.hiplayer-seek-container .hiplayer-icon .hiplayer-icon-content{width:60px;height:60px}}.hiplayer-seek-container .hiplayer-icon .seek-rotate{display:inline-block}.hiplayer-seek-container .hiplayer-icon .seek-rotate-animation{-webkit-animation:seekRrotate .5s linear;animation:seekRrotate .5s linear}.hiplayer-seek-container .hiplayer-icon .seek-10{position:absolute;font-size:12px;color:#fff;width:100%;height:100%;left:0;top:0;display:flex;align-items:center;justify-content:center;margin-top:2px}@media only screen and (min-width:750px){.hiplayer-seek-container .hiplayer-icon .seek-10{font-size:15px}}@media only screen and (min-width:1200px){.hiplayer-seek-container .hiplayer-icon .seek-10{font-size:20px}}.hiplayer-seek-container .hiplayer-icon .seek-ff10-animation{-webkit-animation:seekff10Rrotate .5s linear;animation:seekff10Rrotate .5s linear}.hiplayer-seek-container .hiplayer-icon .seek-rew10-animation{-webkit-animation:seekrew10Rrotate .5s linear;animation:seekrew10Rrotate .5s linear}.hiplayer-seek-container .hiplayer-play-icon{display:inline-block;width:24px;height:24px;position:relative}@media only screen and (min-width:750px){.hiplayer-seek-container .hiplayer-play-icon{width:30px;height:30px}}@media only screen and (min-width:1200px){.hiplayer-seek-container .hiplayer-play-icon{width:44px;height:44px}}@-webkit-keyframes seekRrotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes seekRrotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes seekff10Rrotate{0%{transform:translateX(25px)}50%{transform:translateX(40px)}to{transform:translateX(40px);opacity:0}}@keyframes seekff10Rrotate{0%{transform:translateX(25px)}50%{transform:translateX(40px)}to{transform:translateX(40px);opacity:0}}@media only screen and (min-width:750px){@-webkit-keyframes seekff10Rrotate{0%{transform:translateX(35px)}50%{transform:translateX(50px)}to{transform:translateX(50px)}}@keyframes seekff10Rrotate{0%{transform:translateX(35px)}50%{transform:translateX(50px)}to{transform:translateX(50px)}}}@media only screen and (min-width:1200px){@-webkit-keyframes seekff10Rrotate{0%{transform:translateX(50px)}50%{transform:translateX(65px)}to{transform:translateX(65px)}}@keyframes seekff10Rrotate{0%{transform:translateX(50px)}50%{transform:translateX(65px)}to{transform:translateX(65px)}}}@-webkit-keyframes seekrew10Rrotate{0%{transform:translateX(-25px)}50%{transform:translateX(-40px)}to{transform:translateX(-40px);opacity:0}}@keyframes seekrew10Rrotate{0%{transform:translateX(-25px)}50%{transform:translateX(-40px)}to{transform:translateX(-40px);opacity:0}}@media only screen and (min-width:750px){@-webkit-keyframes seekrew10Rrotate{0%{transform:translateX(-35px)}50%{transform:translateX(-50px)}to{transform:translateX(-50px)}}@keyframes seekrew10Rrotate{0%{transform:translateX(-35px)}50%{transform:translateX(-50px)}to{transform:translateX(-50px)}}}@media only screen and (min-width:1200px){@-webkit-keyframes seekrew10Rrotate{0%{transform:translateX(-50px)}50%{transform:translateX(-65px)}to{transform:translateX(-65px)}}@keyframes seekrew10Rrotate{0%{transform:translateX(-50px)}50%{transform:translateX(-65px)}to{transform:translateX(-65px)}}}',""]),t.a=u},function(e,t,r){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,r){var i;"undefined"!=typeof window&&(i=function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,i),!0;case 5:return h.fn.call(h.context,t,r,i,a),!0;case 6:return h.fn.call(h.context,t,r,i,a,o),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,r);break;case 4:h[u].fn.call(h[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];h[u].fn.apply(h[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||l(this,a);else{for(var s=0,u=[],h=o.length;s<h;s++)(o[s].fn!==t||i&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var i,n,a,o,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,n=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var h=o.path,c=h.substring(0,h.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(c)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function i(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=r(r.s=ENTRY_MODULE);return i.default||i}function n(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e,t,i){var a={};a[i]=[];var o=t.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return a;for(var l,u=s[1],h=new RegExp("(\\\\n|\\W)"+n(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=h.exec(o);)"dll-reference"!==l[3]&&a[i].push(l[3]);for(h=new RegExp("\\("+n(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=h.exec(o);)e[l[2]]||(a[i].push(l[1]),e[l[2]]=r(l[1]).m),a[l[2]]=a[l[2]]||[],a[l[2]].push(l[4]);for(var c,d=Object.keys(a),f=0;f<d.length;f++)for(var p=0;p<a[d[f]].length;p++)c=a[d[f]][p],isNaN(1*c)||(a[d[f]][p]=1*a[d[f]][p]);return a}function o(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var n={main:r.m},s=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},i={main:[]},n={main:{}};o(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],h=r[u].pop();if(n[u]=n[u]||{},!n[u][h]&&e[u][h]){n[u][h]=!0,i[u]=i[u]||[],i[u].push(h);for(var c=a(e,e[u][h],u),d=Object.keys(c),f=0;f<d.length;f++)r[d[f]]=r[d[f]]||[],r[d[f]]=r[d[f]].concat(c[d[f]])}}return i}(n,e),l="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+n[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+n.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(t.bare)return u;var h=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),c=new window.Worker(h);return c.objectURL=h,c}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var i=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],h=s[2],c=s[3],d=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=d[f],y=d[v],b=d[y],_=257*d[m]^16843008*m;i[f]=_<<24|_>>>8,n[f]=_<<16|_>>>16,a[f]=_<<8|_>>>24,o[f]=_,_=16843009*b^65537*y^257*v^16843008*f,l[m]=_<<24|_>>>8,u[m]=_<<16|_>>>16,h[m]=_<<8|_>>>24,c[m]=_,f?(f=v^d[d[d[b^v]]],p^=d[d[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,o,s,l,u=this.ksRows=4*(n+6+1),h=this.keySchedule=new Uint32Array(u),c=this.invKeySchedule=new Uint32Array(u),d=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<n?s=h[a]=t[a]:(l=s,a%n==0?(l=d[(l=l<<8|l>>>24)>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l],l^=f[a/n|0]<<24):n>6&&a%n==4&&(l=d[l>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l]),h[a]=s=(h[a-n]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?h[a]:h[a-4],c[o]=o<4||a<=4?l:g[d[l>>>24]]^m[d[l>>>16&255]]^v[d[l>>>8&255]]^y[d[255&l]],c[o]=c[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,i){for(var n,a,o,s,l,u,h,c,d,f,p,g,m,v,y,b,_,w=this.keySize+6,k=this.invKeySchedule,S=this.invSBox,T=this.invSubMix,E=T[0],x=T[1],A=T[2],R=T[3],C=this.uint8ArrayToUint32Array_(r),L=C[0],D=C[1],O=C[2],I=C[3],F=new Int32Array(e),P=new Int32Array(F.length),B=this.networkToHostOrderSwap;t<F.length;){for(d=B(F[t]),f=B(F[t+1]),p=B(F[t+2]),g=B(F[t+3]),l=d^k[0],u=g^k[1],h=p^k[2],c=f^k[3],m=4,v=1;v<w;v++)n=E[l>>>24]^x[u>>16&255]^A[h>>8&255]^R[255&c]^k[m],a=E[u>>>24]^x[h>>16&255]^A[c>>8&255]^R[255&l]^k[m+1],o=E[h>>>24]^x[c>>16&255]^A[l>>8&255]^R[255&u]^k[m+2],s=E[c>>>24]^x[l>>16&255]^A[u>>8&255]^R[255&h]^k[m+3],l=n,u=a,h=o,c=s,m+=4;n=S[l>>>24]<<24^S[u>>16&255]<<16^S[h>>8&255]<<8^S[255&c]^k[m],a=S[u>>>24]<<24^S[h>>16&255]<<16^S[c>>8&255]<<8^S[255&l]^k[m+1],o=S[h>>>24]<<24^S[c>>16&255]<<16^S[l>>8&255]<<8^S[255&u]^k[m+2],s=S[c>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&h]^k[m+3],m+=3,P[t]=B(n^L),P[t+1]=B(s^D),P[t+2]=B(o^O),P[t+3]=B(a^I),L=d,D=f,O=p,I=g,t+=4}return i?(y=P.buffer,b=y.byteLength,(_=b&&new DataView(y).getUint8(b-1))?y.slice(0,b-_):y):P.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=r("./src/errors.ts"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js"),h=Object(u.getSelfScope)(),c=function(){function e(e,t,r){var i=(void 0===r?{}:r).removePKCS7Padding,n=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=n,n)try{var a=h.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),o(u.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var h=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new n(h,t)),this.fastAesKey.expandKey().then((function(n){new i(h,r).decrypt(e,n).catch((function(i){l.onWebCryptoError(i,e,t,r,o)})).then((function(e){o(e)}))})).catch((function(i){l.onWebCryptoError(i,e,t,r,o)}))}},t.onWebCryptoError=function(e,t,r,i,n){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,n)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var i=r("./src/events.js"),n=r("./src/errors.ts"),a=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function h(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function d(e,t){return!!(t+1<e.length&&u(e,t))}function f(e,t){if(d(e,t)){var r=h(e,t);if(t+r>=e.length)return!1;var i=c(e,t);if(i<=r)return!1;var n=t+i;if(n===e.length||n+1<e.length&&u(e,n))return!0}return!1}function p(e,t,r,a,o){if(!e.samplerate){var l=function(e,t,r,a){var o,l,u,h,c,d=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>p.length-1))return h=(1&t[r+2])<<2,h|=(192&t[r+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+h),/firefox/i.test(d)?l>=6?(o=5,c=new Array(4),u=l-3):(o=2,c=new Array(2),u=l):-1!==d.indexOf("android")?(o=2,c=new Array(2),u=l):(o=5,c=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===h||/vivaldi/i.test(d))||!a&&1===h)&&(o=2,c=new Array(2)),u=l)),c[0]=o<<3,c[0]|=(14&l)>>1,c[1]|=(1&l)<<7,c[1]|=h<<3,5===o&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:p[l],channelCount:h,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(i.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,r,a,o);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(e){return 9216e4/e}function m(e,t,r,i,n){var a=function(e,t,r,i,n){var a,o,s=e.length;if(a=h(e,t),o=c(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:r+i*n}}(t,r,i,n,g(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:t.subarray(r+s,r+s+l),pts:o,dts:o};return e.samples.push(u),{sample:u,length:l+s}}}var v=r("./src/demux/id3.js"),y=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(v.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(f(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var n=this._audioTrack,a=v.default.getID3Data(e,0)||[],l=v.default.getTimeStamp(a),u=Object(o.isFiniteNumber)(l)?90*l:9e4*t,h=0,c=u,f=e.length,g=a.length,y=[{pts:c,dts:c,data:a}];g<f-1;)if(d(e,g)&&g+5<f){p(n,this.observer,e,g,n.manifestCodec);var b=m(n,e,g,u,h);if(!b){s.logger.log("Unable to parse AAC frame");break}g+=b.length,c=b.sample.pts,h++}else v.default.isHeader(e,g)?(a=v.default.getID3Data(e,g),y.push({pts:c,dts:c,data:a}),g+=a.length):g++;this.remuxer.remux(n,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),b=r("./src/demux/mp4demuxer.js"),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,n){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=i+n*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(r,r+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==n&&15!==n&&3!==a){var s=3===r?3-i:3===i?3:4,l=1e3*_.BitratesMap[14*s+n-1],u=3===r?0:2===r?1:2,h=_.SamplingRateMap[3*u+a],c=e[t+3]>>6==3?1:2,d=_.SamplesCoefficients[r][i],f=_.BytesInSlot[i],p=8*d*f;return{sampleRate:h,channelCount:c,frameLength:parseInt(d*l/h+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),i=4;r&&r.frameLength&&(i=r.frameLength);var n=t+i;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}},w=_,k=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},t.readSPS=function(){var e,t,r,i,n,a,o,s=0,l=0,u=0,h=0,c=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(c(),e=c(),d(5),g(3),c(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var _=f();if(0===_)f();else if(1===_)for(g(1),m(),m(),t=f(),o=0;o<t;o++)m();v(),g(1),r=f(),i=f(),0===(n=d(1))&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),h=f());var w=[1,1];if(p()&&p())switch(c()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-n)*(i+1)*16-(n?2:4)*(u+h),pixelRatio:w}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),S=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,i){var n=e[t].unit,a=n.subarray(16,n.length-n.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),n.set(a,16),i||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,n=32;n<=e.length-16;n+=160,i+=16)r.set(e.subarray(n,n+16),i);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e},t.decryptAvcSample=function(e,t,r,i,n,a){var o=this.discardEPB(n.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){n.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,r+1,i)}))},t.decryptAvcSamples=function(e,t,r,i){for(;;t++,r=0){if(t>=e.length)return void i();for(var n=e[t].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,a,o),!o)return}}}},e}(),T={video:1,audio:2,id3:3,text:4},E=function(){function e(e,t,r,i){this.observer=e,this.config=r,this.typeSupported=i,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new S(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:T[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",n),this._audioTrack=e.createTrack("audio",n),this._id3Track=e.createTrack("id3",n),this._txtTrack=e.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},t.resetTimeStamp=function(){},t.append=function(t,r,a,o){var l,u,h,c,d,f=t.length,p=!1;this.pmtUnknownTypes={},this.contiguous=a;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,b=m.pid,_=v.pid,w=y.pid,k=this._pmtId,S=m.pesData,T=v.pesData,E=y.pesData,x=this._parsePAT,A=this._parsePMT.bind(this),R=this._parsePES,C=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),I=e._syncOffset(t);for(f-=(f+I)%188,l=I;l<f;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),h=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((c=l+5+t[l+4])===l+188)continue}else c=l+4;switch(h){case b:u&&(S&&(d=R(S))&&C(d,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(c,l+188)),S.size+=l+188-c);break;case _:u&&(T&&(d=R(T))&&(v.isAAC?L(d):D(d)),T={data:[],size:0}),T&&(T.data.push(t.subarray(c,l+188)),T.size+=l+188-c);break;case w:u&&(E&&(d=R(E))&&O(d),E={data:[],size:0}),E&&(E.data.push(t.subarray(c,l+188)),E.size+=l+188-c);break;case 0:u&&(c+=t[c]+1),k=this._pmtId=x(t,c);break;case k:u&&(c+=t[c]+1);var F=A(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=F.avc)>0&&(m.pid=b),(_=F.audio)>0&&(v.pid=_,v.isAAC=F.isAAC),(w=F.id3)>0&&(y.pid=w),p&&!g&&(s.logger.log("reparse from beginning"),p=!1,l=I-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(i.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(d=R(S))?(C(d,!0),m.pesData=null):m.pesData=S,T&&(d=R(T))?(v.isAAC?L(d):D(d),v.pesData=null):(T&&T.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),E&&(d=R(E))?(O(d),y.pesData=null):y.pesData=E,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,r,a,o):this.decryptAndRemux(v,m,y,this._txtTrack,r,a,o)},t.decryptAndRemux=function(e,t,r,i,n,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,i,n,a,o)}))}else this.decryptAndRemuxAvc(e,t,r,i,n,a,o)},t.decryptAndRemuxAvc=function(e,t,r,i,n,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,i,n,a,o)}))}else this.remuxer.remux(e,t,r,i,n,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var i=this.pmtUnknownTypes[e]||0;return 0===i&&(this.pmtUnknownTypes[e]=0,t.call(s.logger,r)),this.pmtUnknownTypes[e]++,i},t._parsePMT=function(e,t,r,i){var n,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<n;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){this._trackUnknownPmt(e[t],s.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!i){this._trackUnknownPmt(e[t],s.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:r?-1===o.audio&&(o.audio=a,o.isAAC=!1):this._trackUnknownPmt(e[t],s.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,r,i,n,a,o,l,u,h=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var d=new Uint8Array(c[0].length+c[1].length);d.set(c[0]),d.set(c[1],c[0].length),c[0]=d,c.splice(1,1)}if(1===((t=c[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(r=t[7])&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?o-(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l):l=o),u=(n=t[8])+9,e.size<=u)return null;e.size-=u,a=new Uint8Array(e.size);for(var f=0,p=c.length;f<p;f++){var g=(t=c[f]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}a.set(t,h),h+=g}return i&&(i-=n+3),{data:a,pts:o,dts:l,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,i=r.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;var n=r[i-1];e.pts=n.pts,e.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,i,n,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,h=this.pushAccesUnit.bind(this),c=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}};e.data=null,l&&s.length&&!o.audFound&&(h(l,o),l=this.avcSample=c(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:i=!0,l||(l=a.avcSample=c(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var d=new k(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=c(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(r=new k(a.discardEPB(t.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&r.bytesAvailable>1;){f=0;do{f+=m=r.readUByte()}while(255===m);p=0;do{p+=m=r.readUByte()}while(255===m);if(4===f&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),b=31&y,_=[y,r.readUByte()];for(n=0;n<b;n++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,p>16){var w=[];for(n=0;n<16;n++)w.push(r.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||w.push("-");var S=p-16,T=new Uint8Array(S);for(n=0;n<S;n++)T[n]=r.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:w.join(""),userDataBytes:T,userData:Object(v.utf8ArrayToStr)(T.buffer)})}}else if(p<r.bytesAvailable)for(n=0;n<p;n++)r.readUByte()}break;case 7:if(i=!0,u=!0,!o.sps){var E=(r=new k(t.data)).readSPS();o.width=E.width,o.height=E.height,o.pixelRatio=E.pixelRatio,o.sps=[t.data],o.duration=a._duration;var x=t.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var R=x[n].toString(16);R.length<2&&(R="0"+R),A+=R}o.codec=A}break;case 8:i=!0,o.pps||(o.pps=[t.data]);break;case 9:i=!1,o.audFound=!0,l&&h(l,o),l=a.avcSample=c(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)})),t&&l&&(h(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,i,n,a=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,h=[],c=-1;for(-1===l&&(c=0,n=31&e[0],l=0,a=1);a<o;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(c>=0)i={data:e.subarray(c,a-l-1),type:n},h.push(i);else{var d=this._getLastNalUnit();if(d&&(u&&a<=4-u&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-u)),(r=a-l-1)>0)){var f=new Uint8Array(d.data.byteLength+r);f.set(d.data,0),f.set(e.subarray(0,r),d.data.byteLength),d.data=f}}a<o?(c=a,n=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(c>=0&&l>=0&&(i={data:e.subarray(c,o),type:n,state:l},h.push(i)),0===h.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return s.naluState=l,h},t.discardEPB=function(e){for(var t,r,i=e.byteLength,n=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(n.push(a+2),a+=2):a++;if(0===n.length)return e;t=i-n.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===n[0]&&(o++,n.shift()),r[a]=e[o];return r},t._parseAACPES=function(e){var t,r,a,o,l,u,h,c=this._audioTrack,f=e.data,v=e.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var _=new Uint8Array(y.byteLength+f.byteLength);_.set(y,0),_.set(f,y.byteLength),f=_}for(a=0,l=f.length;a<l-1&&!d(f,a);a++);if(!a||(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,h=!1):(u="no ADTS header found in AAC PES",h=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(i.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:h,reason:u}),!h)){if(p(c,this.observer,f,a,this.audioCodec),r=0,t=g(c.samplerate),y&&b){var w=b+t;Math.abs(w-v)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;a<l;){if(d(f,a)){if(a+5<l){var k=m(c,f,a,v,r);if(k){a+=k.length,o=k.sample.pts,r++;continue}}break}a++}y=a<l?f.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,n=0,a=e.pts;n<r;)if(w.isHeader(t,n)){var o=w.appendFrame(this._audioTrack,t,n,a,i);if(!o)break;n+=o.length,i++}else n++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),x=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,i=v.default.getID3Data(e,0);if(i&&void 0!==v.default.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(w.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var n=v.default.getID3Data(e,0)||[],a=v.default.getTimeStamp(n),o=void 0!==a?90*a:9e4*t,s=n.length,l=e.length,u=0,h=0,c=this._audioTrack,d=[{pts:o,dts:o,data:n}];s<l;)if(w.isHeader(e,s)){var f=w.appendFrame(c,e,s,o,u);if(!f)break;s+=f.length,h=f.sample.pts,u++}else v.default.isHeader(e,s)?(n=v.default.getID3Data(e,s),d.push({pts:h,dts:h,data:n}),s+=n.length):s++;this.remuxer.remux(c,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),A=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),R=Math.pow(2,32)-1,C=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,n=r.length,a=n;n--;)i+=r[n].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),n=0,i=8;n<a;n++)t.set(r[n],i),i+=r[n].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(R+1)),n=Math.floor(r%(R+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(R+1)),n=Math.floor(r%(R+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,i,n=t.samples||[],a=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)r=n[i].flags,a[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,n,a=[],o=[];for(r=0;r<t.sps.length;r++)n=(i=t.sps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)n=(i=t.pps[r]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,h=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,n=t.width,a=t.height,o=Math.floor(i/(R+1)),s=Math.floor(i%(R+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),n=t.id,a=Math.floor(r/(R+1)),o=Math.floor(r%(R+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,n,a,o,s,l,u=t.samples||[],h=u.length,c=12+16*h,d=new Uint8Array(c);for(r+=8+c,d.set([0,0,15,1,h>>>24&255,h>>>16&255,h>>>8&255,255&h,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<h;i++)a=(n=u[i]).duration,o=n.size,s=n.flags,l=n.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,d)},e.initSegment=function(t){e.types||e.init();var r,i=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),r.set(i,e.FTYP.byteLength),r},e}();function L(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var n=e*t*r;return i?Math.round(n):n}function D(e,t){return void 0===t&&(t=!1),L(e,1e3,1/9e4,t)}function O(e,t){return void 0===t&&(t=1),L(e,9e4,1/t)}var I=O(10),F=O(.2),P=null;function B(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}var M,U=function(){function e(e,t,r,i){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===P){var n=navigator.userAgent.match(/Chrome\/(\d+)/i);P=n?parseInt(n[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var i=r.pts-e;return i<-4294967296?(t=!0,B(e,r.pts)):i>0?e:r.pts}),e[0].pts);return t&&s.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,n,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,h=t.samples.length,c=a,d=a;if(u&&h){var f=this.getVideoStartPts(t.samples),p=(B(e.samples[0].pts,f)-f)/t.inputTimeScale;c+=Math.max(0,p),d+=Math.max(0,-p)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var g,m=this.remuxAudio(e,c,o,l);h&&(m&&(g=m.endPTS-m.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,d,o,g))}else if(h){var v=this.remuxVideo(t,d,o,0,l);v&&e.codec&&this.remuxEmptyAudio(e,c,o,v)}}r.samples.length&&this.remuxID3(r,a),n.samples.length&&this.remuxText(n,a),this.observer.trigger(i.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var a,o,l=this.observer,u=e.samples,h=t.samples,c=this.typeSupported,d="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(c.mpeg?(d="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),f.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array:C.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&h.length){var m=t.inputTimeScale;if(t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:C.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var v=this.getVideoStartPts(h),y=Math.round(m*r);o=Math.min(o,B(h[0].dts,v)-y),a=Math.min(a,v-y),this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:a})}}else g&&f.audio&&this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:a});Object.keys(f).length?(l.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(i.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,a){var o,l,u,h,c,d=e.timescale,f=e.samples,p=[],g=f.length,m=this._initPTS,v=8,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,_=0,w=!1,k=this.nextAvcDts;if(0!==g){r||(k=t*d-(f[0].pts-B(f[0].dts,f[0].pts)));for(var S=0;S<g;S++){var T=f[S];T.pts=B(T.pts-m,k),T.dts=B(T.dts-m,k),T.dts>T.pts&&(_=Math.max(Math.min(_,T.pts-T.dts),-1*F)),T.dts<f[S>0?S-1:S].dts&&(w=!0)}w&&f.sort((function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id})),h=f[0].dts,c=f[g-1].dts;var E=Math.round((c-h)/(g-1));if(_<0){if(_<-2*E){s.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+D(-E,!0)+" ms");for(var x=_,A=0;A<g;A++)f[A].dts=x=Math.max(x,f[A].pts-E),f[A].pts=Math.max(x,f[A].pts)}else{s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+D(_,!0)+" ms to overcome this issue");for(var R=0;R<g;R++)f[R].dts=f[R].dts+_}h=f[0].dts,c=f[g-1].dts}if(r){var L=h-k,O=L>E;if(O||L<-1){O?s.logger.warn("AVC: "+D(L,!0)+" ms ("+L+"dts) hole between fragments detected, filling it"):s.logger.warn("AVC: "+D(-L,!0)+" ms ("+L+"dts) overlapping between fragments detected"),h=k;var I=f[0].pts-L;f[0].dts=h,f[0].pts=I,s.logger.log("Video: First PTS/DTS adjusted: "+D(I,!0)+"/"+D(h,!0)+", delta: "+D(L,!0)+" ms")}}P&&P<75&&(h=Math.max(0,h));for(var M=0,U=0,N=0;N<g;N++){for(var z=f[N],H=z.units,j=H.length,G=0,Y=0;Y<j;Y++)G+=H[Y].data.length;U+=G,M+=j,z.length=G,z.dts=Math.max(z.dts,h),z.pts=Math.max(z.pts,z.dts,0),y=Math.min(z.pts,y),b=Math.max(z.pts,b)}c=f[g-1].dts;var W=U+4*M+8;try{l=new Uint8Array(W)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:n.ErrorTypes.MUX_ERROR,details:n.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating video mdat "+W})}var K=new DataView(l.buffer);K.setUint32(0,W),l.set(C.types.mdat,4);for(var V=0;V<g;V++){for(var q,X=f[V],Z=X.units,J=0,Q=0,$=Z.length;Q<$;Q++){var ee=Z[Q],te=ee.data,re=ee.data.byteLength;K.setUint32(v,re),v+=4,l.set(te,v),v+=re,J+=4+re}if(V<g-1)o=f[V+1].dts-X.dts;else{var ie=this.config,ne=X.dts-f[V>0?V-1:V].dts;if(ie.stretchShortVideoTrack){var ae=ie.maxBufferHole,oe=Math.floor(ae*d),se=(a?y+a*d:this.nextAudioPts)-X.pts;se>oe?((o=se-ne)<0&&(o=ne),s.logger.log("It is approximately "+D(se,!1)+" ms to the next segment; using duration "+D(o,!1)+" ms for the last video frame.")):o=ne}else o=ne}q=Math.round(X.pts-X.dts),p.push({size:J,duration:o,cts:q,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:X.key?2:1,isNonSync:X.key?0:1}})}this.nextAvcDts=c+o;var le=e.dropped;if(e.nbNalu=0,e.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ue=p[0].flags;ue.dependsOn=2,ue.isNonSync=0}e.samples=p,u=C.moof(e.sequenceNumber++,h,e),e.samples=[];var he={data1:u,data2:l,startPTS:y/d,endPTS:(b+o)/d,startDTS:h/d,endDTS:this.nextAvcDts/d,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:le};return this.observer.trigger(i.default.FRAG_PARSING_DATA,he),he}},t.remuxAudio=function(e,t,r,a){var o,l,u,h,c,d,f=e.inputTimeScale,p=e.timescale,g=f/p,m=(e.isAAC?1024:1152)*g,v=this._initPTS,y=!e.isAAC&&this.typeSupported.mpeg,b=y?0:8,_=e.samples,w=[],k=this.nextAudioPts;if(r|=_.length&&k&&(a&&Math.abs(t-k/f)<.1||Math.abs(_[0].pts-k-v)<20*m),_.forEach((function(e){e.pts=e.dts=B(e.pts-v,t*f)})),0!==(_=_.filter((function(e){return e.pts>=0}))).length){if(r||(k=a?Math.max(0,t*f):_[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,T=0,E=k;T<_.length;){var x=_[T],R=x.pts,L=R-E;if(L<=-S*m)r||T>0?(s.logger.warn("Dropping 1 audio frame @ "+D(E,!0)/1e3+"s due to "+D(L,!0)+" ms overlap."),_.splice(T,1)):(s.logger.warn("Audio frame @ "+D(R,!0)/1e3+"s overlaps nextAudioPts by "+D(L,!0)+" ms."),E=R+m,T++);else if(L>=S*m&&L<I&&E){var O=Math.round(L/m);s.logger.warn("Injecting "+O+" audio frames @ "+D(E,!0)/1e3+"s due to "+D(L,!0)+" ms gap.");for(var F=0;F<O;F++){var P=Math.max(E,0);(l=A.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=x.unit.subarray()),_.splice(T,0,{unit:l,pts:P,dts:P}),E+=m,T++}x.pts=x.dts=E,E+=m,T++}else Math.abs(L),x.pts=x.dts=E,E+=m,T++}for(var M=_.length,U=0;M--;)U+=_[M].unit.byteLength;for(var N=0,z=_.length;N<z;N++){var H=_[N],j=H.unit,G=H.pts;if(void 0!==d&&o)o.duration=Math.round((G-d)/g);else{var Y=G-k,W=0;if(r&&e.isAAC&&Y){if(Y>0&&Y<I)W=Math.round((G-k)/m),s.logger.log(D(Y,!0)+" ms hole between AAC samples detected,filling it"),W>0&&((l=A.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=j.subarray()),U+=W*l.length);else if(Y<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+D(k,!0)+" ms / "+D(G,!0)+" ms / "+D(-Y,!0)+" ms"),U-=j.byteLength;continue}G=k}if(c=G,!(U>0))return;U+=b;try{u=new Uint8Array(U)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:n.ErrorTypes.MUX_ERROR,details:n.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(u.buffer).setUint32(0,U),u.set(C.types.mdat,4));for(var K=0;K<W;K++)(l=A.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=j.subarray()),u.set(l,b),b+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o)}u.set(j,b);var V=j.byteLength;b+=V,o={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o),d=G}var q=0;if((M=w.length)>=2&&(q=w[M-2].duration,o.duration=q),M){this.nextAudioPts=k=d+g*q,e.samples=w,h=y?new Uint8Array:C.moof(e.sequenceNumber++,c/g,e),e.samples=[];var X=c/f,Z=k/f,J={data1:h,data2:u,startPTS:X,endPTS:Z,startDTS:X,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:M};return this.observer.trigger(i.default.FRAG_PARSING_DATA,J),J}return null}},t.remuxEmptyAudio=function(e,t,r,i){var n=e.inputTimeScale,a=n/(e.samplerate?e.samplerate:n),o=this.nextAudioPts,l=(void 0!==o?o:i.startDTS*n)+this._initDTS,u=i.endDTS*n+this._initDTS,h=1024*a,c=Math.ceil((u-l)/h),d=A.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),d){for(var f=[],p=0;p<c;p++){var g=l+p*h;f.push({unit:d,pts:g,dts:g})}e.samples=f,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var n=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<r;s++){var l=e.samples[s];l.pts=B(l.pts-a,t*n)/n,l.dts=B(l.dts-o,t*n)/n}this.observer.trigger(i.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,n=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=B(s.pts-a,t*n)/n}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(i.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}(),N=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,n,a,o,s,l){var u=this.observer,h="";e&&(h+="audio"),t&&(h+="video"),u.trigger(i.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:h,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(i.default.FRAG_PARSED)},e}(),z=Object(l.getSelfScope)();try{M=z.performance.now.bind(z.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),M=z.Date.now}var H=function(){function e(e,t,r,i){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,n,o,s,l,u,h,c,d,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var m=M();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=M();p.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,o,s,l,u,h,c,d,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,o,s,l,u,h,c,d,f)},t.pushDecrypted=function(e,t,r,a,o,s,l,u,h,c,d,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var m,v=this.observer,_=this.typeSupported,w=this.config,k=[{demux:E,remux:U},{demux:b.default,remux:N},{demux:y,remux:U},{demux:x,remux:U}],S=0,T=k.length;S<T&&!(m=k[S]).demux.probe(e);S++);if(!m)return void v.trigger(i.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof m.remux||(g=new m.remux(v,w,_,this.vendor)),p&&p instanceof m.demux||(p=new m.demux(v,g,w,_),this.probe=m.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(r,a,o,c),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,h,d)},e}();t.default=H},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){"use strict";r.r(t);var i=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),n=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(n){var o=n.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(n.default.FRAG_DECRYPTED,r),t.on(n.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(n.default.FRAG_PARSED,r),t.on(n.default.ERROR,r),t.on(n.default.FRAG_PARSING_METADATA,r),t.on(n.default.FRAG_PARSING_USERDATA,r),t.on(n.default.INIT_PTS_FOUND,r),t.on(n.default.FRAG_PARSING_DATA,(function(t,r){var i=[],n={event:t,data:r};r.data1&&(n.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(n.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),e.postMessage(n,i)}))}},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,r){"use strict";r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var i,n=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var i=r,n=0;e.isHeader(t,r);)n+=10,n+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(n+=10),r+=n;if(n>0)return t.subarray(i,i+n)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),i=0;i<r.length;i++){var n=r[i];if(e.isTimeStampFrame(n))return e._readTimeStamp(n)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:r,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var r=0,i=[];e.isHeader(t,r);){for(var n=e._readSize(t,r+6),a=(r+=10)+n;r+8<a;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&i.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):e._decodeTextFrame(t)},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,i=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=i.length+1;var n=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:n}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,i=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=i.length+1;var n=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:n}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var i=r.decode(e);if(t){var n=i.indexOf("\0");return-1!==n?i.substring(0,n):i}return i.replace(/\0/g,"")}for(var a,s,l,u=e.length,h="",c=0;c<u;){if(0===(a=e[c++])&&t)return h;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h+=String.fromCharCode(a);break;case 12:case 13:s=e[c++],h+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[c++],l=e[c++],h+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0)}}return h},e}();function o(){var e=Object(n.getSelfScope)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder("utf-8")),i}var s=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var i=r(/*! ../utils/logger */"./src/utils/logger.js"),n=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,i,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?t:null})),this.observer.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var i,n,a,o,s,l,u=[];if(t.data?(s=t.start,a=t.end,t=t.data):(s=0,a=t.byteLength),!r.length)return null;for(i=s;i<a;)l=(n=e.readUint32(t,i))>1?i+n:a,e.bin2str(t.subarray(i+4,i+8))===r[0]&&(1===r.length?u.push({data:t,start:i+8,end:l}):(o=e.findBox({data:t,start:i+8,end:l},r.slice(1))).length&&(u=u.concat(o))),i=l;return u},e.parseSegmentIndex=function(t){var r,i=e.findBox(t,["moov"])[0],n=i?i.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[];var s=(o=o[0]).data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var u=o.end+0,h=e.readUint16(o,a);a+=2;for(var c=0;c<h;c++){var d=a,f=e.readUint32(o,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(o,d);d+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,a=d+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:h,references:r,moovEndOffset:n}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var a=n.data[n.start],o=0===a?12:20,s=e.readUint32(n,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=0===(a=l.data[l.start])?12:20;var u=e.readUint32(l,o),h=e.findBox(t,["mdia","hdlr"])[0];if(h){var c={soun:"audio",vide:"video"}[e.bin2str(h.data.subarray(h.start+8,h.start+12))];if(c){var d=e.findBox(t,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=e.bin2str(d.data.subarray(d.start+12,d.start+16));i.logger.log("MP4Demuxer:"+c+":"+f+" found")}r[s]={timescale:u,type:c},r[c]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var i,n,a;return i=e.findBox(r,["moof","traf"]),n=[].concat.apply([],i.map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var n,a;return n=e.readUint32(i,4),a=t[n].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,i;return r=t.data[t.start],i=e.readUint32(t,4),1===r&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/a}))}))),a=Math.min.apply(null,n),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,i){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var o=e.readUint32(n,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],n=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,n-i*s);else{n*=Math.pow(2,32),n+=e.readUint32(t,8),n-=i*s,n=Math.max(n,0);var o=Math.floor(n/(a+1)),l=Math.floor(n%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,i,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){"use strict";var i,n;r.r(t),r.d(t,"ErrorTypes",(function(){return i})),r.d(t,"ErrorDetails",(function(){return n})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ar}));var i={};r.r(i),r.d(i,"newCue",(function(){return ft}));var n,a,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number.js"),u=r("./src/events.js"),h=r("./src/utils/logger.js"),c={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},d=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(c[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){h.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(n||(n={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var f=r("./src/demux/mp4demuxer.js");function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g,m=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r,i;return t=e,(r=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(t.prototype,r),i&&p(t,i),e}();function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(g||(g={}));var y=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[g.AUDIO]=!1,e[g.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,i,n=e.prototype;return n.setByteRange=function(e,t){var r=e.split("@",2),i=[];1===r.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},n.addElementaryStream=function(e){this._elementaryStreams[e]=!0},n.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},n.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null==e?void 0:e.method)&&e.uri&&!e.iv&&((r=new m(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(r=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&h.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(t.prototype,r),i&&v(t,i),e}();function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r,i;return t=e,(r=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(t.prototype,r),i&&b(t,i),e}(),w=/^(\d+)x(\d+)$/,k=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,S=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=w.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(k.lastIndex=0;null!==(t=k.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},e}(),T={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function E(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var x=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,A=/#EXT-X-MEDIA:(.*)/g,R=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,L=/\.(mp4|m4s|m4v|m4a)$/i,D=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var i,n=[],a={},o=!1;function s(e,t){["video","audio"].forEach((function(r){var i=e.filter((function(e){return function(e,t){var r=T[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)}));if(i.length){var n=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=n.length>0?n[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(x.lastIndex=0;null!=(i=x.exec(t));)if(i[1]){var l={},u=l.attrs=new S(i[1]);l.url=e.resolve(i[2],r);var h=u.decimalResolution("RESOLUTION");h&&(l.width=h.width,l.height=h.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),n.push(l)}else if(i[3]){var c=new S(i[3]);c["DATA-ID"]&&(o=!0,a[c["DATA-ID"]]=c)}return{levels:n,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,r,i,n){var a;void 0===n&&(n=[]);var o=[],s=0;for(A.lastIndex=0;null!==(a=A.exec(t));){var l=new S(a[1]);if(l.TYPE===i){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:i,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),n.length){var h=e.findGroup(n,u.groupId);u.audioCodec=h?h.codec:n[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,i,n){var a,o,s,u=0,c=0,d=new _(t),f=0,p=null,g=new y,v=null;for(R.lastIndex=0;null!==(a=R.exec(e));){var b=a[1];if(b){g.duration=parseFloat(b);var w=(" "+a[2]).slice(1);g.title=w||null,g.tagList.push(w?["INF",b,w]:["INF",b])}else if(a[3]){if(Object(l.isFiniteNumber)(g.duration)){var k=u++;g.type=i,g.start=c,s&&(g.levelkey=s),g.sn=k,g.level=r,g.cc=f,g.urlId=n,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),O(g,p),d.fragments.push(g),p=g,c+=g.duration,g=new y}}else if(a[4]){var T=(" "+a[4]).slice(1);p?g.setByteRange(T,p):g.setByteRange(T)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===v&&(v=d.fragments.length);else{if(!(a=a[0].match(C))){h.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var E=(" "+a[o+1]).slice(1),x=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(x?[E,x]:[E]);break;case"PLAYLIST-TYPE":d.type=E.toUpperCase();break;case"MEDIA-SEQUENCE":u=d.startSN=parseInt(E);break;case"TARGETDURATION":d.targetduration=parseFloat(E);break;case"VERSION":d.version=parseInt(E);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(E);break;case"KEY":var A=new S(E),D=A.enumeratedString("METHOD"),I=A.URI,F=A.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(A.KEYFORMAT||"identity")){h.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}D&&(s=new m(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(s.method=D,s.key=null,s.iv=F));break;case"START":var P=new S(E).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(P)&&(d.startTimeOffset=P);break;case"MAP":var B=new S(E);g.relurl=B.URI,B.BYTERANGE&&g.setByteRange(B.BYTERANGE),g.baseurl=t,g.level=r,g.type=i,g.sn="initSegment",d.initSegment=g,(g=new y).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:h.logger.warn("line parsed but not handled: "+a)}}}return(g=p)&&!g.relurl&&(d.fragments.pop(),c-=g.duration),d.totalduration=c,d.averagetargetduration=c/d.fragments.length,d.endSN=u-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every((function(e){return L.test(e.relurl)}))&&(h.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new y).relurl=d.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=i,g.sn="initSegment",d.initSegment=g,d.needSidxRanges=!0),v&&function(e,t){for(var r=e[t],i=t-1;i>=0;i--){var n=e[i];n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(d.fragments,v),d},e}();function O(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var I=window.performance,F=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.canHaveQualityLevels=function(e){return e!==n.AUDIO_TRACK&&e!==n.SUBTITLE_TRACK},i.mapContextToLevelType=function(e){switch(e.type){case n.AUDIO_TRACK:return a.AUDIO;case n.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},i.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var o=i.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,n=new(r||i)(t);return e.loader=n,this.loaders[e.type]=n,n},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:n.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:n.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:n.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:n.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;h.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,i,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return h.logger.trace("playlist request ongoing"),!1;h.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case n.MANIFEST:r=t.manifestLoadingMaxRetry,i=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case n.LEVEL:r=0,o=0,a=0,i=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,i=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var u={timeout:i,maxRetry:r,retryDelay:a,maxRetryDelay:o},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return h.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,c),!0},o.loadsuccess=function(e,t,r,i){if(void 0===i&&(i=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,i);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=e.data;t.tload=I.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i)},o.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},o.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},o._handleMasterPlaylist=function(e,t,r,n){var a=this.hls,o=e.data,s=i.getResponseUrl(e,r),l=D.parseMasterPlaylist(o,s),c=l.levels,d=l.sessionData;if(c.length){var f=c.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=D.parseMasterPlaylistMedia(o,s,"AUDIO",f),g=D.parseMasterPlaylistMedia(o,s,"SUBTITLES"),m=D.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var v=!1;p.forEach((function(e){e.url||(v=!0)})),!1===v&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(h.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u.default.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:g,captions:m,url:s,stats:t,networkDetails:n,sessionData:d})}else this._handleManifestParsingError(e,r,"no level found in manifest",n)},o._handleTrackOrLevelPlaylist=function(e,t,r,a){var o=this.hls,h=r.id,c=r.level,d=r.type,f=i.getResponseUrl(e,r),p=Object(l.isFiniteNumber)(h)?h:0,g=Object(l.isFiniteNumber)(c)?c:p,m=i.mapContextToLevelType(r),v=D.parseLevelPlaylist(e.data,f,g,m,p);if(v.tload=t.tload,v.fragments.length){if(d===n.MANIFEST){var y={url:f,details:v};o.trigger(u.default.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:t,networkDetails:a,sessionData:null})}if(t.tparsed=I.now(),v.needSidxRanges){var b=v.initSegment.url;this.load({url:b,isSidxRequest:!0,type:d,level:c,levelDetails:v,id:h,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=v,this._handlePlaylistLoaded(e,t,r,a)}else o.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=f.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var i=r.references,n=t.levelDetails;i.forEach((function(e,t){var r=e.info;if(n){var i=n.fragments[t];0===i.byteRange.length&&i.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),n&&n.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,r,i){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:i})},o._handleNetworkError=function(e,t,r,i){var a,o;void 0===r&&(r=!1),void 0===i&&(i=null),h.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case n.MANIFEST:a=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case n.LEVEL:a=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case n.AUDIO_TRACK:a=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};i&&(c.response=i),this.hls.trigger(u.default.ERROR,c)},o._handlePlaylistLoaded=function(e,t,r,a){var o=r.type,s=r.level,l=r.id,h=r.levelDetails;if(h&&h.targetduration)if(i.canHaveQualityLevels(r.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:h,level:s||0,id:l||0,stats:t,networkDetails:a});else switch(o){case n.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:h,id:l,stats:t,networkDetails:a});break;case n.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:h,id:l,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,r,"invalid target duration",a)},i}(d),P=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){var t=this.loaders;for(var r in t){var i=t[r];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onFragLoading=function(e){var t=e.frag,r=t.type,i=this.loaders,n=this.hls.config,a=n.fLoader,o=n.loader;t.loaded=0;var s,u,c,d=i[r];d&&(h.logger.warn("abort previous fragment loader for type: "+r),d.abort()),d=i[r]=t.loader=n.fLoader?new a(n):new o(n),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l.isFiniteNumber)(f)&&Object(l.isFiniteNumber)(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(s,u,c)},n.loadsuccess=function(e,t,r,i){void 0===i&&(i=null);var n=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:n,frag:a,stats:t,networkDetails:i})},n.loaderror=function(e,t,r){void 0===r&&(r=null);var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},n.loadtimeout=function(e,t,r){void 0===r&&(r=null);var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},n.loadprogress=function(e,t,r,i){void 0===i&&(i=null);var n=t.frag;n.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:n,stats:e,networkDetails:i})},i}(d),B=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onKeyLoading=function(e){var t=e.frag,r=t.type,i=this.loaders[r];if(t.decryptdata){var n=t.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(i&&(h.logger.warn("abort previous key loader for type:"+r),i.abort()),!n)return void h.logger.warn("key uri is falsy");t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=n,this.decryptkey=null;var o={url:n,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else h.logger.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(e,t,r){var i=r.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(u.default.KEY_LOADED,{frag:i})):h.logger.error("after key load, decryptdata unset")},n.loaderror=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},n.loadtimeout=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},i}(d),M="NOT_LOADED",U="APPENDING",N="PARTIAL",z="OK",H=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,d.prototype.destroy.call(this),e.prototype.destroy.call(this)},n.getBufferedFrag=function(e,t){var r=this.fragments,i=Object.keys(r).filter((function(i){var n=r[i];if(n.body.type!==t)return!1;if(!n.buffered)return!1;var a=n.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===i.length)return null;var n=i.pop();return r[n].body},n.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(i){var n=r.fragments[i];if(n&&n.buffered){var a=n.range[e];if(a)for(var o=a.time,s=0;s<o.length;s++){var l=o[s];if(!r.isTimeBuffered(l.startPTS,l.endPTS,t)){r.removeFragment(n.body);break}}}}))},n.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),i=this.fragments[r];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var n=t.timeRanges[r];i.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,n)}})))},n.getBufferedTimes=function(e,t,r){for(var i,n,a=[],o=!1,s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,e>=i&&t<=n){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<n&&t>i)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=i)break}return{time:a,partial:o}},n.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},n.getPartialFragment=function(e){var t,r,i,n=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=n.fragments[s];n.isPartial(l)&&(r=l.body.startPTS-n.bufferPadding,i=l.body.endPTS+n.bufferPadding,e>=r&&e<=i&&(t=Math.min(e-r,i-e),o<=t&&(a=l.body,o=t)))})),a},n.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],i=M;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?N:z:U),i},n.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},n.isTimeBuffered=function(e,t,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,e>=i&&t<=n)return!0;if(t<=i)return!1}return!1},n.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},n.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},n.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},n.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},n.removeAllFragments=function(){this.fragments=Object.create(null)},i}(d),j={search:function(e,t){for(var r=0,i=e.length-1,n=null,a=null;r<=i;){var o=t(a=e[n=(r+i)/2|0]);if(o>0)r=n+1;else{if(!(o<0))return a;i=n-1}}return null}},G=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var i,n=e.buffered,a=[];for(i=0;i<n.length;i++)a.push({start:n.start(i),end:n.end(i)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var i=[];if(r)for(var n=0;n<e.length;n++){var a=i.length;if(a){var o=i[a-1].end;e[n].start-o<r?e[n].end>o&&(i[a-1].end=e[n].end):i.push(e[n])}else i.push(e[n])}else i=e;for(var s,l=0,u=t,h=t,c=0;c<i.length;c++){var d=i[c].start,f=i[c].end;if(t+r>=d&&t<f)u=d,l=(h=f)-t;else if(t+r<d){s=d;break}}return{len:l,start:u,end:h,nextStart:s}},e}(),Y=r("./node_modules/eventemitter3/index.js"),W=r("./node_modules/webworkify-webpack/index.js"),K=r("./src/demux/demuxer-inline.js");function V(){return window.MediaSource||window.WebKitMediaSource}var q=r("./src/utils/get-self-scope.js"),X=function(e){var t,r;function i(){return e.apply(this,arguments)||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.emit.apply(this,[e,e].concat(r))},i}(Y.EventEmitter),Z=Object(q.getSelfScope)(),J=V()||{isTypeSupported:function(){return!1}},Q=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var i=this.observer=new X,n=e.config,a=function(t,i){(i=i||{}).frag=r.frag,i.id=r.id,e.trigger(t,i)};i.on(u.default.FRAG_DECRYPTED,a),i.on(u.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(u.default.FRAG_PARSING_DATA,a),i.on(u.default.FRAG_PARSED,a),i.on(u.default.ERROR,a),i.on(u.default.FRAG_PARSING_METADATA,a),i.on(u.default.FRAG_PARSING_USERDATA,a),i.on(u.default.INIT_PTS_FOUND,a);var o={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){var c;h.logger.log("demuxing in webworker");try{c=this.w=W(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(t){e.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},c.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(n)})}catch(e){h.logger.warn("Error in worker:",e),h.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),c&&Z.URL.revokeObjectURL(c.objectURL),this.demuxer=new K.default(i,o,n,l),this.w=void 0}}else this.demuxer=new K.default(i,o,n,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,i,n,a,o,s){var u=this.w,c=Object(l.isFiniteNumber)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),g=!(f&&n.level===f.level),m=f&&n.sn===f.sn+1,v=!g&&m;if(p&&h.logger.log(this.id+":discontinuity detected"),g&&h.logger.log(this.id+":switch detected"),this.frag=n,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:c,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,d,t,r,i,c,p,g,v,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":Z.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function $(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function ee(e,t,r){var i=e[t],n=e[r],a=n.startPTS;if(Object(l.isFiniteNumber)(a))r>t?(i.duration=a-i.start,i.duration<0&&h.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(n.duration=i.start-a,n.duration<0&&h.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var o=i.cc===n.cc;n.start=i.start+(o&&i.minEndPTS?i.minEndPTS-i.start:i.duration)}else n.start=Math.max(i.start-n.duration,0)}function te(e,t,r,i,n,a){var o=r,s=i;if(Object(l.isFiniteNumber)(t.startPTS)){var u=Math.abs(t.startPTS-r);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),s=Math.min(i,t.endPTS),i=Math.max(i,t.endPTS),n=Math.min(n,t.startDTS),a=Math.max(a,t.endDTS)}var h=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=i,t.minEndPTS=s,t.startDTS=n,t.endDTS=a,t.duration=i-r;var c,d,f,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(c=p-e.startSN,(d=e.fragments)[c]=t,f=c;f>0;f--)ee(d,f,f-1);for(f=c;f<d.length-1;f++)ee(d,f,f+1);return e.PTSKnown=!0,h}function re(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,i=0;if(ie(e,t,(function(e,n){i=e.cc-n.cc,Object(l.isFiniteNumber)(e.startPTS)&&(n.start=n.startPTS=e.startPTS,n.endPTS=e.endPTS,n.duration=e.duration,n.backtracked=e.backtracked,n.dropped=e.dropped,r=n),t.PTSKnown=!0})),t.PTSKnown){if(i){h.logger.log("discontinuity sliding from playlist, take drift into account");for(var n=t.fragments,a=0;a<n.length;a++)n[a].cc+=i}r?te(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,i=e.fragments,n=t.fragments;if(!(r<0||r>i.length))for(var a=0;a<n.length;a++)n[a].start+=i[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function ie(e,t,r){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,n=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=i;o<=n;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function ne(e,t,r){var i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),n=i/2;return e&&t.endSN===e.endSN&&(i=n),r&&(i=Math.max(n,i-(window.performance.now()-r))),Math.round(i)}var ae={toString:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function oe(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function se(e,t,r){!function(e,t,r){if(function(e,t,r){var i=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(i=!0),i}(e,r,t)){var i=function(e,t){var r=e.fragments,i=t.fragments;if(i.length&&r.length){var n=function(e,t){for(var r=null,i=0;i<e.length;i+=1){var n=e[i];if(n&&n.cc===t){r=n;break}}return r}(r,i[0].cc);if(n&&(!n||n.startPTS))return n;h.logger.log("No frag in previous level to align on")}else h.logger.log("No fragments to align")}(r.details,t);i&&(h.logger.log("Adjusting PTS using last level due to CC increase within current level"),oe(i.start,t))}}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(i)&&(h.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),oe(i,e))}}(r,t.details)}function le(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<e.length;++i){var n=e[i];if(ce(t,r,n))return n}return null}function ue(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=null;if(e?n=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(n=t[0]),n&&0===he(r,i,n))return n;var a=j.search(t,he.bind(null,r,i));return a||n}function he(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}function ce(e,t,r){var i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>e}var de=function(){function e(e,t,r,i){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,i=this.stalled,n=r.currentTime,a=r.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,n===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=G.bufferInfo(r,n,0),u=l.len>0,c=l.nextStart||0;if(u||c){if(a){var d=l.len>2,f=!c||c-n>2&&!this.fragmentTracker.getPartialFragment(n);if(d||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(c,l.start||0)-n;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==i){var m=g-i;!a&&m>=250&&this._reportStall(l.len);var v=G.bufferInfo(r,n,t.maxBufferHole);this._tryFixBufferStall(v,m)}else this.stalled=g}}}else if(this.moved=!0,null!==i){if(this.stallReported){var y=self.performance.now()-i;h.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,n=this.media.currentTime,a=i.getPartialFragment(n);a&&this._trySkipBufferHole(a)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(h.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,h.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,i=this.media,n=i.currentTime,a=0,o=0;o<i.buffered.length;o++){var l=i.buffered.start(o);if(n+t.maxBufferHole>=a&&n<l){var c=Math.max(l+.05,i.currentTime+.1);return h.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+c),this.moved=!0,this.stalled=null,i.currentTime=c,e&&r.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+c,frag:e}),c}a=i.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<e.nudgeMaxRetry){var a=i+n*e.nudgeOffset;h.logger.warn("Nudging 'currentTime' from "+i+" to "+a),r.currentTime=a,t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pe=function(e){var t,r;function i(t){for(var r,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return(r=e.call.apply(e,[this,t].concat(n))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(fe(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},i}(d),ge="STOPPED",me="STARTING",ve="IDLE",ye="PAUSED",be="KEY_LOADING",_e="FRAG_LOADING",we="FRAG_LOADING_WAITING_RETRY",ke="WAITING_TRACK",Se="PARSING",Te="PARSED",Ee="BUFFER_FLUSHING",xe="ENDED",Ae="ERROR",Re="WAITING_INIT_PTS",Ce="WAITING_LEVEL",Le=function(e){var t,r;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ge},n._streamEnded=function(e,t){var r=this.fragCurrent,i=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var n=i.getState(r);return n===N||n===z}return!1},n.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,i=this.state,n=t?t.currentTime:null,a=G.bufferInfo(r||t,n,this.config.maxBufferHole);if(h.logger.log("media seeking to "+(Object(l.isFiniteNumber)(n)?n.toFixed(3):n)),i===_e){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,c=o.start+o.duration+s;n<u||n>c?(o.loader&&(h.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ve):h.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===xe&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ve);t&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=ge,this.fragmentTracker=null},n.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},i}(pe);function De(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oe,Ie=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=r,i.config=t.config,i.audioCodecSwap=!1,i._state=ge,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i.audioOnly=!1,i.bitrateTest=!1,i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,o,c,d=i.prototype;return d.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(h.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ve,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ge},d.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Ee:this.fragLoadError=0;break;case ve:this._doTickIdle();break;case Ce:var e=this.levels[this.level];e&&e.details&&(this.state=ve);break;case we:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ve)}this._checkBuffer(),this._checkFragmentChanged()},d._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var i;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var n=e.nextLoadLevel,a=this.levels[n];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=i<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,c=G.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,l),d=c.len;if(!(d>=o)){h.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=n;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==n)this.state=Ce;else{if(this._streamEnded(c,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=xe)}this._fetchPayloadOrEos(i,c,f)}}}}},d._fetchPayloadOrEos=function(e,t,r){var i=this.fragPrevious,n=(this.level,r.fragments),a=n.length;if(0!==a){var o,s=n[0].start,l=n[a-1].start+n[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(a<c)return void h.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+c);if(null===(o=this._ensureFragmentAtLivePoint(r,u,s,l,i,n)))return}else u<s&&(o=n[0]);o||(o=this._findFragment(s,i,a,n,u,l,r)),o&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,u))}},d._ensureFragmentAtLivePoint=function(e,t,r,i,n,a){var o,s=this.hls.config,u=this.media,c=1/0;if(void 0!==s.liveMaxLatencyDuration?c=s.liveMaxLatencyDuration:Object(l.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(c=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-s.maxFragLookUpTolerance,i-c)){var d=this.liveSyncPosition=this.computeLivePosition(r,e);t=d,u&&!u.paused&&u.readyState&&u.duration>d&&d>u.currentTime&&(h.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),u.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>i&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&n)if(e.hasProgramDateTime)h.logger.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),o=le(a,n.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=n.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];n.cc===p.cc&&(o=p,h.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=j.search(a,(function(e){return n.cc-e.cc})))&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},d._findFragment=function(e,t,r,i,n,a,o){var s,l=this.hls.config;if(s=n<a?ue(t,i,n,n>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[r-1]){var u=s.sn-o.startSN,c=t&&s.level===t.level,d=i[u-1],f=i[u+1];if(t&&s.sn===t.sn)if(c&&!s.backtracked)if(s.sn<o.endSN){var p=t.deltaPTS;p&&p>l.maxBufferHole&&t.dropped&&u?(s=d,h.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=f,this.fragmentTracker.getState(s)!==z&&h.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(f&&f.backtracked?(h.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,d?(s=d).backtracked=!0:u&&(s=null)))}return s},d._loadKey=function(e,t){h.logger.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},d._loadFragment=function(e,t,r,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||n===M||n===N?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,h.logger.log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(r.toFixed(3))+", bufferEnd: "+parseFloat(i.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=_e):n===U&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},d.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},d.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},d._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),G.isBuffered(r,t)?e=this.getBufferedFrag(t):G.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:i});var n=i.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:n}),this.fragPlaying=i}}},d.immediateLevelSwitch=function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused)||t.pause():e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&G.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},d.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,n=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},d.flushMainBuffer=function(e,t){this.state=Ee;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,r)},d.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new de(r,t,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},d.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&h.logger.log("media seeked to "+t.toFixed(3)),this.tick()},d.onManifestLoading=function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},d.onManifestParsed=function(e){var t,r=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},d.onLevelLoaded=function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],n=this.levels[r],a=t.totalduration,o=0;if(h.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||n.details&&n.details.live){var s=n.details;s&&t.fragments.length>0?(re(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l.isFiniteNumber)(o)?h.logger.log("live playlist sliding:"+o.toFixed(3)):(h.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,i,t))):(h.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(n.details=t,this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;Object(l.isFiniteNumber)(c)?(c<0&&(h.logger.log("negative start time offset "+c+", count from end of last fragment"),c=o+a+c),h.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):t.live?(this.startPosition=this.computeLivePosition(o,t),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ce&&(this.state=ve),this.tick()},d.onKeyLoaded=function(){this.state===be&&(this.state=ve,this.tick())},d.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,i=this.levels,n=this.media,a=e.frag;if(this.state===_e&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=i[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,h.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=ve,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=ve,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{h.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=Se,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var c=!(n&&n.seeking)&&(l.PTSKnown||!l.live),d=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(e.payload,d,f,s.videoCodec,t,l.totalduration,c)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Se){var i,n,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,n=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==n.container&&(o="mp4a.40.2",h.logger.log("Android: force audio codec to "+o)),n.levelCodec=o,n.id=e.id}for(i in(n=a.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,a),a){n=a[i],h.logger.log("main track:"+i+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},d.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"main"===e.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===Se){var n=this.levels[this.level],a=r;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&a.addElementaryStream(g.AUDIO),!0===e.hasVideo&&a.addElementaryStream(g.VIDEO),h.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)h.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=n.details;if(!o||a.sn!==o.startSN)return h.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ve,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();h.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=te(n.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(u.default.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===Se&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},d.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Se&&(this.stats.tparsed=window.performance.now(),this.state=Te,this._checkAppendedParsed())},d.onAudioTrackSwitching=function(e){var t=this.altAudio,r=!!e.url,i=e.id;if(!r){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ve}var a=this.hls;t&&a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i})}},d.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},d.onBufferCreated=function(e){var t,r,i=e.tracks,n=!1;for(var a in i){var o=i[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=i[a].buffer)):n=!0}n&&t?(h.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},d.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==Se&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+ae.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=ve}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},d.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&G.isBuffered(this.media,this.media.currentTime)&&G.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=we}else h.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ae;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ae&&(e.fatal?(this.state=Ae,h.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Ce||(this.state=ve));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Se&&this.state!==Te||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ve):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},d._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},d._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},d.onFragLoadEmergencyAborted=function(){this.state=ve,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},d.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?g.AUDIO:g.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=ve,this.fragPrevious=null},d.onLevelsUpdated=function(e){this.levels=e.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return void h.logger.log("could not seek to "+r+", already seeking at "+t);var i=(e.buffered.length?e.buffered.start(0):0)-r;i>0&&i<this.config.maxBufferHole&&(h.logger.log("adjusting start position by "+i+" to match buffer start"),r+=i,this.startPosition=r),h.logger.log("seek to target start position "+r+" from current time "+t+". ready state "+e.readyState),e.currentTime=r}},d._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},n=i,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&De(n.prototype,o),c&&De(n,c),i}(Le);function Fe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Pe=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Oe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,l=i.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(e){var t,r=[],i=[],n={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Oe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=n[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,n[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&$(a||e,"audio",t.AUDIO),t.SUBTITLES&&$(a||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||E(t,"audio"))&&(!r||E(r,"video"))})),e.audioTracks&&(i=e.audioTracks.filter((function(e){return!e.audioCodec||E(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===t){this._firstLevel=c,h.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var d=l&&!o;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:r,audioTracks:i,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:!d&&i.some((function(e){return!!e.url}))})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){h.logger.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,r.trigger(u.default.LEVEL_SWITCHING,i)}var n=t[e],a=n.details;if(!a||a.live){var o=n.urlId;r.trigger(u.default.LEVEL_LOADING,{url:n.url[o],level:e,id:o})}}else r.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},l.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,i=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,i)}},l.recoverLevel=function(e,t,r,i){var n,a,o,s=this,l=this.hls.config,u=e.details,c=this._levels[t];if(c.loadError++,c.fragmentError=i,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return h.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,h.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&((n=c.url.length)>1&&c.loadError<n?(c.urlId=(c.urlId+1)%n,c.details=void 0,h.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,h.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):i&&(h.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(e){var t=this,r=e.level,i=e.details;if(r===this.currentLevelIndex){var n=this._levels[r];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),i.live){var a=ne(n.details,i,e.stats.trequest);h.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},l.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,n=0;n<r.audioGroupIds.length;n++)if(r.audioGroupIds[n]===t){i=n;break}i!==r.urlId&&(r.urlId=i,this.startLoad())}},l.loadLevel=function(){if(h.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,i=e.url[r];h.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u.default.LEVEL_LOADING,{url:i,level:t,id:r})}}},l.removeLevel=function(e,t){var r=this.levels.filter((function(r,i){return i!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),r.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:r})},n=i,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Fe(n.prototype,a),o&&Fe(n,o),i}(d),Be=r("./src/demux/id3.js");function Me(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Ue(e){if(null==e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Ne=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){d.prototype.destroy.call(this)},n.onMediaAttached=function(e){this.media=e.media,this.media},n.onMediaDetaching=function(){Ue(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Me(r,this.media),r}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,n=0;n<r.length;n++){var a=Be.default.getID3Frames(r[n].data);if(a){var o=Math.max(r[n].pts,0),s=n<r.length-1?r[n+1].pts:t.endPTS;s||(s=t.start+t.duration),s-o<=0&&(s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Be.default.isTimeStampFrame(u)){var h=new i(o,s,"");h.value=u,this.id3Track.addCue(h)}}}}},n.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,i=e.length-1;r<=i;){var n=Math.floor((i+r)/2);if(t<e[n].endTime)i=n-1;else{if(!(t>e[n].endTime))return e[n];r=n+1}}return e[r].endTime-t<t-e[i].endTime?e[r]:e[i]}(r.cues,t);if(i)for(;r.cues[0]!==i;)r.removeCue(r.cues[0])}},i}(d),ze=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),He=function(){function e(e,t,r,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ze(t),this.fast_=new ze(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function je(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ge=window.performance,Ye=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,c=i.prototype;return c.destroy=function(){this.clearTimer(),d.prototype.destroy.call(this)},c.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,i,n=this.hls,a=n.config,o=t.level;n.levels[o].details.live?(r=a.abrEwmaFastLive,i=a.abrEwmaSlowLive):(r=a.abrEwmaFastVoD,i=a.abrEwmaSlowVoD),this._bwEstimator=new He(n,i,r,a.abrEwmaDefaultEstimate)}},c._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var i=r.loader;if(!i||i.stats&&i.stats.aborted)return h.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=Ge.now()-n.trequest,o=Math.abs(t.playbackRate);if(a>500*r.duration/o){var s=e.levels,l=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/a),c=s[r.level];if(!c)return;var d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,f=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*d/8)),p=t.currentTime,g=(f-n.loaded)/l,m=(G.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m<2*r.duration/o&&g>m){var v,y=e.minAutoLevel;for(v=r.level-1;v>y;v--){var b=s[v].realBitrate?Math.max(s[v].realBitrate,s[v].bitrate):s[v].bitrate;if(r.duration*b/(6.4*l)<m)break}void 0<g&&(h.logger.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(a,n.loaded),i.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},c.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],i=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,n=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:i,duration:n},r.realBitrate=Math.round(8*i/n)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},c.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l.isFiniteNumber)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;h.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},c.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},c.clearTimer=function(){clearInterval(this.timer),this.timer=null},c._findBestLevel=function(e,t,r,i,n,a,o,s,l){for(var u=n;u>=i;u--){var c=l[u];if(c){var d=c.details,f=d?d.totalduration/d.fragments.length:t,p=!!d&&d.live,g=void 0;g=u<=e?o*r:s*r;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(h.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},n=i,(a=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,n=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(G.bufferInfo(a,l,i.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,c,n,t,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(f>=0)return f;h.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(0===d){var v=this.bitrateTestDelay;v&&(p=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-v,h.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1)}return f=this._findBestLevel(o,s,c,n,t,d+p,g,m,r),Math.max(f,0)}}])&&je(n.prototype,a),o&&je(n,o),i}(d),We=V(),Ke=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){h.logger.log("media source opened"),r.hls.trigger(u.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){h.logger.log("media source closed")},r._onMediaSourceEnded=function(){h.logger.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;h.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,i=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),n={},a=r.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");n[o]=s.buffered}r.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:i,timeRanges:n}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===i&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){h.logger.error("sourceBuffer error:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){d.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-e.start)>.1){var n=i.updating;try{i.abort()}catch(e){h.logger.warn("can not abort audio buffer: "+e)}n?this.audioTimestampOffset=e.start:(h.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},n.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,h.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&We){var r=this.mediaSource=new We;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},n.onMediaDetaching=function(){h.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){h.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):h.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in e)if(!t[i]){var n=e[i];if(!n)throw Error("source buffer exists for track "+i+", however track does not");var a=n.levelCodec||n.codec,o=n.container+";codecs="+a;h.logger.log("creating sourceBuffer("+o+")");try{var l=t[i]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:a,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(e){h.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,h.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var i=e[r];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}h.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){h.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),n=t-Math.max(e,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=r[o];if(s){var l=s.buffered;l.length>0&&n>l.start(0)&&this.removeBufferRange(o,s,0,n)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}else h.logger.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var i=this.sourceBuffer[r];if(i&&!0===i.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(h.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(h.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r){var n=r[i];n&&(t+=n.buffered.length)}}catch(e){h.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},n.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void h.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=r.shift();if(n)try{var a=i[n.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void r.unshift(n);a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){h.logger.error("error while trying to append buffer:"+i.message),r.unshift(n);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===i.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(h.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u.default.ERROR,o)}}}},n.flushBuffer=function(e,t,r){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),h.logger.log("flushBuffer,pos/start/end: "+n+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return h.logger.warn("abort flushing too many retries"),!0;var a=i[r];if(a){if(a.ended=!1,a.updating)return h.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,a,e,t))return this.flushBufferCounter++,!1}return h.logger.log("buffer flushed"),!0},n.removeBufferRange=function(e,t,r,i){try{for(var n=0;n<t.buffered.length;n++){var a=t.buffered.start(n),o=t.buffered.end(n),s=Math.max(a,r),l=Math.min(o,i);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),h.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(e){h.logger.warn("removeBufferRange failed",e)}return!1},i}(d);function Ve(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,s=i.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,n){return i.isLevelAllowed(n,t.restrictedLevels)&&n<=e}));return this.clientRect=null,i.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},i.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var i,n,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(i=s,!(n=e[o+1])||i.width!==n.width||i.height!==n.height)){a=o;break}}return a},n=i,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(a=[{key:"mediaWidth",get:function(){return this.getDimensions().width*i.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*i.contentScaleFactor}}])&&Ve(n.prototype,a),o&&Ve(n,o),i}(d),Xe=window.performance,Ze=function(e){var t,r;function i(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},n.checkFPS=function(e,t,r){var i=Xe.now();if(t){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/n,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:r}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var c=l.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},n.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},i}(d),Je=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(r){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,n=this.context,a=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;i.tload=Math.max(i.tfirst,window.performance.now()),l="arraybuffer"===n.responseType?(s=t.response).byteLength:(s=t.responseText).length,i.loaded=i.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,i,n,t)}else i.retry>=a.maxRetry||o>=400&&o<499?(h.logger.error(o+" while loading "+n.url),this.callbacks.onError({code:o,text:t.statusText},n,t)):(h.logger.warn(o+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){h.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,t)},e}();function Qe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $e=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,l=i.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)h.logger.warn("Invalid audio track id:",e.id);else{if(h.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},l.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},l.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(h.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},l._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)h.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)h.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];h.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,i=t.type,n=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:n,type:i,url:r}),this._loadTrackDetailsIfNeeded(t)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],i=null;if(r&&(i=r.name),this._selectDefaultTrack){var n=t.filter((function(e){return e.default}));n.length?t=n:h.logger.warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||i&&i!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(i=null,o()),a||(h.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},l._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;h.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},l._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,h.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,i=t.language,n=t.groupId;h.logger.warn("Loading failed on audio track id: "+e+", group-id: "+n+', name/language: "'+r+'" / "'+i+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){a=o;break}a!==e?(h.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):h.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"')},n=i,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&Qe(n.prototype,a),o&&Qe(n,o),i}(pe);function et(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt=window.performance,rt=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=r,i.config=t.config,i.audioCodecSwap=!1,i._state=ge,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i.waitingVideoCC=null,i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,c=i.prototype;return c.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[r]=i,this.videoTrackCC=r,h.logger.log("InitPTS for cc: "+r+" found from main: "+i),this.state===Re&&this.tick())},c.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(h.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ve):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=me),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ge},c.doTick=function(){var e,t,r,i=this.hls,n=i.config;switch(this.state){case Ae:case ye:case Ee:break;case me:this.state=ke,this.loadedmetadata=!1;break;case ve:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!n.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,c=e<n.maxBufferHole?Math.max(2,n.maxBufferHole):n.maxBufferHole,d=G.bufferInfo(o,e,c),f=G.bufferInfo(s,e,c),p=d.len,g=d.end,m=this.fragPrevious,v=Math.min(n.maxBufferLength,n.maxMaxBufferLength),y=Math.max(v,f.len),b=this.audioSwitch,_=this.trackId;if((p<y||b)&&_<a.length){if(void 0===(r=a[_].details)){this.state=ke;break}if(!b&&this._streamEnded(d,r))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=xe);var w,k=r.fragments,S=k.length,T=k[0].start,E=k[S-1].start+k[S-1].duration;if(b)if(r.live&&!r.PTSKnown)h.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,r.PTSKnown&&e<T){if(!(d.end>T||d.nextStart))return;h.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(r.initSegment&&!r.initSegment.data)w=r.initSegment;else if(g<=T){if(w=k[0],null!==this.videoTrackCC&&w.cc!==this.videoTrackCC&&(w=function(e,t){return j.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(k,this.videoTrackCC)),r.live&&w.loadIdx&&w.loadIdx===this.fragLoadIdx){var x=d.nextStart?d.nextStart:T;return h.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var A,R=n.maxFragLookUpTolerance,C=m?k[m.sn-k[0].sn+1]:void 0;g<E?(g>E-R&&(R=0),A=C&&!he(g,R,C)?C:j.search(k,(function(e){return he(g,R,e)}))):A=k[S-1],A&&(w=A,T=A.start,m&&w.level===m.level&&w.sn===m.sn&&(w.sn<r.endSN?(w=k[w.sn+1-r.startSN],this.fragmentTracker.getState(w)!==z&&h.logger.log("SN just loaded, load next one: "+w.sn)):w=null))}w&&(w.encrypted?(h.logger.log("Loading key for "+w.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+_),this.state=be,i.trigger(u.default.KEY_LOADING,{frag:w})):(this.fragCurrent=w,(b||this.fragmentTracker.getState(w)===M)&&(h.logger.log("Loading "+w.sn+", cc: "+w.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+_+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+g.toFixed(3)),"initSegment"!==w.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(w.sn)&&(this.nextLoadPosition=w.start+w.duration),i.trigger(u.default.FRAG_LOADING,{frag:w}),this.state=_e)))}break;case ke:(t=this.tracks[this.trackId])&&t.details&&(this.state=ve);break;case we:var L=tt.now(),D=this.retryDate,O=(o=this.media)&&o.seeking;(!D||L>=D||O)&&(h.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ve);break;case Re:var I=this.waitingFragment;if(I){var F=I.frag.cc;if(void 0!==this.initPTS[F])this.waitingFragment=null,this.state=_e,this.onFragLoaded(I);else if(this.videoTrackCC!==this.waitingVideoCC)h.logger.log("Waiting fragment cc ("+F+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var P=G.bufferInfo(this.mediaBuffer,this.media.currentTime,n.maxBufferHole);he(P.end,n.maxFragLookUpTolerance,I.frag)<0&&(h.logger.log("Waiting fragment cc ("+F+") @ "+I.frag.start+" cancelled because another fragment at "+P.end+" is needed"),this.clearWaitingFragment())}}else this.state=ve}},c.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=ve)},c.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},c.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onAudioTracksUpdated=function(e){h.logger.log("audio tracks updated"),this.tracks=e.audioTracks},c.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=ye,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ve),this.tick()},c.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,i=this.tracks[r],n=i.details,a=t.totalduration,o=0;if(h.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live||n&&n.live?n&&t.fragments.length>0?(re(n,t),o=t.fragments[0].start,t.PTSKnown?h.logger.log("live audio playlist sliding:"+o.toFixed(3)):h.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,h.logger.log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l.isFiniteNumber)(s)?(h.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),h.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ke&&(this.state=ve),this.tick()},c.onKeyLoaded=function(){this.state===be&&(this.state=ve,this.tick())},c.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===_e&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var i=this.tracks[this.trackId],n=i.details,a=n.totalduration,o=t.level,s=t.sn,l=t.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=ve,d.tparsed=d.tbuffered=tt.now(),n.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=Se,this.appended=!1,this.demuxer||(this.demuxer=new Q(this.hls,"audio"));var f=this.initPTS[l],p=n.initSegment?n.initSegment.data:[];void 0!==f?(this.pendingBuffering=!0,h.logger.log("Demuxing "+s+" of ["+n.startSN+" ,"+n.endSN+"],track "+o),this.demuxer.push(e.payload,p,c,null,t,a,!1,f)):(h.logger.log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+n.startSN+" ,"+n.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Re)}}this.fragLoadError=0},c.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Se){var i,n=e.tracks;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,n),h.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},c.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&i.sn===r.sn&&i.level===r.level&&this.state===Se){var n=this.trackId,a=this.tracks[n],o=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(g.AUDIO),h.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(a.details,r,e.startPTS,e.endPTS);var c=this.media,d=!1;if(this.audioSwitch)if(c&&c.readyState){var f=c.currentTime;h.logger.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(h.logger.log("switching audio track : flushing all audio"),this.state=Ee,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:n}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:n});var p=this.pendingData;if(!p)return h.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})})),!d&&p.length&&(p.forEach((function(e){t.state===Se&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},c.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Se&&(this.stats.tparsed=tt.now(),this.state=Te,this._checkAppendedParsed())},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},c.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Se&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},c._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=tt.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&h.logger.log("audio buffered : "+ae.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ve}this.tick()}},c.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);h.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=tt.now()+a,this.state=we}else h.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ae}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ae&&(this.state=e.fatal?Ae:ve,h.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Se||this.state===Te)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&G.isBuffered(o,l)&&G.isBuffered(o,l+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,h.logger.warn("AudioStreamController: reduce max buffer length to "+c.maxMaxBufferLength+"s")),this.state=ve}else h.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ee,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},c.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(h.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Te):(this.state=ve,this.fragPrevious=null,this.tick())},n=i,(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&et(n.prototype,a),o&&et(n,o),i}(Le),it=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function n(t,n,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,h=t,c=n,d=a,f=null,p="",g=!0,m="auto",v="start",y=50,b="middle",_=50,w="middle";Object.defineProperty(o,"id",i({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},s,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},s,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},s,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},s,{get:function(){return p},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},s,{get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},s,{get:function(){return v},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},s,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},s,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},s,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},s,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),nt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function at(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new nt,this.regionList=[]}function ot(){this.values=Object.create(null)}function st(e,t,r,i){var n=i?e.split(i):[e];for(var a in n)if("string"==typeof n[a]){var o=n[a].split(r);2===o.length&&t(o[0],o[1])}}ot.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var lt=new it(0,0,0),ut="middle"===lt.align?"middle":"center";function ht(e,t,r){var i=e;function n(){var t=function(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=n(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=n(),a(),function(e,t){var i=new ot;st(e,(function(e,t){switch(e){case"region":for(var n=r.length-1;n>=0;n--)if(r[n].id===t){i.set(e,r[n].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",ut,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",ut,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",ut,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var n=i.get("line","auto");"auto"===n&&-1===lt.line&&(n=-1),t.line=n,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",ut);var a=i.get("position","auto");"auto"===a&&50===lt.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function ct(e){return e.replace(/<br(?: \/)?>/gi,"\n")}at.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=ct(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var n=(i=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=r(),t.state){case"HEADER":/:/.test(i)?st(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new it(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{ht(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var dt=at;function ft(e,t,r,i){for(var n,a,o,s,l,u=[],h=window.VTTCue||TextTrackCue,c=0;c<i.rows.length;c++)if(o=!0,s=0,l="",!(n=i.rows[c]).isEmpty()){for(var d=0;d<n.chars.length;d++)n.chars[d].uchar.match(/\s/)&&o?s++:(l+=n.chars[d].uchar,o=!1);n.cueStartTime=t,t===r&&(r+=1e-4),a=new h(t,r,ct(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),u.push(a),e&&e.addCue(a)}return u}var pt,gt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},mt=function(e){var t=e;return gt.hasOwnProperty(e)&&(t=gt[e]),String.fromCharCode(t)},vt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},bt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_t={25:2,26:4,29:6,30:8,31:10,27:13,28:15},wt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(pt||(pt={}));var kt=function(){function e(){this.time=null,this.verboseLevel=pt.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&h.logger.log(this.time+" ["+e+"] "+t)},e}(),St=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},Tt=function(){function e(e,t,r,i,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=i||"black",this.flash=n||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Et=function(){function e(e,t,r,i,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Tt(t,r,i,n,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),xt=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new Et);this.logger=e,this.pos=0,this.currPenState=new Tt}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(pt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(pt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=mt(e);this.pos>=100?this.logger.log(pt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),At=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new xt(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(pt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(pt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[i+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,h=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[h].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){this.logger.log(pt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(pt.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(pt.INFO,"Rolling up")}else this.logger.log(pt.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,n=0;n<15;n++){var a=this.rows[n].getTextString();a&&(i=n+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Rt=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new At(r),this.nonDisplayedMemory=new At(r),this.lastOutputScreen=new At(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(pt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(pt.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(pt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(pt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(pt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(pt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(pt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(pt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(pt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(pt.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(pt.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(pt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(pt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(pt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(pt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(pt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(pt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(pt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function Ct(e,t,r){r.a=e,r.b=t}function Lt(e,t,r){return r.a===e&&r.b===t}var Dt=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new kt;this.channels=[null,new Rt(e,t,i),new Rt(e+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,i,n,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(i=127&t[o],n=127&t[o+1],0!==i||0!==n){if(this.logger.log(pt.DATA,"["+St([t[o],t[o+1]])+"] -> ("+St([i,n])+")"),(r=this.parseCmd(i,n))||(r=this.parseMidrow(i,n)),r||(r=this.parsePAC(i,n)),r||(r=this.parseBackgroundAttributes(i,n)),!r&&(a=this.parseChars(i,n))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(pt.WARNING,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(pt.WARNING,"Couldn't parse cleaned data "+St([i,n])+" orig: "+St([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Lt(e,t,r))return Ct(null,null,r),this.logger.log(pt.DEBUG,"Repeated command ("+St([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,n=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),Ct(e,t,r),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(pt.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(t),this.logger.log(pt.DEBUG,"MIDROW ("+St([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Lt(e,t,i))return Ct(null,null,i),!0;var n=e<=23?1:2;r=t>=64&&t<=95?1===n?vt[e]:bt[e]:1===n?yt[e]:_t[e];var a=this.channels[n];return!!a&&(a.setPAC(this.interpretPAC(r,t)),Ct(e,t,i),this.currentChannel=n,!0)},t.interpretPAC=function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.parseChars=function(e,t){var r,i=null,n=null;if(e>=25?(r=2,n=e-8):(r=1,n=e),n>=17&&n<=19){var a=t;a=17===n?t+80:18===n?t+112:t+144,this.logger.log(pt.INFO,"Special char '"+mt(a)+"' in channel "+r),i=[a]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=St(i);this.logger.log(pt.DEBUG,"Char codes =  "+o.join(",")),Ct(e,t,this.cmdHistory)}return i},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(r=Math.floor((t-32)/2),i.background=wt[r],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var n=e<=23?1:2;return this.channels[n].setBkgData(i),Ct(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}(),Ot=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),It=function(e,t,r){return e.substr(r||0,t.length)===t},Ft=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},Pt={parse:function(e,t,r,i,n,a){var o,s=Object(Be.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",h=0,c=0,d=0,f=[],p=!0,g=!1,m=new dt;m.oncue=function(e){var t=r[i],n=r.ccOffset;t&&t.new&&(void 0!==c?n=r.ccOffset=t.start:function(e,t,r){var i=e[t],n=e[i.prevCC];if(!n||!n.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;n&&n.new;)e.ccOffset+=i.start-n.start,i.new=!1,n=e[(i=n).prevCC];e.presentationOffset=r}(r,i,d)),d&&(n=d-r.presentationOffset),g&&(e.startTime+=n-c,e.endTime+=n-c),e.id=Ft(e.startTime.toString())+Ft(e.endTime.toString())+Ft(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},m.onparsingerror=function(e){o=e},m.onflush=function(){o&&a?a(o):n(f)},s.forEach((function(e){if(p){if(It(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach((function(e){It(e,"LOCAL:")?u=e.substr(6):It(e,"MPEGTS:")&&(h=parseInt(e.substr(7)))}));try{t+(9e4*r[i].start||0)<0&&(t+=8589934592),h-=t,c=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),n=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(i)&&Object(l.isFiniteNumber)(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*i,t+=36e5*n}(u)/1e3,d=h/9e4}catch(e){g=!1,o=e}return}""===e&&(p=!1)}m.parse(e+"\n")})),m.flush()}};function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Ut=function(e){var t,r;function i(t){var r;if((r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var i=new Ot(Bt(r),"textTrack1"),n=new Ot(Bt(r),"textTrack2"),a=new Ot(Bt(r),"textTrack3"),o=new Ot(Bt(r),"textTrack4");r.cea608Parser1=new Dt(1,i,n),r.cea608Parser2=new Dt(3,a,o)}return r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.addCues=function(e,t,r,i,n){for(var a,o,s,l,h=!1,c=n.length;c--;){var d=n[c],f=(a=d[0],o=d[1],s=t,l=r,Math.min(o,l)-Math.max(a,s));if(f>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],r),h=!0,f/(r-t)>.5))return}if(h||n.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,r,i);else{var p=this.Cues.newCue(null,t,r,i);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:p,track:e})}},n.onInitPtsFound=function(e){var t=this,r=e.frag,i=e.id,n=e.initPTS,a=this.unparsedVttFrags;"main"===i&&(this.initPTS[r.cc]=n),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},n.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},n.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},n.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,i=this.media,n=t[e],a=n.label,o=n.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,Ue(r[e]),Me(r[e],i);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,r[e]=l)}}},n.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},n.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},n.destroy=function(){e.prototype.destroy.call(this)},n.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Ue(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Ue(t[r])}},n.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=e.subtitles||[],i=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var i;if(r<n.length){for(var a=null,o=0;o<n.length;o++)if(Mt(n[o],e)){a=n[o];break}a&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}else if(!i&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var r=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(r){var i="textTrack"+r[1],n=t.captionsProperties[i];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}}))},n.onFragLoaded=function(e){var t=e.frag,r=e.payload,i=this.cea608Parser1,n=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var h=t.sn;t.sn!==o+1&&i&&n&&(i.reset(),n.reset()),this.lastSn=h}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l.isFiniteNumber)(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,r)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},n._parseVTTs=function(e,t){var r=this,i=this.hls,n=this.prevCC,a=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:n,new:!0},this.prevCC=e.cc),Pt.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var n=a[e.level];if("disabled"===n.mode)return void i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){h.logger.debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}))}else{var o=r.tracks[e.level].default?"default":"subtitles"+e.level;i.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:t,track:o})}i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){h.logger.log("Failed to parse VTT cue: "+t),i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},n.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},n.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var i=0;i<e.samples.length;i++){var n=e.samples[i].bytes;if(n){var a=this.extractCea608Data(n);t.addData(e.samples[i].pts,a[0]),r.addData(e.samples[i].pts,a[1])}}},n.extractCea608Data=function(e){for(var t=31&e[0],r=2,i=[[],[]],n=0;n<t;n++){var a=e[r++],o=127&e[r++],s=127&e[r++],l=3&a;0===o&&0===s||0!=(4&a)&&(0!==l&&1!==l||(i[l].push(o),i[l].push(s)))}return i},i}(d);function Nt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zt(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"subtitles"===i.kind&&i.label&&t.push(e[r])}return t}var Ht,jt=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,s=i.prototype;return s.destroy=function(){d.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),zt(this.media.textTracks).forEach((function(e){Ue(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,i=e.details,n=this.trackId,a=this.tracks,o=a[n];if(r>=a.length||r!==n||!o||this.stopped)this._clearReloadTimer();else if(h.logger.log("subtitle track "+r+" loaded"),i.live){var s=ne(o.details,i,e.stats.trequest);h.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,i=t[e];e<0||!i||i.details&&!i.details.live||(h.logger.log("Loading subtitle track "+e),r.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,i=this.trackId;if(t){var n=zt(t.textTracks);if(-1===e)[].slice.call(n).forEach((function(e){e.mode="disabled"}));else{var a=n[i];a&&(a.mode="disabled")}var o=n[e];o&&(o.mode=r?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,h.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=zt(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},n=i,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Nt(n.prototype,a),o&&Nt(n,o),i}(d),Gt=r("./src/crypt/decrypter.js"),Yt=window.performance,Wt=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=r,i.config=t.config,i.state=ge,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new Gt.default(t,t.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.startLoad=function(){this.stopLoad(),this.state=ve;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(500),this.tick())},n.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=ve,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var n,a=t.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){n=i[o];break}var s=t.start+t.duration;n?n.end=s:(n={start:a,end:s},i.push(n))}}},n.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=ve},n.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ge)},n.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=ve)},n.onSubtitleTracksUpdated=function(e){var t=this;h.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},n.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},n.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,i=this.currentTrackId,n=this.tracks,a=n[i];t>=n.length||t!==i||!a||(r.live&&function(e,t,r){void 0===r&&(r=0);var i=-1;ie(e,t,(function(e,t,r){t.start=e.start,i=r}));var n=t.fragments;if(i<0)n.forEach((function(e){e.start+=r}));else for(var a=i+1;a<n.length;a++)n[a].start=n[a-1].start+n[a-1].duration}(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},n.onKeyLoaded=function(){this.state===be&&(this.state=ve)},n.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,i=e.frag,n=this.hls;if(this.state===_e&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=Yt.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=Yt.now();n.trigger(u.default.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},n.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case ve:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,i=this.media,n=this.tracks;if(!n||!n[t]||!n[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),c=G.bufferedInfo(this._getBuffered(),i.currentTime,o),d=c.end,f=c.len,p=n[t].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(f>l)return;var y=this.fragPrevious;d<v?(y&&p.hasProgramDateTime&&(a=le(g,y.endProgramDateTime,s)),a||(a=ue(y,g,d,s))):a=g[m-1],a&&a.encrypted?(h.logger.log("Loading key for "+a.sn),this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:a})):a&&r.getState(a)===M&&(this.fragCurrent=a,this.state=_e,this.hls.trigger(u.default.FRAG_LOADING,{frag:a}))}else this.state=ve},n.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,e.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){if(this.fragCurrent){var e=this.media?this.media.currentTime:0,t=this.config.maxFragLookUpTolerance,r=this.fragCurrent.start-t,i=this.fragCurrent.start+this.fragCurrent.duration+t;(e<r||e>i)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=ve,this.tick())}},i}(Le);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Ht||(Ht={}));var Kt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Vt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qt=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(h.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!r.mediaKeysPromise)return h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,l=i.prototype;return l.getLicenseServerUrl=function(e){switch(e){case Ht.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,r){var i=this,n=function(e,t,r,i){switch(e){case Ht.WIDEVINE:return function(e,t,r){var i={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[i]}(t,r,i);default:throw new Error("Unknown key-system: "+e)}}(e,t,r,this._drmSystemOptions);h.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,n);this.mediaKeysPromise=a.then((function(t){return i._onMediaKeySystemAccessObtained(e,t)})),a.catch((function(t){h.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var r=this;h.logger.log('Access for key-system "'+e+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i);var n=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return i.mediaKeys=t,h.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return n.catch((function(e){h.logger.error("Failed to create media-keys:",e)})),n},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;h.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},l._onKeySessionMessage=function(e,t){h.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){h.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});h.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var r=this,i=this._mediaKeysList[0];if(!i)return h.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)h.logger.warn("Key-Session already initialized but requested again");else{var n=i.mediaKeysSession;if(!n)return h.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return h.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});h.logger.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,n.generateRequest(e,t).then((function(){h.logger.debug("Key-session generation succeeded")})).catch((function(e){h.logger.error("Error generating key-session request:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,r){var i=new XMLHttpRequest,n=this._licenseXhrSetup;try{if(n)try{n(i,e)}catch(t){i.open("POST",e,!0),n(i,e)}i.readyState||i.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,r),i},l._onLicenseRequestReadyStageChange=function(e,t,r,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,h.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&h.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(e.response);else{if(h.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var n=3-this._requestLicenseFailureCount+1;h.logger.warn("Retrying license request, "+n+" attempts left"),this._requestLicense(r,i)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Ht.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){h.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return h.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(i,e,t);h.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(r,e);n.send(a)}catch(e){h.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Ht.WIDEVINE,t,r)}},n=i,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Vt(n.prototype,a),o&&Vt(n,o),i}(d);function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qt=Zt(Zt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Je,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ye,bufferController:Ke,capLevelController:qe,fpsController:Ze,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Kt,testBandwidth:!0},{cueHandler:i,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Wt,subtitleTrackController:jt,timelineController:Ut,audioStreamController:rt,audioTrackController:$e,emeController:qt});function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nr(e,t,r){return t&&ir(e.prototype,t),r&&ir(e,r),e}var ar=function(e){var t,r;function i(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var n=i.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=er(er({},n),t);var a=rr(r).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(h.enableLogs)(a.debug),r._autoLevelCapping=-1;var o=r.abrController=new a.abrController(rr(r)),s=new a.bufferController(rr(r)),l=r.capLevelController=new a.capLevelController(rr(r)),u=new a.fpsController(rr(r)),c=new F(rr(r)),d=new P(rr(r)),f=new B(rr(r)),p=new Ne(rr(r)),g=r.levelController=new Pe(rr(r)),m=new H(rr(r)),v=[g,r.streamController=new Ie(rr(r),m)],y=a.audioStreamController;y&&v.push(new y(rr(r),m)),r.networkControllers=v;var b=[c,d,f,o,s,l,u,p,m];if(y=a.audioTrackController){var _=new y(rr(r));r.audioTrackController=_,b.push(_)}if(y=a.subtitleTrackController){var w=new y(rr(r));r.subtitleTrackController=w,v.push(w)}if(y=a.emeController){var k=new y(rr(r));r.emeController=k,b.push(k)}return(y=a.subtitleStreamController)&&v.push(new y(rr(r),m)),(y=a.timelineController)&&b.push(new y(rr(r))),r.coreComponents=b,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.isSupported=function(){return function(){var e=V();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}()},nr(i,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return i.defaultConfig?i.defaultConfig:Qt},set:function(e){i.defaultConfig=e}}]);var n=i.prototype;return n.destroy=function(){h.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(e){h.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},n.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),h.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},n.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},n.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},n.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},n.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},nr(i,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,i=0;i<r;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),i}(X);ar.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",(function(){return i})),r.d(t,"MAX_SAFE_INTEGER",(function(){return n}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},n=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,r){"use strict";function i(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return i}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",(function(){return h})),r.d(t,"logger",(function(){return c}));var i=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function n(){}var a={trace:n,debug:n,log:n,warn:n,info:n,error:n},o=a;function s(e,t){return t="["+e+"] > "+t}var l=Object(i.getSelfScope)();function u(e){var t=l.console[e];return t?function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];i[0]&&(i[0]=s(e,i[0])),t.apply(l.console,i)}:n}var h=function(e){if(l.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},c=o}}).default},e.exports=i())},function(e,t,r){var i;e.exports=(i=r(0),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=[],l=[];!function(){function t(t){for(var r=e.sqrt(t),i=2;i<=r;i++)if(!(t%i))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)t(i)&&(n<8&&(s[n]=r(e.pow(i,.5))),l[n]=r(e.pow(i,1/3)),n++),i++}();var u=[],h=o.SHA256=a.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],h=r[5],c=r[6],d=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[f-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[f]=g+u[f-7]+v+u[f-16]}var y=i&n^i&a^n&a,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),_=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&h^~s&c)+l[f]+u[f];d=c,c=h,h=s,s=o+_|0,o=a,a=n,n=i,i=_+(b+y)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0,r[5]=r[5]+h|0,r[6]=r[6]+c|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=e.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(h),t.HmacSHA256=a._createHmacHelper(h)}(Math),i.SHA256)},function(e,t,r){var i;e.exports=(i=r(0),r(6),function(){var e=i,t=e.lib.Hasher,r=e.x64,n=r.Word,a=r.WordArray,o=e.algo;function s(){return n.create.apply(n,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var h=o.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],h=r[5],c=r[6],d=r[7],f=i.high,p=i.low,g=n.high,m=n.low,v=a.high,y=a.low,b=o.high,_=o.low,w=s.high,k=s.low,S=h.high,T=h.low,E=c.high,x=c.low,A=d.high,R=d.low,C=f,L=p,D=g,O=m,I=v,F=y,P=b,B=_,M=w,U=k,N=S,z=T,H=E,j=x,G=A,Y=R,W=0;W<80;W++){var K,V,q=u[W];if(W<16)V=q.high=0|e[t+2*W],K=q.low=0|e[t+2*W+1];else{var X=u[W-15],Z=X.high,J=X.low,Q=(Z>>>1|J<<31)^(Z>>>8|J<<24)^Z>>>7,$=(J>>>1|Z<<31)^(J>>>8|Z<<24)^(J>>>7|Z<<25),ee=u[W-2],te=ee.high,re=ee.low,ie=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ae=u[W-7],oe=ae.high,se=ae.low,le=u[W-16],ue=le.high,he=le.low;V=(V=(V=Q+oe+((K=$+se)>>>0<$>>>0?1:0))+ie+((K+=ne)>>>0<ne>>>0?1:0))+ue+((K+=he)>>>0<he>>>0?1:0),q.high=V,q.low=K}var ce,de=M&N^~M&H,fe=U&z^~U&j,pe=C&D^C&I^D&I,ge=L&O^L&F^O&F,me=(C>>>28|L<<4)^(C<<30|L>>>2)^(C<<25|L>>>7),ve=(L>>>28|C<<4)^(L<<30|C>>>2)^(L<<25|C>>>7),ye=(M>>>14|U<<18)^(M>>>18|U<<14)^(M<<23|U>>>9),be=(U>>>14|M<<18)^(U>>>18|M<<14)^(U<<23|M>>>9),_e=l[W],we=_e.high,ke=_e.low,Se=G+ye+((ce=Y+be)>>>0<Y>>>0?1:0),Te=ve+ge;G=H,Y=j,H=N,j=z,N=M,z=U,M=P+(Se=(Se=(Se=Se+de+((ce+=fe)>>>0<fe>>>0?1:0))+we+((ce+=ke)>>>0<ke>>>0?1:0))+V+((ce+=K)>>>0<K>>>0?1:0))+((U=B+ce|0)>>>0<B>>>0?1:0)|0,P=I,B=F,I=D,F=O,D=C,O=L,C=Se+(me+pe+(Te>>>0<ve>>>0?1:0))+((L=ce+Te|0)>>>0<ce>>>0?1:0)|0}p=i.low=p+L,i.high=f+C+(p>>>0<L>>>0?1:0),m=n.low=m+O,n.high=g+D+(m>>>0<O>>>0?1:0),y=a.low=y+F,a.high=v+I+(y>>>0<F>>>0?1:0),_=o.low=_+B,o.high=b+P+(_>>>0<B>>>0?1:0),k=s.low=k+U,s.high=w+M+(k>>>0<U>>>0?1:0),T=h.low=T+z,h.high=S+N+(T>>>0<z>>>0?1:0),x=c.low=x+j,c.high=E+H+(x>>>0<j>>>0?1:0),R=d.low=R+Y,d.high=A+G+(R>>>0<Y>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(h),e.HmacSHA512=t._createHmacHelper(h)}(),i.SHA512)},function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,u=[],h=!1,c=-1;function d(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&f())}function f(){if(!h){var e=s(d);h=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||h||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function s(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},i=[],n=0;n<e.length;n++){var a=e[n],l=t.base?a[0]+t.base:a[0],u=r[l]||0,h="".concat(l," ").concat(u);r[l]=u+1;var c=s(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==c?(o[c].references++,o[c].updater(d)):o.push({identifier:h,updater:m(d,t),references:1}),i.push(h)}return i}function u(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=r.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var h,c=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function d(e,t,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,n);else{var a=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,r){var i=r.css,n=r.media,a=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,g=0;function m(e,t){var r,i,n;if(t.singleton){var a=g++;r=p||(p=u(t)),i=d.bind(null,r,a,!1),n=d.bind(null,r,a,!0)}else r=u(t),i=f.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<r.length;i++){var n=s(r[i]);o[n].references--}for(var a=l(e,t),u=0;u<r.length;u++){var h=s(r[u]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}r=a}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(n[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);i&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAAXNSR0IArs4c6QAAAFFQTFRFAAAA/1Cf/1CP/1iX/1iP/1qV/1WV/1WP/1iT/1ST/1aU/1WV/1WS/1eT/1eU/1eS/1ST/1aS/1ST/1aT/1WT/1WT/1aU/1WS/1WT/1WS/1WTEJff9gAAABp0Uk5TABAQICAwMDBAQF9gYG9wcICPoK+/z9/f7++TovFzAAAAaklEQVR42uXOSRKAIAxEUcQBBxTnoe9/UBcphSIVLkDvUi+Lr/Jba3VCR2CSdQGeRsJiBy4jaXkCR/W9ujqKuoH177JAH0Vh9mcH8iBqUMEsOYti7qO4R1HcwyjuG0VJTlGSU5Q447TKZi/mCAiLDUT9+AAAAABJRU5ErkJggg=="},function(e,t,r){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAAeCAYAAABnuu2GAAAAAXNSR0IArs4c6QAACKhJREFUWEeFWFuMVeUV/vbZex/mDBQPg9ByLcw4kRFLobVASi/E2BdthdeaYiAm1dKaWF4wDTAXU3zog600pfVFH2h9asAHMLFpRGtaMJZ6ocbg3BSBjnrmwgxzZphz9m7W+i97/f/eI5OczDn7/GdnfXut9a1vfQEK/p7pGaqGcwv2Rknj+2U0N8dpY12cNhCnTX6Vkb2n62W6jibipPhMWX8XIUGKEhJEaCLk/0lAV9X7Jn0W182ZNIjQTEN1Vp9XZ/V5/j5CGoT8PwlCBD6uo4dGdpeB5+O0UbVBMyAPDAUrrpvgCSADTRuI6CHwS72n8ykFToEYACK4wqA1+Ax0iCaBIwD2XhHfl67TQyDADrC+7rFn4qTxBAdMT18HqQJUn+MkA8lgNGAJjM7IrNJ3EZ1LmvxUzZPmYEXGOGsctM5OQfbsbwmEzDz/Nru3BXboyGR3nM71qGDnAWZKzpSfzJgsR34gbob5nlyKoc5WyE9XlhS953IiwLqk/PJ0ys8pRbofPXoFjoE9eXhqbxQkz3P/yIB0L5nSMj0Wo4EyZU5njL7nrIrzlCFzhq5HfD5BmpZsr9i+0QFaELqcbO85WVQlmMu2Lm+TRQZ2sPvGUJw211liMOWms+cDM4E6pcgZKSAV2Z+aPAhQWoq55Lj0dEmZoLInL0jFlpkiB4c8bB+aUowQHOip741Tla2MIBooI8n6x35nrntnNTHw783D0D3q3pd6jBislJWhYDkC5hKIAeCVrcOMxewaHOiZPRmnjd0unWc9Zile0j2xnGU/AjmHcpqojOkS9XuMy1WUYp4VqVB1/3mlyCxqCcVlQyaakupJvmegei040DNjy1AyXJSo+WTIZF1XBV3fqWLk4gQ+fuN/mtJN5uiszrBmzuU/2YR4SQXTz72BaLqOlj3bEFZiJH96zZZe9PA2oG0hEARI00D957YPkNQTzNVuov7uddT7Z7y5J8dFVn62RIMIwS+7Z1LZK5YgqPlFj1WrAR482IHa4BTe/OMlO6ydTOustrYtwKrue9G8Mo7Jp1/hkm7t2wUKOzl0UpdbhPipBxAsbUVSq+txqkg6JWitEUqViD9fP/s5an/9VI+J4uGuhn3WewJYNnDNTKI+Y3bTPXbfT9diWXsrzh+/hMnBCXdAa/Kgs8t2b8BtO9dj6sRbaJwb5N9X+h5UwA6ftFQeP/VDBjb589MFaiRCuGoRqns6EK+uYOzMZxg9M5brQaNGmJAs3YdcimmWJU3ZYghLJdG1o4rNP/oK+l+5iuG/XSkERvdaf2QnorYKRrtfRqk2WZAx9WTLApiheg5ODGhUFmDlbzahMTqHj7qHHKo3LKrmn9uHRB7pLXWgzlhrC3D/k50IUuDskQsWmMqo6rfFHVWsfnwrZt69hsnn/mlnnS1Fypim9wzYGdtDamiHWn2ogbuidyOipWUMPH6pWFvm9CPT/a2BWUmVNvHtPWuw8u7F+PfxDzA1MJ4bCasf2ojFW1dh/MQF3Dw3pPu0qMdCmFK8vv+01XiK2VyBu/zgBpRXVzDwCw1MzzR1VrGpFNaUSReYVuGOWheilrKyor0FOx7twOV/jGDw1JAzlIniO498l3vp0x4ijSyTfsYoGNtj+09bMK7qjxAsrXDGbl6ZxeWnP/IEtFT82aCne3sZU0zIVF84oFWgD/RuZLY6f/Q/KE3PItJzrO3uNqx5ZDNunL+MiT9f0PdRJfqFpaiBSUmF1haUVi3Ckj3tCNvK+PzEVUycm/JKMcuYvwa55EHZ8RWDB5Kq/q77lqHzByvwzvH3caN/1M60r/54A6pbV2Lk2L/Q/HDEri1FwKjc4j5F97f6Gz8zgrGXa5buidZzOx3JM0MiKmMFrCglklkuhfL4cnsF2x/rxMTABP77h/c4iy0tAb529HtojNbxSc/fOUu2pNFEa6+h+1MsqQiYIY+5c5/wYFYvklslNGs3eUBPvzeFxnTAMyq3mAo1QhljltRE4s2xbChbjccZTBzVTyJ4+6Od+NLKCi78+i0ux+X3LMfah7pQO/k+Jl8ddIH5pUjyJwgdulfriJFFGXkoFa+DFlszL5XOPmYWWL1oHuieSY1wlU9Z9Zm2AhyFrrbi9h23485dazB8ahCfvX4ZXfu/jkV3VDHcexaoTeXsgzx5ZMrDDGhfPZgN2Sm7eWwFdyvPkYfYfEWvybVFlVcDlRZgZ983cL1/AsMvfoBNh7dhun8UV46dd+eb3tl8SUWl488xpe4zWWTLS1+3641dUEV58mKayS2vx4x8ypZItXx6ngctmmkT9zx2J6odi/HxSwNYu6sDV/9ykRmxyPBxgOlAfUmVK0W9YErGcwwe6Zto5aG38rcdYBnVu9aA7TdhG9DZ29sXYvPP7mJSa9Yb+LDvdUT1Wb26CMcqbaBiRPDhPHlIrejaBXpbdnwRsT3zyqIWVs40O1WUtdJL88wxs67o4HLmjLpO5bjtV1sQVSKMvXkN1168aC0436L7Ykl1OgtKGDLWkvOtAWnZFRg/SVraVyyptAi2xg57GrJMFTBTolIrqjI0Q96QjzpP0kzZY55TJWw0SRjurMp+Y2hfaUpF8cok4nsPbz+2YL0CZolCB2wCM/NMmDbSwDElWgSsaCNnYDoAtuG00WnBmJ4SGZJDN5tjRskTWL15a3BpGuzbeqzyQjF5SL/QOFCeNWCd30LDJ3tARZ6Hypg7d4wtIC20zD6QwlgxnxzGGVuGvd96dmEP9XwemHV4hWUtfUKZPc2WTsa0NWANVt8JFnJI7VCZh1E0oK3fYY0euUHrjPE9S7/75rO3PWHk2fw95mXN8UPY1c2Ecs67L9Cc6kyCxPiK0kuU1pq2qq1Jw78qWbvNZMusNk2E40ka7dvy+yWnpObMZcw0f9Z3/hzT1nfOMJ1HqXhWufHujekpN19/ZbEgHPuah/hwgvjtuSR4LYlnX9jy2/XjvpD+P6yN+gochrdVAAAAAElFTkSuQmCC"},function(e,t){e.exports='<svg viewBox="0 0 23 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="play-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M14.1800788,4.60141227 L26.0075713,22.9149491 C26.6068284,23.842831 26.3404253,25.0808217 25.4125434,25.6800788 C25.0891834,25.8889154 24.7124269,26 24.3274926,26 L0.672507438,26 C-0.432062062,26 -1.32749256,25.1045695 -1.32749256,24 C-1.32749256,23.6150656 -1.21640801,23.2383092 -1.00757132,22.9149491 L10.8199212,4.60141227 C11.4191783,3.67353039 12.657169,3.40712733 13.5850509,4.00638437 C13.8233474,4.16028419 14.0261789,4.36311577 14.1800788,4.60141227 Z" fill="#D8D8D8" transform="translate(12.500000, 14.000000) rotate(90.000000) translate(-12.500000, -14.000000) "></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="pause-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect fill="#D8D8D8" x="0" y="1" width="4" height="26" rx="2"></rect><rect fill="#D8D8D8" x="20" y="1" width="4" height="26" rx="2"></rect></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 34 24"><defs><style> .cls-1 { opacity: 0.9; } </style></defs><image class="cls-1" width="34" height="24" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAACfpi8JAAACwklEQVRIibXXz4uVVRgH8M+9DBIz42z6oTG5C20hljhTOU6UlG40E2cRKqQu/JEphEMLp8W0UJD8kaBto18KLcZUJohpEUGKUwOVWfoHDGUUL6SOC9Fs8ZzLvF7fe+fe4n7h5dz3eZ5zzvc9z3l+3FKWZZrAs3gbS9L7hziAa80sUoRyE7YDOIUFGMFX2IzP0FVn3gPoTeP/JrITx/ArVmE3NmEfnsQbdeYuxBl8gb14pMio1IBr3sE2jKfNq93wc5ItqzH/YWzEeszDjURoJG9U70TKOJxIjOG1AhJwE+111vkTR/EcXk+yY9ieN2rL/e7C86b9vQIr8Wn6gjt1CN+uks3Fi/gFPybZLeGi8/gIw/gDp5l2TZ/w9xNVCx7FuzUIVPB9GntzspUiouBrvIeJnL5D3JnH8AImS1mWvYTj4iQGcTkZ38alGUjUItIhQnwNNiTZJhFpFSwV9+Qs9pSyLPsSi0Qk3HOBGkQRkTx60rp/i5O6mtONYjE2lxMJiVkrMCGi5iFsqdKdRAnryribhKUWEYFvcUEkwM6cfDyNS/JEmsmy/wXfYXZ6KvgtjY+2evM86u5VNu2Sf1pM5GmREK/nZN1p/D1P5K7WoT8R+Vik+Ar60jhRxsX08nKLSPSI7PwXPqjSvSoO4PM2HBIJ7Thm4UoyajShFaFT5IdXTCe0QffmkP5kcxbnWpXiV4h6At+I4plP8V2JQDeWY7JS9M5jrfuL3pt4EENqF70iXMRbon/5oUo3FycwH7swSf1+pIyDoo8YS5NuFNiNC5cunoHcLKwWJ9yO/Xi/omyrMYkI58G0+VZ8orgxai+Q5TFH3JP1otpeww5VJaWRhDYs7s8zomd9PKfbKVw3Wmf+fOGmKRwRndx9da2RVrGCAdFZXReu6hL36CcRhrVOpQNPiQZpqtbizRAheoghLfg78S+pj6krIGav1wAAAABJRU5ErkJggg=="></image></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 33 24"><defs><style> .cls-1 { opacity: 0.9; } </style></defs><image class="cls-1" width="33" height="24" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAACFUlEQVRIibXWXYjMYRTH8c+Mobgg2ZJNsaXEhWjLhVwpSVqbl1qvFyuyIZuwUriS5OUGrfVSFLVKSqTURuHKhbjZpLyHvNQWG6IsF8/zrzF2Zs38Z079m/7znJ7z/T/POb9zMn19fcqwBdiJ6fH9DI7iSzmbFFq2DN92nEMdLuM2NqAbo2sNkcUB7MI9LIpAa3AEs7A1DURmiOsYg2OYjyvYjp8FPr34jDmVQuRKrNUJx9+Is9hXxO8bRlYKUAgxFTMxLL5vRgP2o7PEHlkMVANik3DUhV/UhmtpAvwvxHLswSMhAZNy68eLlPs3Yy068HyQ9aVYlYsO79GKDymDFlpOSNjzWIm3eWuLcQL9WUzE/RoAECqqA1NwCfXx/yZ0xZhNpaqjWnYRvwRlvYCr2I3XaMGrBCJTY5BufBW+fhpeYol4+uXIdlorWsYJxO8aA7TgNB7jICYLpT+J0opZLVuNw3gmlOs74Tq6hPxoyeINZmN8DQCaI8BTrIgAhFNoizFvZnEIE4Q+MRcz4tNQBYgfuIt1/taIBGQLepMuWky2N+L6EIEexN/GSkmTnOjELf82sFOCmJ2sNEA5EPAkPon1CFe0V7iuYq18AMPTQJTSiU9CZvdgPY5jxCB+o/C9VhCEialVaEDLBNmtz1vfhrG4kQZiqPEu39qFOfMj7mAc5uGh0CErnrjLgYCF2CHoP1Ua+f8AgRx3377twAYAAAAASUVORK5CYII="></image></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><defs><style> .cls-1 { opacity: 0.9; } </style></defs><image class="cls-1" width="24" height="24" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABb0lEQVRIie3WQUsVURjG8d8cL9yrWKvbUvsGQuVH0LZtArfJVdxkIFRCC8VNmxY3qE30CSIIImiTK5daLVoLRUQb5YDoIpVrLs5cHOFeLZjBjQ8cmDPnnf8zc+ac9z1ZjFGuW5jHJDIneoqXeus+nhT6f/EJL/AFavnAFNr59Tr+FB760QcO37FW6DdwO28LeJPFGG/iPbbxCKtnAP9FE3iGa7gT8AADWCwBLmc8RsB8FmPcxC5ulAAv6iuuBmne9kuGwwEaQfqUegUGdYRQAfiUaph1elmWpYcYzAobrRJVPkWXBhdvUMOSlCra58T+rxZwJYsx/pYy6VjJBt/QDFKRqCIX7ZP+QYZOBQYddAK2MKTchFfHILYDPqCJVokGLamifcxijKN4ixE8x2vsFYI7OOoDClI17GoYM9IK+oW73WQ3Lp0ErveArOBVH4M5LPe4/1M6oWx0N9pnTOMddnBYaP3eXj5WjN3JGfewAceofFf/DV7fOQAAAABJRU5ErkJggg=="></image></svg>'},function(e,t){e.exports='<svg t="1619607363614" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="691" id="mx_n_1619607363631" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M766.2 920.6H257.7c-85.3 0-154.7-69.4-154.7-154.7V299.2c0-85.3 69.4-154.7 154.7-154.7h509.4c41.4 0 80.3 16.1 109.5 45.4s45.3 68.2 45.2 109.6l-1 466.7c-0.1 85.2-69.5 154.4-154.6 154.4zM257.7 194.5c-57.7 0-104.7 47-104.7 104.7v466.7c0 57.7 47 104.7 104.7 104.7h508.5c57.6 0 104.6-46.9 104.7-104.5l1-466.7c0.1-28-10.8-54.4-30.6-74.2-19.8-19.8-46.1-30.7-74.1-30.7H257.7z" p-id="692"></path><path d="M766.2 446.5c-13.8 0-25-11.2-25-25v-81.4c0-32.6-26.5-59.2-59.2-59.2h-88.5c-13.8 0-25-11.2-25-25s11.2-25 25-25H682c60.2 0 109.2 49 109.2 109.2v81.4c0 13.8-11.1 25-25 25zM424.9 792.8h-0.3l-85.6-0.9c-28.5-0.3-55.3-11.5-75.4-31.7-20.1-20.1-31.4-46.9-31.7-75.4l-1-90.7c-0.1-13.8 10.9-25.1 24.7-25.3 13.8-0.2 25.1 10.9 25.3 24.7l1 90.7c0.3 31.4 26.2 57.3 57.6 57.6l85.6 0.9c13.8 0.1 24.9 11.4 24.7 25.3 0 13.8-11.2 24.8-24.9 24.8z" p-id="693"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(e,t){e.exports='<svg t="1615273007402" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1165" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M512 0a512 512 0 1 0 512 512 511.926857 511.926857 0 0 0-512-512z m216.649143 529.334857L444.708571 757.833143a22.162286 22.162286 0 0 1-35.986285-17.261714V283.574857c0-18.578286 21.504-28.964571 35.986285-17.261714l283.940572 228.571428a22.016 22.016 0 0 1 0 34.523429z" p-id="1166"></path></svg>'},function(e,t){e.exports='<svg t="1615273011296" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1310" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M512 0a512 512 0 0 1 512 512 512 512 0 1 1-512-512z m-64 320h-128v384h128v-384z m256 0h-128v384h128v-384z" p-id="1311"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 23 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="next-play-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M9.9819739,7.63528155 L19.970371,18.6569612 C20.7121109,19.4754327 20.6499076,20.740234 19.831436,21.4819739 C19.4635674,21.8153548 18.9848547,22 18.4883971,22 L-1.48839714,22 C-2.59296664,22 -3.48839714,21.1045695 -3.48839714,20 C-3.48839714,19.5035424 -3.30375196,19.0248298 -2.97037104,18.6569612 L7.0180261,7.63528155 C7.75976597,6.81680996 9.02456726,6.75460662 9.84303885,7.49634649 C9.89159881,7.54035396 9.93796644,7.58672159 9.9819739,7.63528155 Z" fill="#D8D8D8" transform="translate(8.500000, 14.000000) rotate(90.000000) translate(-8.500000, -14.000000) "></path><rect fill="#D8D8D8" x="18" y="2" width="4" height="24" rx="2"></rect></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="skip-ff-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M1.5,11 C1.5,16.2467051 5.75329488,20.5 11,20.5 C16.2467051,20.5 20.5,16.2467051 20.5,11 C20.5,5.75329488 16.2467051,1.5 11,1.5 C8.3291082,1.5 5.91565158,2.60221108 4.18967243,4.37659095 C4.88044064,5.02888307 5.45272872,5.56929446 5.90653667,5.99782511 C6.00128065,6.08729181 6.09086041,6.17188194 6.17527596,6.2515955" stroke="#D8D8D8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" transform="translate(11.000000, 11.000000) scale(-1, 1) translate(-11.000000, -11.000000) "></path><text id="10" font-family="SourceHanSansCN-Medium, Source Han Sans CN" font-size="11" font-weight="400" letter-spacing="-0.6875" fill="#D8D8D8"><tspan x="5" y="15">10</tspan></text></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="skip-rew-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M1.5,11 C1.5,16.2467051 5.75329488,20.5 11,20.5 C16.2467051,20.5 20.5,16.2467051 20.5,11 C20.5,5.75329488 16.2467051,1.5 11,1.5 C8.3291082,1.5 5.91565158,2.60221108 4.18967243,4.37659095 C5.19650944,5.32734671 5.9516372,6.04041352 6.45505571,6.5157914" stroke="#D8D8D8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><text id="10" font-family="SourceHanSansCN-Medium, Source Han Sans CN" font-size="11" font-weight="400" letter-spacing="-0.6875" fill="#D8D8D8"><tspan x="6" y="15">10</tspan></text></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="play-thumb-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><circle fill-opacity="0.3" fill="#dc41eb" cx="13" cy="13" r="13"></circle><circle stroke="#dc41eb" stroke-width="4" fill="#FFFFFF" cx="13" cy="13" r="8"></circle></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg" style="fill: none"><g clip-path="url(#clip0_946_8736)"><g filter="url(#filter0_d_946_8736)"><path d="M30 10C24.7945 10 19.7501 11.8049 15.7261 15.1073C11.7022 18.4096 8.94787 23.005 7.93233 28.1105C6.91679 33.2159 7.70292 38.5156 10.1568 43.1064C12.6106 47.6973 16.5804 51.2952 21.3896 53.2873C26.1989 55.2793 31.5501 55.5422 36.5314 54.0312C41.5128 52.5201 45.8161 49.3285 48.7081 45.0003C51.6001 40.6721 52.9019 35.475 52.3917 30.2946C51.8814 25.1142 49.5907 20.2709 45.9099 16.5901" stroke="white" stroke-width="2.5" stroke-linecap="round"></path></g><g filter="url(#filter1_d_946_8736)"><path d="M38.7133 10.9905C39.3633 10.4901 39.3633 9.50987 38.7133 9.00949L30.7625 2.88897C29.9405 2.25622 28.75 2.84217 28.75 3.87947L28.75 16.1205C28.75 17.1578 29.9405 17.7438 30.7625 17.111L38.7133 10.9905Z" fill="white"></path></g></g><defs><filter id="filter0_d_946_8736" x="1.25" y="3.75" width="57.5" height="57.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="2.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_946_8736"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_946_8736" result="shape"></feBlend></filter><filter id="filter1_d_946_8736" x="23.75" y="-2.37305" width="20.4507" height="24.7461" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="2.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_946_8736"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_946_8736" result="shape"></feBlend></filter><clipPath id="clip0_946_8736"><rect width="60" height="60" fill="none" transform="matrix(-1 0 0 1 60 0)"></rect></clipPath></defs></svg>'},function(e,t){e.exports='<svg viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg" style="fill: none"><g clip-path="url(#clip0_946_8729)"><g filter="url(#filter0_d_946_8729)"><path d="M30 10C35.2055 10 40.2499 11.8049 44.2739 15.1073C48.2978 18.4096 51.0521 23.005 52.0677 28.1105C53.0832 33.2159 52.2971 38.5156 49.8432 43.1064C47.3894 47.6973 43.4196 51.2952 38.6104 53.2873C33.8011 55.2793 28.4499 55.5422 23.4686 54.0312C18.4872 52.5201 14.1839 49.3285 11.2919 45.0003C8.39991 40.6721 7.09812 35.475 7.60834 30.2946C8.11857 25.1142 10.4093 20.2709 14.0901 16.5901" stroke="white" stroke-width="2.5" stroke-linecap="round"></path></g><g filter="url(#filter1_d_946_8729)"><path d="M21.2867 10.9905C20.6367 10.4901 20.6367 9.50987 21.2867 9.00949L29.2375 2.88897C30.0595 2.25622 31.25 2.84217 31.25 3.87947L31.25 16.1205C31.25 17.1578 30.0595 17.7438 29.2375 17.111L21.2867 10.9905Z" fill="white"></path></g></g><defs><filter id="filter0_d_946_8729" x="1.25" y="3.75" width="57.5" height="57.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="2.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_946_8729"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_946_8729" result="shape"></feBlend></filter><filter id="filter1_d_946_8729" x="15.7993" y="-2.37305" width="20.4507" height="24.7461" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="2.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_946_8729"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_946_8729" result="shape"></feBlend></filter><clipPath id="clip0_946_8729"><rect width="60" height="60" fill="white"></rect></clipPath></defs></svg>'},function(e,t){e.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="12" cy="3" rx="2" ry="2" stroke="#CCCCCC" stroke-width="1.8"></ellipse><circle cx="12" cy="12" r="2" stroke="#CCCCCC" stroke-width="1.8"></circle><ellipse cx="12" cy="21" rx="2" ry="2" stroke="#CCCCCC" stroke-width="1.8"></ellipse></svg>'},function(e,t){e.exports='<svg viewBox="0 0 32 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="20" rx="10" fill="#dc41eb"></rect><circle cx="22.1057" cy="9.99884" r="7.42072" fill="white"></circle></svg>'},function(e,t){e.exports='<svg viewBox="0 0 32 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="20" rx="10" fill="#DDDDDD"></rect><circle cx="9.89435" cy="9.99884" r="7.42072" fill="white"></circle></svg>'},function(e,t){e.exports='<svg viewBox="0 0 32 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1674_15481)"><path d="M7.6665 9.99739C7.6665 5.39502 11.3975 1.66406 15.9998 1.66406V1.66406C20.6022 1.66406 24.3332 5.39502 24.3332 9.99739V9.99739C24.3332 14.5998 20.6022 18.3307 15.9998 18.3307H10.4443C8.91016 18.3307 7.6665 17.0871 7.6665 15.5529V9.99739Z" stroke="#CCCCCC" stroke-width="1.36364"></path><path d="M16 6.66406V9.9974" stroke="#CCCCCC" stroke-width="1.81818" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 13.3359H16.0092" stroke="#CCCCCC" stroke-width="1.81818" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_1674_15481"><rect width="20" height="20" fill="white" transform="translate(6)"></rect></clipPath></defs></svg>'},function(e,t){e.exports='<svg viewBox="0 0 54 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 10C0 4.47715 4.47715 0 10 0H54V20C54 25.5228 49.5228 30 44 30H0V10Z" fill="url(#paint0_linear_875_8071)"></path><path d="M0 10C0 4.47715 4.47715 0 10 0H54V20C54 25.5228 49.5228 30 44 30H0V10Z" fill="url(#paint1_linear_875_8071)"></path><path d="M10.4166 8.292H12.3966L17.3026 22.042H17.3686L22.2746 8.292H24.2546L18.4466 24H16.2246L10.4166 8.292ZM26.0734 8.292H27.8554V24H26.0734V8.292ZM31.1621 8.292H37.5861C41.1941 8.292 42.9981 9.832 42.9981 12.912C42.9981 16.0213 41.1868 17.576 37.5641 17.576H32.9661V24H31.1621V8.292ZM32.9661 9.854V16.014H37.4761C38.7228 16.014 39.6615 15.7573 40.2921 15.244C40.8935 14.7307 41.1941 13.9533 41.1941 12.912C41.1941 11.8413 40.8861 11.0787 40.2701 10.624C39.6688 10.1107 38.7375 9.854 37.4761 9.854H32.9661Z" fill="white"></path><defs><linearGradient id="paint0_linear_875_8071" x1="0" y1="0" x2="25.4717" y2="45.8491" gradientUnits="userSpaceOnUse"><stop stop-color="#14D4FF"></stop><stop offset="0.21875" stop-color="#80A5FF"></stop><stop offset="0.5" stop-color="#D580FF"></stop><stop offset="0.786458" stop-color="#EA72A7"></stop><stop offset="1" stop-color="#F64F59"></stop></linearGradient><linearGradient id="paint1_linear_875_8071" x1="0" y1="30" x2="54" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#6F80FA"></stop><stop offset="0.510417" stop-color="#FF689E"></stop><stop offset="1" stop-color="#C56EFF"></stop></linearGradient></defs></svg>'},function(e,t,r){var i={"./ar-AE.ts":41,"./en-US.ts":42,"./es-ES.ts":43,"./fr-FR.ts":44,"./id-ID.ts":45,"./index.ts":7,"./th-TH.ts":46,"./vi-VN.ts":47,"./zh-CN.ts":48};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=40},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":" ","Switched to":" ",Live:"Live",Subtitles:"",NoSubtitle:"  ",AutoTranslate:" ",autoChargeTitle:"  ",autoChargeDesc:"  HiCoin     ",feedback_btn:" "}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":"Switch to","Switched to":"Switch to",Live:"Live",Subtitles:"Subtitles",NoSubtitle:"No subtitle",AutoTranslate:"Auto-translate",autoChargeTitle:"Automatically unlock episodes",autoChargeDesc:"HiCoin is automatically deducted when playing or downloading",feedback_btn:"Feedback"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":"Cambiar a","Switched to":"Cambiar a",Live:"Live",Subtitles:"Subttulos",NoSubtitle:"Sin subttulos",AutoTranslate:"Auto-traduccin",autoChargeTitle:"Desbloquea episodios automticamente",autoChargeDesc:"HiCoin se deduce automticamente al reproducir o descargar",feedback_btn:"Feedback"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":"Switch to","Switched to":"Switch to",Live:"Live",Subtitles:"Sous-titres",NoSubtitle:"Pas de sous-titres",AutoTranslate:"Traduction automatique",autoChargeTitle:"Dverrouiller automatiquement les pisodes",autoChargeDesc:"HiCoin est automatiquement dduit lors de la lecture ou du tlchargement",feedback_btn:"Feedback"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":"Beralih ke","Switched to":"Beralih ke",Live:"Live",Subtitles:"Subtitle",NoSubtitle:"Matikan Subtitle",AutoTranslate:"Auto-translate",autoChargeTitle:"Automatically unlock episodes",autoChargeDesc:"HiCoin is automatically deducted when playing or downloading",feedback_btn:"Feedback"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":"","Switched to":"",Live:"Live",Subtitles:"",NoSubtitle:"",AutoTranslate:"Auto-translate",autoChargeTitle:"Automatically unlock episodes",autoChargeDesc:"HiCoin is automatically deducted when playing or downloading",feedback_btn:"Feedback"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"FF",REW:"REW",s:"s","Switching to":" chuyn sang","Switched to":" chuyn sang",Live:"Live",Subtitles:"Ph ",NoSubtitle:" tt ph ",AutoTranslate:"Dch t ng",autoChargeTitle:"T ng m kha tp ny",autoChargeDesc:"Chiu phim hoc ti s t ng tr HiCoin",feedback_btn:"Bo li"}},function(e,t,r){"use strict";r.r(t),t.default={FF:"",REW:"",s:"","Switching to":"","Switched to":"",Live:"",Subtitles:"",NoSubtitle:"",AutoTranslate:"",autoChargeTitle:"",autoChargeDesc:"HiCoin",feedback_btn:""}},function(e,t,r){var i;e.exports=(i=r(0),r(6),r(51),r(52),r(3),r(53),r(4),r(8),r(13),r(54),r(14),r(55),r(56),r(57),r(9),r(58),r(2),r(1),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(69),r(70),r(71),r(72),r(73),r(74),i)},function(e,t){},function(e,t,r){var i;e.exports=(i=r(0),function(){if("function"==typeof ArrayBuffer){var e=i.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,i=[],n=0;n<r;n++)i[n>>>2]|=e[n]<<24-n%4*8;t.call(this,i,r)}else t.apply(this,arguments)}).prototype=e}}(),i.lib.WordArray)},function(e,t,r){var i;e.exports=(i=r(0),function(){var e=i,t=e.lib.WordArray,r=e.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n+=2){var a=t[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var r=e.length,i=[],n=0;n<r;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return t.create(i,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],a=0;a<r;a+=2){var o=n(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var r=e.length,i=[],a=0;a<r;a++)i[a>>>1]|=n(e.charCodeAt(a)<<16-a%2*16);return t.create(i,2*r)}}}(),i.enc.Utf16)},function(e,t,r){var i,n,a;e.exports=(a=r(0),n=(i=a).lib.WordArray,i.enc.Base64url={stringify:function(e,t=!0){var r=e.words,i=e.sigBytes,n=t?this._safe_map:this._map;e.clamp();for(var a=[],o=0;o<i;o+=3)for(var s=(r[o>>>2]>>>24-o%4*8&255)<<16|(r[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|r[o+2>>>2]>>>24-(o+2)%4*8&255,l=0;l<4&&o+.75*l<i;l++)a.push(n.charAt(s>>>6*(3-l)&63));var u=n.charAt(64);if(u)for(;a.length%4;)a.push(u);return a.join("")},parse:function(e,t=!0){var r=e.length,i=t?this._safe_map:this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<i.length;o++)a[i.charCodeAt(o)]=o}var s=i.charAt(64);if(s){var l=e.indexOf(s);-1!==l&&(r=l)}return function(e,t,r){for(var i=[],a=0,o=0;o<t;o++)if(o%4){var s=r[e.charCodeAt(o-1)]<<o%4*2,l=r[e.charCodeAt(o)]>>>6-o%4*2,u=s|l;i[a>>>2]|=u<<24-a%4*8,a++}return n.create(i,a)}(e,r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},a.enc.Base64url)},function(e,t,r){var i,n,a,o,s,l;e.exports=(l=r(0),r(13),n=(i=l).lib.WordArray,a=i.algo,o=a.SHA256,s=a.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),i.SHA224=o._createHelper(s),i.HmacSHA224=o._createHmacHelper(s),l.SHA224)},function(e,t,r){var i,n,a,o,s,l,u,h;e.exports=(h=r(0),r(6),r(14),n=(i=h).x64,a=n.Word,o=n.WordArray,s=i.algo,l=s.SHA512,u=s.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=l._doFinalize.call(this);return e.sigBytes-=16,e}}),i.SHA384=l._createHelper(u),i.HmacSHA384=l._createHmacHelper(u),h.SHA384)},function(e,t,r){var i;e.exports=(i=r(0),r(6),function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.x64.Word,s=t.algo,l=[],u=[],h=[];!function(){for(var e=1,t=0,r=0;r<24;r++){l[e+5*t]=(r+1)*(r+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,a=0;a<24;a++){for(var s=0,c=0,d=0;d<7;d++){if(1&n){var f=(1<<d)-1;f<32?c^=1<<f:s^=1<<f-32}128&n?n=n<<1^113:n<<=1}h[a]=o.create(s,c)}}();var c=[];!function(){for(var e=0;e<25;e++)c[e]=o.create()}();var d=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var a=e[t+2*n],o=e[t+2*n+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(R=r[n]).high^=o,R.low^=a}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++)f^=(R=r[d+5*g]).high,p^=R.low;var m=c[d];m.high=f,m.low=p}for(d=0;d<5;d++){var v=c[(d+4)%5],y=c[(d+1)%5],b=y.high,_=y.low;for(f=v.high^(b<<1|_>>>31),p=v.low^(_<<1|b>>>31),g=0;g<5;g++)(R=r[d+5*g]).high^=f,R.low^=p}for(var w=1;w<25;w++){var k=(R=r[w]).high,S=R.low,T=l[w];T<32?(f=k<<T|S>>>32-T,p=S<<T|k>>>32-T):(f=S<<T-32|k>>>64-T,p=k<<T-32|S>>>64-T);var E=c[u[w]];E.high=f,E.low=p}var x=c[0],A=r[0];for(x.high=A.high,x.low=A.low,d=0;d<5;d++)for(g=0;g<5;g++){var R=r[w=d+5*g],C=c[w],L=c[(d+1)%5+5*g],D=c[(d+2)%5+5*g];R.high=C.high^~L.high&D.high,R.low=C.low^~L.low&D.low}R=r[0];var O=h[s];R.high^=O.high,R.low^=O.low}},_doFinalize:function(){var t=this._data,r=t.words,i=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(e.ceil((i+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],h=0;h<l;h++){var c=o[h],d=c.high,f=c.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(d)}return new n.init(u,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=a._createHelper(d),t.HmacSHA3=a._createHmacHelper(d)}(Math),i.SHA3)},function(e,t,r){var i;e.exports=(i=r(0),
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=i,r=t.lib,n=r.WordArray,a=r.Hasher,o=t.algo,s=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=n.create([0,1518500249,1859775393,2400959708,2840853838]),d=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=a.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a,o,f,_,w,k,S,T,E,x,A,R=this._hash.words,C=c.words,L=d.words,D=s.words,O=l.words,I=u.words,F=h.words;for(k=a=R[0],S=o=R[1],T=f=R[2],E=_=R[3],x=w=R[4],r=0;r<80;r+=1)A=a+e[t+D[r]]|0,A+=r<16?p(o,f,_)+C[0]:r<32?g(o,f,_)+C[1]:r<48?m(o,f,_)+C[2]:r<64?v(o,f,_)+C[3]:y(o,f,_)+C[4],A=(A=b(A|=0,I[r]))+w|0,a=w,w=_,_=b(f,10),f=o,o=A,A=k+e[t+O[r]]|0,A+=r<16?y(S,T,E)+L[0]:r<32?v(S,T,E)+L[1]:r<48?m(S,T,E)+L[2]:r<64?g(S,T,E)+L[3]:p(S,T,E)+L[4],A=(A=b(A|=0,F[r]))+x|0,k=x,x=E,E=b(T,10),T=S,S=A;A=R[1]+f+E|0,R[1]=R[2]+_+x|0,R[2]=R[3]+w+k|0,R[3]=R[4]+a+S|0,R[4]=R[0]+o+T|0,R[0]=A},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,a=n.words,o=0;o<5;o++){var s=a[o];a[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function g(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function v(e,t,r){return e&r|t&~r}function y(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(f),t.HmacRIPEMD160=a._createHmacHelper(f)}(Math),i.RIPEMD160)},function(e,t,r){var i,n,a,o,s,l,u,h,c;e.exports=(c=r(0),r(8),r(9),n=(i=c).lib,a=n.Base,o=n.WordArray,s=i.algo,l=s.SHA1,u=s.HMAC,h=s.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=u.create(r.hasher,e),n=o.create(),a=o.create([1]),s=n.words,l=a.words,h=r.keySize,c=r.iterations;s.length<h;){var d=i.update(t).finalize(a);i.reset();for(var f=d.words,p=f.length,g=d,m=1;m<c;m++){g=i.finalize(g),i.reset();for(var v=g.words,y=0;y<p;y++)f[y]^=v[y]}n.concat(d),l[0]++}return n.sigBytes=4*h,n}}),i.PBKDF2=function(e,t,r){return h.create(r).compute(e,t)},c.PBKDF2)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.mode.CFB=function(){var e=i.lib.BlockCipherMode.extend();function t(e,t,r,i){var n,a=this._iv;a?(n=a.slice(0),this._iv=void 0):n=this._prevBlock,i.encryptBlock(n,0);for(var o=0;o<r;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize;t.call(this,e,r,n,i),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize,a=e.slice(r,r+n);t.call(this,e,r,n,i),this._prevBlock=a}}),e}(),i.mode.CFB)},function(e,t,r){var i,n,a;e.exports=(a=r(0),r(1),a.mode.CTR=(i=a.lib.BlockCipherMode.extend(),n=i.Encryptor=i.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._counter;n&&(a=this._counter=n.slice(0),this._iv=void 0);var o=a.slice(0);r.encryptBlock(o,0),a[i-1]=a[i-1]+1|0;for(var s=0;s<i;s++)e[t+s]^=o[s]}}),i.Decryptor=n,i),a.mode.CTR)},function(e,t,r){var i;e.exports=(i=r(0),r(1),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
i.mode.CTRGladman=function(){var e=i.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,i=255&e;255===t?(t=0,255===r?(r=0,255===i?i=0:++i):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=i}else e+=1<<24;return e}var r=e.Encryptor=e.extend({processBlock:function(e,r){var i=this._cipher,n=i.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(o);var s=o.slice(0);i.encryptBlock(s,0);for(var l=0;l<n;l++)e[r+l]^=s[l]}});return e.Decryptor=r,e}(),i.mode.CTRGladman)},function(e,t,r){var i,n,a;e.exports=(a=r(0),r(1),a.mode.OFB=(i=a.lib.BlockCipherMode.extend(),n=i.Encryptor=i.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._keystream;n&&(a=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var o=0;o<i;o++)e[t+o]^=a[o]}}),i.Decryptor=n,i),a.mode.OFB)},function(e,t,r){var i,n;e.exports=(n=r(0),r(1),n.mode.ECB=((i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),i.Decryptor=i.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),i),n.mode.ECB)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=4*t,n=i-r%i,a=r+n-1;e.clamp(),e.words[a>>>2]|=n<<24-a%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Ansix923)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.pad.Iso10126={pad:function(e,t){var r=4*t,n=r-e.sigBytes%r;e.concat(i.lib.WordArray.random(n-1)).concat(i.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Iso10126)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.pad.Iso97971)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},i.pad.ZeroPadding)},function(e,t,r){var i;e.exports=(i=r(0),r(1),i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding)},function(e,t,r){var i,n,a,o;e.exports=(o=r(0),r(1),n=(i=o).lib.CipherParams,a=i.enc.Hex,i.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return n.create({ciphertext:t})}},o.format.Hex)},function(e,t,r){var i;e.exports=(i=r(0),r(3),r(4),r(2),r(1),function(){var e=i,t=e.lib.BlockCipher,r=e.algo,n=[],a=[],o=[],s=[],l=[],u=[],h=[],c=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,a[p]=r;var g=e[r],m=e[g],v=e[m],y=257*e[p]^16843008*p;o[r]=y<<24|y>>>8,s[r]=y<<16|y>>>16,l[r]=y<<8|y>>>24,u[r]=y,y=16843009*v^65537*m^257*g^16843008*r,h[p]=y<<24|y>>>8,c[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,f[p]=y,r?(r=g^e[e[e[v^g]]],i^=e[e[i]]):r=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),a=this._keySchedule=[],o=0;o<i;o++)o<r?a[o]=t[o]:(u=a[o-1],o%r?r>6&&o%r==4&&(u=n[u>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u]):(u=n[(u=u<<8|u>>>24)>>>24]<<24|n[u>>>16&255]<<16|n[u>>>8&255]<<8|n[255&u],u^=p[o/r|0]<<24),a[o]=a[o-r]^u);for(var s=this._invKeySchedule=[],l=0;l<i;l++){if(o=i-l,l%4)var u=a[o];else u=a[o-4];s[l]=l<4||o<=4?u:h[n[u>>>24]]^c[n[u>>>16&255]]^d[n[u>>>8&255]]^f[n[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,l,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,h,c,d,f,a),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,a,o,s){for(var l=this._nRounds,u=e[t]^r[0],h=e[t+1]^r[1],c=e[t+2]^r[2],d=e[t+3]^r[3],f=4,p=1;p<l;p++){var g=i[u>>>24]^n[h>>>16&255]^a[c>>>8&255]^o[255&d]^r[f++],m=i[h>>>24]^n[c>>>16&255]^a[d>>>8&255]^o[255&u]^r[f++],v=i[c>>>24]^n[d>>>16&255]^a[u>>>8&255]^o[255&h]^r[f++],y=i[d>>>24]^n[u>>>16&255]^a[h>>>8&255]^o[255&c]^r[f++];u=g,h=m,c=v,d=y}g=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^r[f++],m=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^r[f++],v=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^r[f++],y=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^r[f++],e[t]=g,e[t+1]=m,e[t+2]=v,e[t+3]=y},keySize:8});e.AES=t._createHelper(g)}(),i.AES)},function(e,t,r){var i;e.exports=(i=r(0),r(3),r(4),r(2),r(1),function(){var e=i,t=e.lib,r=t.WordArray,n=t.BlockCipher,a=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],c=a.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var i=o[r]-1;t[r]=e[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],a=0;a<16;a++){var u=n[a]=[],h=l[a];for(r=0;r<24;r++)u[r/6|0]|=t[(s[r]-1+h)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(s[r+24]-1+h)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var c=this._invSubKeys=[];for(r=0;r<16;r++)c[r]=n[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],a=this._lBlock,o=this._rBlock,s=0,l=0;l<8;l++)s|=u[l][((o^n[l])&h[l])>>>0];this._lBlock=o,this._rBlock=a^s}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=n._createHelper(c);var p=a.TripleDES=n.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),i=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=c.createEncryptor(r.create(t)),this._des2=c.createEncryptor(r.create(i)),this._des3=c.createEncryptor(r.create(n))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(p)}(),i.TripleDES)},function(e,t,r){var i;e.exports=(i=r(0),r(3),r(4),r(2),r(1),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,n=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var a=0;n<256;n++){var o=n%r,s=t[o>>>2]>>>24-o%4*8&255;a=(a+i[n]+s)%256;var l=i[n];i[n]=i[a],i[a]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[r],e[r]=a,i|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,i}e.RC4=t._createHelper(n);var o=r.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(o)}(),i.RC4)},function(e,t,r){var i;e.exports=(i=r(0),r(3),r(4),r(2),r(1),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,n=[],a=[],o=[],s=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=u>>>16|4294901760&h,d=h<<16|65535&u;for(n[0]^=u,n[1]^=c,n[2]^=h,n[3]^=d,n[4]^=u,n[5]^=c,n[6]^=h,n[7]^=d,r=0;r<4;r++)l.call(this)}},_doProcessBlock:function(e,t){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,s=i>>>16,l=((n*n>>>17)+n*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);o[r]=l^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),i.Rabbit)},function(e,t,r){var i;e.exports=(i=r(0),r(3),r(4),r(2),r(1),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,n=[],a=[],o=[],s=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=u>>>16|4294901760&h,d=h<<16|65535&u;for(i[0]^=u,i[1]^=c,i[2]^=h,i[3]^=d,i[4]^=u,i[5]^=c,i[6]^=h,i[7]^=d,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,s=i>>>16,l=((n*n>>>17)+n*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);o[r]=l^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),i.RabbitLegacy)},function(e,t,r){(function(t,r,i,n){e.exports=function e(t,r,i){function n(o,s){if(!r[o]){if(!t[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};t[o][0].call(u.exports,(function(e){return n(t[o][1][e]||e)}),u,u.exports,e,t,r,i)}return r[o].exports}for(var a=!1,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,o,s,l,u,h=[],c=0,d=e.length,f=d,p="string"!==i.getTypeOf(e);c<e.length;)f=d-c,n=p?(t=e[c++],r=c<d?e[c++]:0,c<d?e[c++]:0):(t=e.charCodeAt(c++),r=c<d?e.charCodeAt(c++):0,c<d?e.charCodeAt(c++):0),o=t>>2,s=(3&t)<<4|r>>4,l=1<f?(15&r)<<2|n>>6:64,u=2<f?63&n:64,h.push(a.charAt(o)+a.charAt(s)+a.charAt(l)+a.charAt(u));return h.join("")},r.decode=function(e){var t,r,i,o,s,l,u=0,h=0,c="data:";if(e.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&f--,e.charAt(e.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=n.uint8array?new Uint8Array(0|f):new Array(0|f);u<e.length;)t=a.indexOf(e.charAt(u++))<<2|(o=a.indexOf(e.charAt(u++)))>>4,r=(15&o)<<4|(s=a.indexOf(e.charAt(u++)))>>2,i=(3&s)<<6|(l=a.indexOf(e.charAt(u++))),d[h++]=t,64!==s&&(d[h++]=r),64!==l&&(d[h++]=i);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var i=e("./external"),n=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,t,r,i,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=i,this.compressedContent=n}s.prototype={getContentWorker:function(){var e=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var i=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var i=e("./utils"),n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,r,i){var a=n,o=0+r;e^=-1;for(var s=0;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,r,i){var a=n,o=0+r;e^=-1;for(var s=0;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var i;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),a=e("./utils"),o=e("./stream/GenericWorker"),s=i?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",a.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new l("Deflate",e)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function i(e,t){var r,i="";for(r=0;r<t;r++)i+=String.fromCharCode(255&e),e>>>=8;return i}function n(e,t,r,n,o,h){var c,d,f=e.file,p=e.compression,g=h!==s.utf8encode,m=a.transformTo("string",h(f.name)),v=a.transformTo("string",s.utf8encode(f.name)),y=f.comment,b=a.transformTo("string",h(y)),_=a.transformTo("string",s.utf8encode(y)),w=v.length!==f.name.length,k=_.length!==y.length,S="",T="",E="",x=f.dir,A=f.date,R={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(R.crc32=e.crc32,R.compressedSize=e.compressedSize,R.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),g||!w&&!k||(C|=2048);var L=0,D=0;x&&(L|=16),"UNIX"===o?(D=798,L|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(f.unixPermissions,x)):(D=20,L|=function(e){return 63&(e||0)}(f.dosPermissions)),c=A.getUTCHours(),c<<=6,c|=A.getUTCMinutes(),c<<=5,c|=A.getUTCSeconds()/2,d=A.getUTCFullYear()-1980,d<<=4,d|=A.getUTCMonth()+1,d<<=5,d|=A.getUTCDate(),w&&(T=i(1,1)+i(l(m),4)+v,S+="up"+i(T.length,2)+T),k&&(E=i(1,1)+i(l(b),4)+_,S+="uc"+i(E.length,2)+E);var O="";return O+="\n\0",O+=i(C,2),O+=p.magic,O+=i(c,2),O+=i(d,2),O+=i(R.crc32,4),O+=i(R.compressedSize,4),O+=i(R.uncompressedSize,4),O+=i(m.length,2),O+=i(S.length,2),{fileRecord:u.LOCAL_FILE_HEADER+O+m+S,dirRecord:u.CENTRAL_FILE_HEADER+i(D,2)+O+i(b.length,2)+"\0\0\0\0"+i(L,4)+i(n,4)+m+S+b}}var a=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),u=e("../signature");function h(e,t,r,i){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,o),h.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-i-1))/r:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=function(e,t,r,n,o){var s=a.transformTo("string",o(n));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(r,4)+i(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var i=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var a=new n(t.streamFiles,r,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,r){o++;var n=function(e,t){var r=e||t,n=i[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,u=r.date;r._compressWorker(n,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(a)})),a.entriesCount=o}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./external"),a=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new n.Promise((function(t,r){var i=e.decompressed.getContentWorker().pipe(new s);i.on("error",(function(e){r(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new o(t);return r.load(e),r})).then((function(e){var r=[n.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var a=0;a<i.length;a++)r.push(u(i[a]));return n.Promise.all(r)})).then((function(e){for(var n=e.shift(),a=n.files,o=0;o<a.length;o++){var s=a[o],l=s.fileNameStr,u=i.resolve(s.fileNameStr);r.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(r.file(u).unsafeOriginalName=l)}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../stream/GenericWorker");function a(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(a,n),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",(function(e,t){n.push(e)||n._helper.pause(),r&&r(t)})).on("error",(function(e){n.emit("error",e)})).on("end",(function(){n.push(null)}))}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,r,i){"use strict";r.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function i(e,t,r){var i,n=a.getTypeOf(t),s=a.extend(r||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(i=p(e))&&m.call(this,i,!0);var c,v="string"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!v),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",n="string"),c=t instanceof u||t instanceof o?t:d.isNode&&d.isStream(t)?new f(e,t):a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new h(e,c,s);this.files[e]=y}var n=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),h=e("./zipObject"),c=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:l.createFolders,e=g(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,i;for(t in this.files)i=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,i)},filter:function(e){var t=[];return this.forEach((function(r,i){e(r,i)&&t.push(i)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,r),this;if(v(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=m.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";t=c.generateWorker(this,r,i)}catch(e){(t=new o("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===i&&this.data[a+3]===n)return a-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&i===a[2]&&n===a[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var i=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,r){"use strict";var i=e("./Uint8ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var i=e("./ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../support"),a=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new l(i.transformTo("uint8array",e)):new a(i.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../utils");function a(e){i.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(a,i),a.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(a,n),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(a,n),a.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,r,i){"use strict";var n=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),l=e("../support"),u=e("../external"),h=null;if(l.nodestream)try{h=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t,r){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=t,this._mimeType=r,n.checkSupport(i),this._worker=e.pipe(new a(i)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}c.prototype={accumulate:function(e){return function(e,r){return new u.Promise((function(i,a){var o=[],l=e._internalType,u=e._outputType,h=e._mimeType;e.on("data",(function(e,t){o.push(e),r&&r(t)})).on("error",(function(e){o=[],a(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(u,function(e,r){var i,n=0,a=null,o=0;for(i=0;i<r.length;i++)o+=r[i].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(a=new Uint8Array(o),i=0;i<r.length;i++)a.set(r[i],n),n+=r[i].length;return a;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,o),h);i(e)}catch(e){a(e)}o=[]})).resume()}))}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),i.blob=0===a.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var i=e("./utils"),n=e("./support"),a=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(e){return n.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,r,i,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),a=o=0;o<l;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t}(e)},r.utf8decode=function(e){return n.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,n,a,o=e.length,l=new Array(2*o);for(t=r=0;t<o;)if((n=e[t++])<128)l[r++]=n;else if(4<(a=s[n]))l[r++]=65533,t+=a-1;else{for(n&=2===a?31:3===a?15:7;1<a&&t<o;)n=n<<6|63&e[t++],a--;1<a?l[r++]=65533:n<65536?l[r++]=n:(n-=65536,l[r++]=55296|n>>10&1023,l[r++]=56320|1023&n)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),i.applyFromCharCode(l)}(e=i.transformTo(n.uint8array?"uint8array":"array",e))},i.inherits(u,o),u.prototype.processChunk=function(e){var t=i.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}(t),l=t;o!==t.length&&(n.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:r.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,i.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){"use strict";var n=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),s=e("./external");function l(e){return e}function u(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,r){var i=[],n=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;n<a;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,a)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,a)))),n+=r;return i.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var t=65536,r=i.getTypeOf(e),n=!0;if("uint8array"===r?n=h.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=h.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return h.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return h.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}i.applyFromCharCode=c;var f={};f.string={string:l,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,o.allocBuffer(e.length))}},f.array={string:c,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:l},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var r=i.getTypeOf(t);return f[r][e](t)},i.resolve=function(e){for(var t=e.split("/"),r=[],i=0;i<t.length;i++){var n=t[i];"."===n||""===n&&0!==i&&i!==t.length-1||(".."===n?r.pop():r.push(n))}return r.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,r,i="";for(r=0;r<(e||"").length;r++)i+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return i},i.delay=function(e,t,i){r((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},i.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},i.prepareContent=function(e,t,r,o,l){return s.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,r){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){r(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(t){var h=i.getTypeOf(t);return h?("arraybuffer"===h?t=i.transformTo("uint8array",t):"string"===h&&(l?t=a.decode(t):r&&!0!==o&&(t=function(e){return u(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),a=e("./signature"),o=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=t-r;if(0<i)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),a=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,i,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),r=e.readInt(2),i=e.readData(r),this.extraFields[t]={id:t,length:r,value:i};e.setIndex(n)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var a=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function i(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var n=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)i.prototype[u[c]]=h;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,i,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var a=0,o=new n(h),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),r=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,r=function(){l.port2.postMessage(0)}}var u=[];function h(){var e,t;i=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}i=!1}t.exports=function(e){1!==u.push(e)||i||r()}}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var i=e("immediate");function n(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&f(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function c(e,t,r){i((function(){var i;try{i=t(r)}catch(i){return a.reject(e,i)}i===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,i)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var r=!1;function i(t){r||(r=!0,a.reject(e,t))}function n(t){r||(r=!0,a.resolve(e,t))}var o=p((function(){t(n,i)}));"error"===o.status&&i(o.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(n);return this.state!==l?c(r,this.state===s?e:t,this.outcome):this.queue.push(new h(r,e,t)),r},h.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){c(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){a.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){c(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return a.reject(e,r.value);var i=r.value;if(i)f(e,i);else{e.state=s,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:a.resolve(new this(n),e)},u.reject=function(e){var t=new this(n);return a.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var o=new Array(r),s=0,l=-1,u=new this(n);++l<r;)h(e[l],l);return u;function h(e,n){t.resolve(e).then((function(e){o[n]=e,++s!==r||i||(i=!0,a.resolve(u,o))}),(function(e){i||(i=!0,a.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var i,o=-1,s=new this(n);++o<t;)i=e[o],this.resolve(i).then((function(e){r||(r=!0,a.resolve(s,e))}),(function(e){r||(r=!0,a.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,r){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var i=e("./zlib/deflate"),n=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(o[r]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=i.deflateSetDictionary(this.strm,h)))throw new Error(o[r]);this._dict_set=!0}}function h(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}u.prototype.push=function(e,t){var r,o,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(u),s.next_out=0,s.avail_out=u),1!==(r=i.deflate(s,o))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==r);return 4===o?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==o||(this.onEnd(0),!(s.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=u,r.deflate=h,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var i=e("./zlib/inflate"),n=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),h=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new c(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}c.prototype.push=function(e,t){var r,s,l,u,c,d,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new n.Buf8(p),f.next_out=0,f.avail_out=p),(r=i.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&g&&(d="string"==typeof g?a.string2buf(g):"[object ArrayBuffer]"===h.call(g)?new Uint8Array(g):g,r=i.inflateSetDictionary(this.strm,d)),r===o.Z_BUF_ERROR&&!0===m&&(r=o.Z_OK,m=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&r!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),u=f.next_out-l,c=a.buf2string(f.output,l),f.next_out=u,f.avail_out=p-u,u&&n.arraySet(f.output,f.output,l,u,0),this.onData(c)):this.onData(n.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=c,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,o;for(t=i=0,r=e.length;t<r;t++)i+=e[t].length;for(o=new Uint8Array(i),t=n=0,r=e.length;t<r;t++)a=e[t],o.set(a,n),n+=a.length;return o}},a={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(i)},{}],42:[function(e,t,r){"use strict";var i=e("./common"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new i.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,r.string2buf=function(e){var t,r,n,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(l),a=o=0;o<l;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,n,a,s=t||e.length,u=new Array(2*s);for(r=i=0;r<s;)if((n=e[r++])<128)u[i++]=n;else if(4<(a=o[n]))u[i++]=65533,r+=a-1;else{for(n&=2===a?31:3===a?15:7;1<a&&r<s;)n=n<<6|63&e[r++],a--;1<a?u[i++]=65533:n<65536?u[i++]=n:(n-=65536,u[i++]=55296|n>>10&1023,u[i++]=56320|1023&n)}return l(u,i)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;a=a+(n=n+t[i++]|0)|0,--o;);n%=65521,a%=65521}return n|a<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var a=i,o=n+r;e^=-1;for(var s=n;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,r){"use strict";var i,n=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),l=e("./messages"),u=-2,h=258,c=262,d=113;function f(e,t){return e.msg=l[t],t}function p(e){return(e<<1)-(4<e?9:0)}function g(e){for(var t=e.length;0<=--t;)e[t]=0}function m(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function v(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,m(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _(e,t){var r,i,n=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-c?e.strstart-(e.w_size-c):0,u=e.window,d=e.w_mask,f=e.prev,p=e.strstart+h,g=u[a+o-1],m=u[a+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+o]===m&&u[r+o-1]===g&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<p);if(i=h-(p-a),a=p-h,o<i){if(e.match_start=t,s<=(o=i))break;g=u[a+o-1],m=u[a+o]}}}while((t=f[t&d])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead}function w(e){var t,r,i,a,l,u,h,d,f,p,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-c)){for(n.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;i=e.head[--t],e.head[t]=g<=i?i-g:0,--r;);for(t=r=g;i=e.prev[--t],e.prev[t]=g<=i?i-g:0,--r;);a+=g}if(0===e.strm.avail_in)break;if(u=e.strm,h=e.window,d=e.strstart+e.lookahead,p=void 0,(f=a)<(p=u.avail_in)&&(p=f),r=0===p?0:(u.avail_in-=p,n.arraySet(h,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=o(u.adler,h,p,d):2===u.state.wrap&&(u.adler=s(u.adler,h,p,d)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<c&&0!==e.strm.avail_in)}function k(e,t){for(var r,i;;){if(e.lookahead<c){if(w(e),e.lookahead<c&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-c&&(e.match_length=_(e,r)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function S(e,t){for(var r,i,n;;){if(e.lookahead<c){if(w(e),e.lookahead<c&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-c&&(e.match_length=_(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function T(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):f(e,u)}function A(e){var t=x(e);return 0===t&&function(e){e.window_size=2*e.w_size,g(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function R(e,t,r,i,a,o){if(!e)return u;var s=1;if(-1===t&&(t=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),a<1||9<a||8!==r||i<8||15<i||t<0||9<t||o<0||4<o)return f(e,u);8===i&&(i=9);var l=new E;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=r,A(e)}i=[new T(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-c&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new T(4,4,8,4,k),new T(4,5,16,8,k),new T(4,6,32,32,k),new T(4,4,16,16,S),new T(8,16,32,32,S),new T(8,16,128,128,S),new T(8,32,128,256,S),new T(32,128,258,1024,S),new T(32,258,258,4096,S)],r.deflateInit=function(e,t){return R(e,t,8,15,8,0)},r.deflateInit2=R,r.deflateReset=A,r.deflateResetKeep=x,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},r.deflate=function(e,t){var r,n,o,l;if(!e||!e.state||5<t||t<0)return e?f(e,u):u;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return f(e,0===e.avail_out?-5:u);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,y(n,31),y(n,139),y(n,8),n.gzhead?(y(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),y(n,255&n.gzhead.time),y(n,n.gzhead.time>>8&255),y(n,n.gzhead.time>>16&255),y(n,n.gzhead.time>>24&255),y(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),y(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(y(n,255&n.gzhead.extra.length),y(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(y(n,0),y(n,0),y(n,0),y(n,0),y(n,0),y(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),y(n,3),n.status=d);else{var c=8+(n.w_bits-8<<4)<<8;c|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(c|=32),c+=31-c%31,n.status=d,b(n,c),0!==n.strstart&&(b(n,e.adler>>>16),b(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),m(e),o=n.pending,n.pending!==n.pending_buf_size));)y(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),m(e),o=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,y(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),0===l&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),m(e),o=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,y(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>o&&(e.adler=s(e.adler,n.pending_buf,n.pending-o,o)),0===l&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&m(e),n.pending+2<=n.pending_buf_size&&(y(n,255&e.adler),y(n,e.adler>>8&255),e.adler=0,n.status=d)):n.status=d),0!==n.pending){if(m(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(r)&&4!==t)return f(e,-5);if(666===n.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var _=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,o,s=e.window;;){if(e.lookahead<=h){if(w(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(i=s[n=e.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){o=e.strstart+h;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<o);e.match_length=h-(o-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==_&&4!==_||(n.status=666),1===_||3===_)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===_&&(1===t?a._tr_align(n):5!==t&&(a._tr_stored_block(n,0,0,!1),3===t&&(g(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),m(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(y(n,255&e.adler),y(n,e.adler>>8&255),y(n,e.adler>>16&255),y(n,e.adler>>24&255),y(n,255&e.total_in),y(n,e.total_in>>8&255),y(n,e.total_in>>16&255),y(n,e.total_in>>24&255)):(b(n,e.adler>>>16),b(n,65535&e.adler)),m(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?f(e,u):(e.state=null,t===d?f(e,-3):0):u},r.deflateSetDictionary=function(e,t){var r,i,a,s,l,h,c,d,f=t.length;if(!e||!e.state)return u;if(2===(s=(r=e.state).wrap)||1===s&&42!==r.status||r.lookahead)return u;for(1===s&&(e.adler=o(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(g(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new n.Buf8(r.w_size),n.arraySet(d,t,f-r.w_size,r.w_size,0),t=d,f=r.w_size),l=e.avail_in,h=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,w(r);r.lookahead>=3;){for(i=r.strstart,a=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--a;);r.strstart=i,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=h,e.input=c,e.avail_in=l,r.wrap=s,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,i,n,a,o,s,l,u,h,c,d,f,p,g,m,v,y,b,_,w,k,S,T,E,x;r=e.state,i=e.next_in,E=e.input,n=i+(e.avail_in-5),a=e.next_out,x=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=r.dmax,u=r.wsize,h=r.whave,c=r.wnext,d=r.window,f=r.hold,p=r.bits,g=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),b=g[f&v];t:for(;;){if(f>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))x[a++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(f&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(f+=E[i++]<<p,p+=8),w+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),b=m[f&y];r:for(;;){if(f>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=m[(65535&b)+(f&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(k=65535&b,p<(_&=15)&&(f+=E[i++]<<p,(p+=8)<_&&(f+=E[i++]<<p,p+=8)),l<(k+=f&(1<<_)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=_,p-=_,(_=a-o)<k){if(h<(_=k-_)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(T=d,(S=0)===c){if(S+=u-_,_<w){for(w-=_;x[a++]=d[S++],--_;);S=a-k,T=x}}else if(c<_){if(S+=u+c-_,(_-=c)<w){for(w-=_;x[a++]=d[S++],--_;);if(S=0,c<w){for(w-=_=c;x[a++]=d[S++],--_;);S=a-k,T=x}}}else if(S+=c-_,_<w){for(w-=_;x[a++]=d[S++],--_;);S=a-k,T=x}for(;2<w;)x[a++]=T[S++],x[a++]=T[S++],x[a++]=T[S++],w-=3;w&&(x[a++]=T[S++],1<w&&(x[a++]=T[S++]))}else{for(S=a-k;x[a++]=x[S++],x[a++]=x[S++],x[a++]=x[S++],2<(w-=3););w&&(x[a++]=x[S++],1<w&&(x[a++]=x[S++]))}break}}break}}while(i<n&&a<s);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=f,r.bits=p}},{}],49:[function(e,t,r){"use strict";var i=e("../utils/common"),n=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),l=-2;function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,c(e)):l}function f(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,d(e))):l}function p(e,t){var r,i;return e?(i=new h,(e.state=i).window=null,0!==(r=f(e,t))&&(e.state=null),r):l}var g,m,v=!0;function y(e){if(v){var t;for(g=new i.Buf32(512),m=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,m,0,e.work,{bits:5}),v=!1}e.lencode=g,e.lenbits=9,e.distcode=m,e.distbits=5}function b(e,t,r,n){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),n>=o.wsize?(i.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n<(a=o.wsize-o.wnext)&&(a=n),i.arraySet(o.window,t,r-n,a,o.wnext),(n-=a)?(i.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}r.inflateReset=d,r.inflateReset2=f,r.inflateResetKeep=c,r.inflateInit=function(e){return p(e,15)},r.inflateInit2=p,r.inflate=function(e,t){var r,h,c,d,f,p,g,m,v,_,w,k,S,T,E,x,A,R,C,L,D,O,I,F,P=0,B=new i.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(r=e.state).mode&&(r.mode=13),f=e.next_out,c=e.output,g=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,m=r.hold,v=r.bits,_=p,w=g,O=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;v<16;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(2&r.wrap&&35615===m){B[r.check=0]=255&m,B[1]=m>>>8&255,r.check=a(r.check,B,2,0),v=m=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&m)<<8)+(m>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&m)){e.msg="unknown compression method",r.mode=30;break}if(v-=4,D=8+(15&(m>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&m?10:12,v=m=0;break;case 2:for(;v<16;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(r.flags=m,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=m>>8&1),512&r.flags&&(B[0]=255&m,B[1]=m>>>8&255,r.check=a(r.check,B,2,0)),v=m=0,r.mode=3;case 3:for(;v<32;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.head&&(r.head.time=m),512&r.flags&&(B[0]=255&m,B[1]=m>>>8&255,B[2]=m>>>16&255,B[3]=m>>>24&255,r.check=a(r.check,B,4,0)),v=m=0,r.mode=4;case 4:for(;v<16;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.head&&(r.head.xflags=255&m,r.head.os=m>>8),512&r.flags&&(B[0]=255&m,B[1]=m>>>8&255,r.check=a(r.check,B,2,0)),v=m=0,r.mode=5;case 5:if(1024&r.flags){for(;v<16;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.length=m,r.head&&(r.head.extra_len=m),512&r.flags&&(B[0]=255&m,B[1]=m>>>8&255,r.check=a(r.check,B,2,0)),v=m=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(k=r.length)&&(k=p),k&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,h,d,k,D)),512&r.flags&&(r.check=a(r.check,h,k,d)),p-=k,d+=k,r.length-=k),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break e;for(k=0;D=h[d+k++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&k<p;);if(512&r.flags&&(r.check=a(r.check,h,k,d)),p-=k,d+=k,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break e;for(k=0;D=h[d+k++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&k<p;);if(512&r.flags&&(r.check=a(r.check,h,k,d)),p-=k,d+=k,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;v<16;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(m!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}v=m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;v<32;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}e.adler=r.check=u(m),v=m=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=f,e.avail_out=g,e.next_in=d,e.avail_in=p,r.hold=m,r.bits=v,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){m>>>=7&v,v-=7&v,r.mode=27;break}for(;v<3;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}switch(r.last=1&m,v-=1,3&(m>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6!==t)break;m>>>=2,v-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}m>>>=2,v-=2;break;case 14:for(m>>>=7&v,v-=7&v;v<32;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if((65535&m)!=(m>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&m,v=m=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(k=r.length){if(p<k&&(k=p),g<k&&(k=g),0===k)break e;i.arraySet(c,h,d,k,f),p-=k,d+=k,g-=k,f+=k,r.length-=k;break}r.mode=12;break;case 17:for(;v<14;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(r.nlen=257+(31&m),m>>>=5,v-=5,r.ndist=1+(31&m),m>>>=5,v-=5,r.ncode=4+(15&m),m>>>=4,v-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;v<3;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.lens[M[r.have++]]=7&m,m>>>=3,v-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},O=s(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,O){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;x=(P=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,A=65535&P,!((E=P>>>24)<=v);){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(A<16)m>>>=E,v-=E,r.lens[r.have++]=A;else{if(16===A){for(F=E+2;v<F;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(m>>>=E,v-=E,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],k=3+(3&m),m>>>=2,v-=2}else if(17===A){for(F=E+3;v<F;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}v-=E,D=0,k=3+(7&(m>>>=E)),m>>>=3,v-=3}else{for(F=E+7;v<F;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}v-=E,D=0,k=11+(127&(m>>>=E)),m>>>=7,v-=7}if(r.have+k>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;k--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,I={bits:r.lenbits},O=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,O){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},O=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,O){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=p&&258<=g){e.next_out=f,e.avail_out=g,e.next_in=d,e.avail_in=p,r.hold=m,r.bits=v,o(e,w),f=e.next_out,c=e.output,g=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,m=r.hold,v=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;x=(P=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,A=65535&P,!((E=P>>>24)<=v);){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(x&&0==(240&x)){for(R=E,C=x,L=A;x=(P=r.lencode[L+((m&(1<<R+C)-1)>>R)])>>>16&255,A=65535&P,!(R+(E=P>>>24)<=v);){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}m>>>=R,v-=R,r.back+=R}if(m>>>=E,v-=E,r.back+=E,r.length=A,0===x){r.mode=26;break}if(32&x){r.back=-1,r.mode=12;break}if(64&x){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&x,r.mode=22;case 22:if(r.extra){for(F=r.extra;v<F;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,v-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;x=(P=r.distcode[m&(1<<r.distbits)-1])>>>16&255,A=65535&P,!((E=P>>>24)<=v);){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(0==(240&x)){for(R=E,C=x,L=A;x=(P=r.distcode[L+((m&(1<<R+C)-1)>>R)])>>>16&255,A=65535&P,!(R+(E=P>>>24)<=v);){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}m>>>=R,v-=R,r.back+=R}if(m>>>=E,v-=E,r.back+=E,64&x){e.msg="invalid distance code",r.mode=30;break}r.offset=A,r.extra=15&x,r.mode=24;case 24:if(r.extra){for(F=r.extra;v<F;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,v-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===g)break e;if(k=w-g,r.offset>k){if((k=r.offset-k)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}S=k>r.wnext?(k-=r.wnext,r.wsize-k):r.wnext-k,k>r.length&&(k=r.length),T=r.window}else T=c,S=f-r.offset,k=r.length;for(g<k&&(k=g),g-=k,r.length-=k;c[f++]=T[S++],--k;);0===r.length&&(r.mode=21);break;case 26:if(0===g)break e;c[f++]=r.length,g--,r.mode=21;break;case 27:if(r.wrap){for(;v<32;){if(0===p)break e;p--,m|=h[d++]<<v,v+=8}if(w-=g,e.total_out+=w,r.total+=w,w&&(e.adler=r.check=r.flags?a(r.check,c,w,f-w):n(r.check,c,w,f-w)),w=g,(r.flags?m:u(m))!==r.check){e.msg="incorrect data check",r.mode=30;break}v=m=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;v<32;){if(0===p)break e;p--,m+=h[d++]<<v,v+=8}if(m!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}v=m=0}r.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=f,e.avail_out=g,e.next_in=d,e.avail_in=p,r.hold=m,r.bits=v,(r.wsize||w!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&b(e,e.output,e.next_out,w-e.avail_out)?(r.mode=31,-4):(_-=e.avail_in,w-=e.avail_out,e.total_in+=_,e.total_out+=w,r.total+=w,r.wrap&&w&&(e.adler=r.check=r.flags?a(r.check,c,w,e.next_out-w):n(r.check,c,w,e.next_out-w)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==_&&0===w||4===t)&&0===O&&(O=-5),O)},r.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?l:((r.head=t).done=!1,0):l},r.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?l:11===r.mode&&n(1,t,i,0)!==r.check?-3:b(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):l},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var i=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,u,h,c,d){var f,p,g,m,v,y,b,_,w,k=d.bits,S=0,T=0,E=0,x=0,A=0,R=0,C=0,L=0,D=0,O=0,I=null,F=0,P=new i.Buf16(16),B=new i.Buf16(16),M=null,U=0;for(S=0;S<=15;S++)P[S]=0;for(T=0;T<l;T++)P[t[r+T]]++;for(A=k,x=15;1<=x&&0===P[x];x--);if(x<A&&(A=x),0===x)return u[h++]=20971520,u[h++]=20971520,d.bits=1,0;for(E=1;E<x&&0===P[E];E++);for(A<E&&(A=E),S=L=1;S<=15;S++)if(L<<=1,(L-=P[S])<0)return-1;if(0<L&&(0===e||1!==x))return-1;for(B[1]=0,S=1;S<15;S++)B[S+1]=B[S]+P[S];for(T=0;T<l;T++)0!==t[r+T]&&(c[B[t[r+T]]++]=T);if(y=0===e?(I=M=c,19):1===e?(I=n,F-=257,M=a,U-=257,256):(I=o,M=s,-1),S=E,v=h,C=T=O=0,g=-1,m=(D=1<<(R=A))-1,1===e&&852<D||2===e&&592<D)return 1;for(;;){for(b=S-C,w=c[T]<y?(_=0,c[T]):c[T]>y?(_=M[U+c[T]],I[F+c[T]]):(_=96,0),f=1<<S-C,E=p=1<<R;u[v+(O>>C)+(p-=f)]=b<<24|_<<16|w|0,0!==p;);for(f=1<<S-1;O&f;)f>>=1;if(0!==f?(O&=f-1,O+=f):O=0,T++,0==--P[S]){if(S===x)break;S=t[r+c[T]]}if(A<S&&(O&m)!==g){for(0===C&&(C=A),v+=E,L=1<<(R=S-C);R+C<x&&!((L-=P[R+C])<=0);)R++,L<<=1;if(D+=1<<R,1===e&&852<D||2===e&&592<D)return 1;u[g=O&m]=A<<24|R<<16|v-h|0}}return 0!==O&&(u[v+O]=S-C<<24|64<<16|0),d.bits=A,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var i=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var a=256,o=286,s=30,l=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);n(f);var p=new Array(60);n(p);var g=new Array(512);n(g);var m=new Array(256);n(m);var v=new Array(29);n(v);var y,b,_,w=new Array(s);function k(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function T(e){return e<256?g[e]:g[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function A(e,t,r){x(e,r[2*t],r[2*t+1])}function R(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function C(e,t,r){var i,n,a=new Array(16),o=0;for(i=1;i<=l;i++)a[i]=o=o+r[i-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=R(a[s]++,s))}}function L(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){8<e.bi_valid?E(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}function I(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&O(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!O(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function F(e,t,r){var i,n,o,s,l=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0===i?A(e,n,t):(A(e,(o=m[n])+a+1,t),0!==(s=u[o])&&x(e,n-=v[o],s),A(e,o=T(--i),r),0!==(s=h[o])&&x(e,i-=w[o],s)),l<e.last_lit;);A(e,256,t)}function P(e,t){var r,i,n,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=o[2*n+1]);for(t.max_code=h,r=e.heap_len>>1;1<=r;r--)I(e,a,r);for(n=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],I(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,I(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,o,s,u=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(a=0;a<=l;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)g<(a=u[2*u[2*(i=e.heap[r])+1]+1]+1)&&(a=g,m++),u[2*i+1]=a,h<i||(e.bl_count[a]++,o=0,p<=i&&(o=f[i-p]),s=u[2*i],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(c[2*i+1]+o)));if(0!==m){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,m-=2}while(0<m);for(a=g;0!==a;a--)for(i=e.bl_count[a];0!==i;)h<(n=e.heap[--r])||(u[2*n+1]!==a&&(e.opt_len+=(a-u[2*n+1])*u[2*n],u[2*n+1]=a),i--)}}(e,t),C(a,h,e.bl_count)}function B(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=o,o=t[2*(i+1)+1],++s<l&&n===o||(s<u?e.bl_tree[2*n]+=s:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=n,u=(s=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4))}function M(e,t,r){var i,n,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),i=0;i<=r;i++)if(n=o,o=t[2*(i+1)+1],!(++s<l&&n===o)){if(s<u)for(;A(e,n,e.bl_tree),0!=--s;);else 0!==n?(n!==a&&(A(e,n,e.bl_tree),s--),A(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(A(e,17,e.bl_tree),x(e,s-3,3)):(A(e,18,e.bl_tree),x(e,s-11,7));a=n,u=(s=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4)}}n(w);var U=!1;function N(e,t,r,n){x(e,0+(n?1:0),3),function(e,t,r,n){D(e),E(e,r),E(e,~r),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){U||(function(){var e,t,r,i,n,a=new Array(16);for(i=r=0;i<28;i++)for(v[i]=r,e=0;e<1<<u[i];e++)m[r++]=i;for(m[r-1]=i,i=n=0;i<16;i++)for(w[i]=n,e=0;e<1<<h[i];e++)g[n++]=i;for(n>>=7;i<s;i++)for(w[i]=n<<7,e=0;e<1<<h[i]-7;e++)g[256+n++]=i;for(t=0;t<=l;t++)a[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,a[8]++;for(;e<=255;)f[2*e+1]=9,e++,a[9]++;for(;e<=279;)f[2*e+1]=7,e++,a[7]++;for(;e<=287;)f[2*e+1]=8,e++,a[8]++;for(C(f,287,a),e=0;e<s;e++)p[2*e+1]=5,p[2*e]=R(e,5);y=new k(f,u,257,o,l),b=new k(p,h,0,s,l),_=new k(new Array(0),c,0,19,7)}(),U=!0),e.l_desc=new S(e.dyn_ltree,y),e.d_desc=new S(e.dyn_dtree,b),e.bl_desc=new S(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,L(e)},r._tr_stored_block=N,r._tr_flush_block=function(e,t,r,i){var n,o,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),P(e,e.l_desc),P(e,e.d_desc),s=function(e){var t;for(B(e,e.dyn_ltree,e.l_desc.max_code),B(e,e.dyn_dtree,e.d_desc.max_code),P(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=r+5,r+4<=n&&-1!==t?N(e,t,r,i):4===e.strategy||o===n?(x(e,2+(i?1:0),3),F(e,f,p)):(x(e,4+(i?1:0),3),function(e,t,r,i){var n;for(x(e,t-257,5),x(e,r-1,5),x(e,i-4,4),n=0;n<i;n++)x(e,e.bl_tree[2*d[n]+1],3);M(e,e.dyn_ltree,t-1),M(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),F(e,e.dyn_ltree,e.dyn_dtree)),L(e),i&&D(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(m[r]+a+1)]++,e.dyn_dtree[2*T(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){x(e,2,3),A(e,256,f),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,i,a,o,s=1,l={},u=!1,h=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,r="[object process]"==={}.toString.call(e.process)?function(e){n.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){a.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,function(e){var t=h.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(f,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[s]=n,r(s),s++},c.clearImmediate=d}function d(e){delete l[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),u=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,r(76).Buffer,r(80).setImmediate,r(5),r(15))},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=r(77),n=r(78),a=r(79);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,r)}function u(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=s(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|f(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(h(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|f(t.length);e=s(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function v(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var a,o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var h=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var c=!0,d=0;d<l;d++)if(u(e,a+d)!==u(t,d)){c=!1;break}if(c)return a}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function _(e,t,r,i){return j(z(t,e.length-r),e,r,i)}function w(e,t,r,i){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function k(e,t,r,i){return w(e,t,r,i)}function S(e,t,r,i){return j(H(t),e,r,i)}function T(e,t,r,i){return j(function(e,t){for(var r,i,n,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}(t,e.length-r),e,r,i)}function E(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var a,o,s,l,u=e[n],h=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=r)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(a=e[n+1]))&&(l=(31&u)<<6|63&a)>127&&(h=l);break;case 3:a=e[n+1],o=e[n+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=e[n+1],o=e[n+2],s=e[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=c}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,i){return h(t),t<=0?s(e,t):void 0!==r?"string"==typeof i?s(e,t).fill(r,i):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return c(null,e)},l.allocUnsafeSlow=function(e){return c(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,i,n){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(i,n),h=e.slice(t,r),c=0;c<s;++c)if(u[c]!==h[c]){a=u[c],o=h[c];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function R(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function C(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=t;a<r;++a)n+=N(e[a]);return n}function L(e,t,r){for(var i=e.slice(t,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,i,n,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function I(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-r,2);n<a;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function F(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-r,4);n<a;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function P(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,i,a){return a||P(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function M(e,t,r,i,a){return a||P(e,0,r,8),n.write(e,t,r,i,52,8),r+8}l.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;r=new l(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=t,n=1,a=this[e+--i];i>0&&(n*=256);)a+=this[e+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,a=i-r;if(this===e&&r<t&&t<i)for(n=a-1;n>=0;--n)e[n+t]=this[n+r];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=l.isBuffer(e)?e:z(new l(e,i).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var i=e.length,n=null,a=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(5))},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=u(e),o=i[0],s=i[1],l=new a(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),h=0,c=s>0?o-4:o;for(r=0;r<c;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[h++]=255&t);1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],o=0,s=r-n;o<s;o+=16383)a.push(h(e,o,o+16383>s?s:o+16383));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)i[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var n,a,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,i,n){var a,o,s=8*n-i-1,l=(1<<s)-1,u=l>>1,h=-7,c=r?n-1:0,d=r?-1:1,f=e[t+c];for(c+=d,a=f&(1<<-h)-1,f>>=-h,h+=s;h>0;a=256*a+e[t+c],c+=d,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=i;h>0;o=256*o+e[t+c],c+=d,h-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),a-=u}return(f?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,r,i,n,a){var o,s,l,u=8*a-n-1,h=(1<<u)-1,c=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=h?(s=0,o=h):o+c>=1?(s=(t*l-1)*Math.pow(2,n),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(81),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(5))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n,a,o,s,l=1,u={},h=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,i=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[l]=n,i(l),l++},d.clearImmediate=f}function f(e){delete u[e]}function p(e){if(h)setTimeout(p,0,e);else{var t=u[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{f(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(5),r(15))},function(e,t,r){"use strict";r.r(t);var i=r(16),n=r.n(i),a=r(10),o={insert:"head",singleton:!1},s=(n()(a.a,o),a.a.locals,/mobile|android|iphone|ipad|ipod|windows phone|phone|webos/i.test(window.navigator.userAgent)),l=("ontouchstart"in window||window,{secondToTime:function(e){if(0===(e=e||0)||e===1/0||"NaN"===e.toString())return"00:00";var t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*r);return(t>0?[t,r,i]:[r,i]).map((function(e){return e<10?"0"+e:""+e})).join(":")},timeToSecond:function(e){var t=e.split(":")[0],r=e.split(":")[1],i=e.split(":")[2];return Number(3600*t)+Number(60*r)+Number(i)},getElementViewLeft:function(e){var t=e.offsetLeft,r=e.offsetParent,i=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==r&&r!==e;)t+=r.offsetLeft,r=r.offsetParent;else for(;null!==r;)t+=r.offsetLeft,r=r.offsetParent;return t-i},getBoundingClientRectViewLeft:function(e){var t=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(e.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var r=document.createElement("div");r.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(r),this.getBoundingClientRectViewLeft.offset=-r.getBoundingClientRect().top-t,document.body.removeChild(r),r=null}var i=e.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return i.left+n}return this.getElementViewLeft(e)},getBoundingClientRectViewTop:function(e){var t=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(e.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewTop.offset){var r=document.createElement("div");r.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(r),this.getBoundingClientRectViewTop.offset=-r.getBoundingClientRect().top-t,document.body.removeChild(r),r=null}var i=e.getBoundingClientRect(),n=this.getBoundingClientRectViewTop.offset;return i.top+n}return this.getElementViewLeft(e)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(e){var t=e.left,r=void 0===t?0:t,i=e.top,n=void 0===i?0:i;this.isFirefox?(document.documentElement.scrollLeft=r,document.documentElement.scrollTop=n):window.scrollTo(r,n)},isMobile:s,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},nameMap:{dragStart:s?"touchstart":"mousedown",dragMove:s?"touchmove":"mousemove",dragEnd:s?"touchend":"mouseup"},color2Number:function(e){return"#"===e[0]&&(e=e.substr(1)),3===e.length&&(e=""+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),parseInt(e,16)+0&16777215},number2Color:function(e){return"#"+("00000"+e.toString(16)).slice(-6)},number2Type:function(e){switch(e){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}},addStyle:function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)},getStyle:function(e){var t={font:{},color:{},scale:{},border:{},position:{}},r=e.getElementsByTagName("font");if(r&&r.length>0){var i=r[0],n={name:i.getAttribute("name"),size:i.getAttribute("size")?.85*parseFloat(i.getAttribute("size")):void 0,bold:!!i.getAttribute("bold")&&!!parseInt(i.getAttribute("bold")),italic:!!i.getAttribute("italic")&&!!parseInt(i.getAttribute("italic")),underline:!!i.getAttribute("underline")&&!!parseInt(i.getAttribute("underline")),strikeout:!!i.getAttribute("strikeout")&&!!parseInt(i.getAttribute("strikeout")),spacing:i.getAttribute("spacing")?parseFloat(i.getAttribute("spacing")):void 0,angle:i.getAttribute("angle")?parseFloat(i.getAttribute("angle")):void 0};t.font=n}var a=e.getElementsByTagName("color");if(a&&a.length>0){var o=a[0],s={primary:o.getAttribute("primary")?this.colorHex(o.getAttribute("primary")):"",secondary:o.getAttribute("secondary")?this.colorHex(o.getAttribute("secondary")):"",back:o.getAttribute("back")?this.colorHex(o.getAttribute("back")):"",outline:o.getAttribute("outline")?this.colorHex(o.getAttribute("outline")):""};t.color=s}var l=e.getElementsByTagName("scale");if(l&&l.length>0){var u=l[0],h={x:u.getAttribute("x")?parseFloat(u.getAttribute("x")):void 0,y:u.getAttribute("y")?parseFloat(u.getAttribute("y")):void 0};t.scale=h}var c=e.getElementsByTagName("border");if(c&&c.length>0){var d=c[0],f={style:d.getAttribute("style")?parseInt(d.getAttribute("style")):void 0,outline:d.getAttribute("outline")?parseFloat(d.getAttribute("outline")):void 0,shadow:d.getAttribute("shadow")?parseFloat(d.getAttribute("shadow")):void 0};t.border=f}var p=e.getElementsByTagName("position");if(p&&p.length>0){var g=p[0],m={type:g.getAttribute("type")?parseInt(g.getAttribute("type")):1,alignment:g.getAttribute("alignment")?parseInt(g.getAttribute("alignment")):2,ml:g.getAttribute("ml")?parseFloat(g.getAttribute("ml")):0,mr:g.getAttribute("mr")?parseFloat(g.getAttribute("mr")):0,mv:g.getAttribute("mv")?parseFloat(g.getAttribute("mv")):0};t.position=m}return t},transSubtitleXml:function(e){var t=e.getElementsByTagName("sub");if(t&&0!==t.length){var r={},i=t[0],n=i.getElementsByTagName("note");if(n&&n.length>0){var a=n[0],o={width:a.getAttribute("width")?parseInt(a.getAttribute("width")):void 0,height:a.getAttribute("height")?parseInt(a.getAttribute("height")):void 0};r.note=o}for(var s=[],u=i.getElementsByTagName("dia"),h=0;h<u.length;h++){var c=u[h],d={st:0,et:0,con:""},f=c.getElementsByTagName("st");if(f&&f.length>0){var p=f[0];d.st=this.timeToSecond(p.innerHTML)}var g=c.getElementsByTagName("et");if(g&&g.length>0){var m=g[0];d.et=this.timeToSecond(m.innerHTML)}var v=c.getElementsByTagName("con");if(v&&v.length>0){var y=v[0].innerHTML;d.con+=y}var b=c.getElementsByTagName("style");if(b&&b.length>0){var _=b[0],w=l.getStyle(_),k=c.getElementsByTagName("inline"),S=[];if(k&&k.length>0)for(var T=0;T<k.length;T++){var E=k[T],x={};x.start=parseInt(E.getAttribute("effectS")),x.end=parseInt(E.getAttribute("effectE"))+1;var A=l.getStyle(E);x.style=A,S.push(x)}S.length>0&&(w.inlines=S),d.style=w}s.push(d)}return r.dias=s,r}},colorHex:function(e){if(!e)return"";if(e.startsWith("&H")){var t=e.substr(2),r=t.length;if(r<6||r>8)return;var i=0;8===r&&(i=parseInt(t.substr(0,2),16),t=t.substring(2));var n=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16);return"rgba("+parseInt(t.substr(4,2),16)+", "+a+", "+n+", "+(1-i/255)+")"}return""}}),u=l,h=r(7),c=r(20),d=r.n(c),f=r(21),p=r.n(f),g=r(22),m=r.n(g),v=r(23),y=r.n(v),b=r(24),_=r.n(b),w=r(25),k=r.n(w),S=r(26),T=r.n(S),E=r(27),x=r.n(E),A=r(28),R=r.n(A),C=r(29),L=r.n(C),D=r(30),O=r.n(D),I=r(31),F=r.n(I),P=r(32),B=r.n(P),M=r(33),U=r.n(M),N=r(34),z=r.n(N),H=r(35),j=r.n(H),G=r(36),Y=r.n(G),W=r(37),K=r.n(W),V=r(38),q=r.n(V),X=r(39),Z=r.n(X),J={play:d.a,pause:p.a,volumeUp:m.a,volumeOff:y.a,full:_.a,fullWeb:k.a,camera:T.a,bigPlay:x.a,bigPause:R.a,nextPlay:L.a,skipFF:O.a,skipREW:F.a,playThumb:B.a,seekFF:U.a,seekREW:z.a,moreIcon:j.a,switchOn:Y.a,switchOff:K.a,feedbackCommon:q.a,vipMark:Z.a};function Q(e,t){var r,i=document.createElement(e);return t&&t.length>0&&(r=i.classList).add.apply(r,t),i}function $(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function te(e){var t=e.tran,r=(e.index,e.options),i=Q("div",["hiplayer-controller"]),n=function(e){var t=e.theme,r=e.live,i=e.nextPlayIcon,n=e.tran,a=Q("div",["hiplayer-icons","hiplayer-icons-left"]),o='\n  <div class="hiplayer-icon hiplayer-play-icon">\n      <span class="hiplayer-icon-content">'+J.play+"</span>\n  </div>\n  ";i&&(o+='\n    <div class="hiplayer-icon hiplayer-next-play-icon">\n      <span class="hiplayer-icon-content">'+J.nextPlay+"</span>\n    </div>\n    ");o+='\n    <div class="hiplayer-seek">\n      <div class="hiplayer-icon hiplayer-seek-rew-icon">\n        <span class="hiplayer-icon-content">'+J.skipREW+'</span>\n      </div>\n      <div class="hiplayer-icon hiplayer-seek-ff-icon">\n        <span class="hiplayer-icon-content">'+J.skipFF+"</span>\n      </div>\n    </div>\n    ",o+='\n  <div class="hiplayer-text hiplayer-time">\n      <span class="hiplayer-ptime">00:00</span>/<span class="hiplayer-dtime">00:00</span>\n  </div>\n  ',r&&(o+='<span class="hiplayer-live-badge"><span class="hiplayer-live-dot" style="background: '+t+';"></span>'+n("Live")+"</span>");return a.innerHTML=o,a}({theme:r.theme,live:r.live,nextPlayIcon:r.nextPlayIcon,tran:t});i.appendChild(n);var a=function(e){var t=e.options,r=t.video,i=r.qualities,n=r.defaultQuality,a=r.subtitles,o=r.defaultSubtitle,s=t.volume,l=t.screenshot,u=t.theme,h=t.playbackSpeed,c=t.webfullscreen,d=t.fullscreen,f=t.feedback,p=t.autoChargeSetting,g=t.autoChargeState,m=e.tran,v=Q("div",["hiplayer-icons","hiplayer-icons-right"]),y="";if(a&&a.length>0){var b='<div class="hiplayer-pop-item hiplayer-subtitle-item" data-id="off">'+m("NoSubtitle")+"</div>";"off"===o&&(b='<div class="hiplayer-pop-item hiplayer-pop-item-std hiplayer-subtitle-item" data-id="off">'+m("NoSubtitle")+"</div>");for(var _,w=$(a);!(_=w()).done;){var k=_.value,S='<div class="hiplayer-subtitle-translate-type">('+m("AutoTranslate")+")</div>";k.id===o?102===k.translationType?b+='<div class="hiplayer-pop-item hiplayer-pop-item-std hiplayer-subtitle-item hiplayer-subtitle-item-auto" data-id="'+k.id+'">'+k.name+S+"</div>":b+='<div class="hiplayer-pop-item hiplayer-pop-item-std hiplayer-subtitle-item" data-id="'+k.id+'">'+k.name+"</div>":102===k.translationType?b+='<div class="hiplayer-pop-item hiplayer-subtitle-item hiplayer-subtitle-item-auto" data-id="'+k.id+'">'+k.name+S+"</div>":b+='<div class="hiplayer-pop-item hiplayer-subtitle-item" data-id="'+k.id+'">'+k.name+"</div>"}a.length>0?y+='\n      <div class="hiplayer-subtitle">\n        <div class="hiplayer-text hiplayer-subtitle-icon">'+m("Subtitles")+'</div>\n        <div class="hiplayer-pop-mask hiplayer-subtitle-mask">\n            <div class="hiplayer-pop-list hiplayer-subtitle-list">\n            '+b+"\n            </div>\n        </div>\n      </div>\n      ":y+='\n      <div class="hiplayer-subtitle">\n        <div class="hiplayer-text hiplayer-subtitle-icon">'+m("Subtitles")+"</div>\n      </div>\n      "}if(h){for(var T,E="",x=$(h);!(T=x()).done;){var A=T.value,R=A%1==0?""+A.toFixed(1):A;E+="1.0"===R?'\n        <div class="hiplayer-pop-item hiplayer-pop-item-std hiplayer-speed-item" data-speed="'+R+'">\n          '+R+"x\n        </div>\n        ":'\n        <div class="hiplayer-pop-item hiplayer-speed-item" data-speed="'+R+'">\n          '+R+"x\n        </div>\n        "}y+='\n    <div class="hiplayer-speed">\n        <div class="hiplayer-text hiplayer-speed-text">1.0x</div>\n        <div class="hiplayer-pop-mask hiplayer-speed-mask">\n            <div class="hiplayer-pop-list hiplayer-speed-list">\n            '+E+"\n            </div>\n        </div>\n    </div>\n    "}if(i&&i.length>0){for(var C,L="",D="",O=i.some((function(e){return 101===(null==e?void 0:e.vipType)}))?"quality-vip-container":"",I=$(i);!(C=I()).done;){var F=C.value,P=101===(null==F?void 0:F.vipType)?"quality-vip":"";F.id===n?(D=F.name,L+='<div class="hiplayer-pop-item hiplayer-pop-item-std hiplayer-quality-item '+P+'" data-id="'+F.id+'">'+F.name+"</div>"):L+='<div class="hiplayer-pop-item hiplayer-quality-item '+P+'" data-id="'+F.id+'">'+F.name+"</div>"}i.length>1?y+='\n      <div class="hiplayer-quality">\n        <div class="hiplayer-text hiplayer-quality-icon">'+D+'</div>\n        <div class="hiplayer-pop-mask hiplayer-quality-mask '+O+'">\n            <div class="hiplayer-pop-list hiplayer-quality-list">\n            '+L+"\n            </div>\n        </div>\n      </div>\n      ":y+='\n      <div class="hiplayer-quality">\n        <div class="hiplayer-text hiplayer-quality-icon">'+D+"</div>\n      </div>\n      "}l&&(y+='\n    <div class="hiplayer-icon hiplayer-camera-icon" aria-label="'+m("Screenshot")+'" data-balloon-pos="up">\n        <span class="hiplayer-icon-content">'+J.camera+"</span>\n    </div>\n    ");if(y+='\n      <div class="hiplayer-episodes">\n        <div class="hiplayer-text hiplayer-episodes-text">\n         Episodes\n        </div>\n        <div class="hiplayer-pop-mask hiplayer-episode-mask">\n          <div class="hiplayer-episode-mask-inner"></div>\n        </div>\n      </div>\n    ',y+='\n  <div class="hiplayer-volume">\n      <div class="hiplayer-icon hiplayer-volume-icon">\n          <span class="hiplayer-icon-content">'+J.volumeUp+'</span>\n      </div>\n      <div class="hiplayer-pop-mask hiplayer-volume-mask">\n        <div class="hiplayer-volume-setting">\n          <span class="hiplayer-volume-text">'+(100*s).toFixed(0)+'%</span>\n          <div class="hiplayer-volume-bar-wrap">\n            <div class="hiplayer-volume-bar">\n              <div class="hiplayer-volume-bar-inner" style="background: '+u+';">\n                <span class="hiplayer-thumb" style="background: '+u+'"></span>\n              </div>\n          </div>\n        </div>\n      </div>\n      </div>\n  </div>\n  ',c||d){var B='<div class="hiplayer-icon hiplayer-full-in-icon">\n        <span class="hiplayer-icon-content">'+J.fullWeb+"</span>\n    </div>",M='<div class="hiplayer-icon hiplayer-full-icon">\n        <span class="hiplayer-icon-content">'+J.full+"</span>\n    </div>";y+='\n    <div class="hiplayer-full">\n        '+(c?B:"")+"\n        "+(d?M:"")+"\n    </div>\n    "}if(f||p){var U="",N="";f&&(U='\n        <div class="more-row-group hiplayer-feedback-group-btn">\n          <span class="text-desc">'+m("feedback_btn")+'</span>\n          <span class="icon-img">'+J.feedbackCommon+"</span>\n        </div>\n      "),p&&(N='\n        <div class="more-row-group auto-charge-group">\n          <span class="text-desc">'+m("autoChargeTitle")+'</span>\n          <span class="icon-img hiplayer-auto-charge-btn">'+(g?J.switchOn:J.switchOff)+'</span>\n        </div>\n        <div class="auto-charge-desc">'+m("autoChargeDesc")+"</div>\n      "),y+='\n      <div class="hiplayer-more">\n        <div class="hiplayer-icon hiplayer-more-icon">\n          <span class="hiplayer-icon-content">'+J.moreIcon+'</span>\n        </div>\n        <div class="hiplayer-pop-mask hiplayer-more-mask">\n          '+U+"\n          "+N+"\n        </div>\n      </div>\n    "}return v.innerHTML=y,v}({options:r,tran:t});i.appendChild(a);var o=function(e){var t=Q("div",["hiplayer-bar-wrap"]);return t.innerHTML='\n  <div class="hiplayer-bar-preview"></div>\n  <div class="hiplayer-bar-bg">\n    <div class="hiplayer-loaded" style="width: 0;"></div>\n  </div>\n  <div class="hiplayer-bar">\n    <div class="hiplayer-played" style="width: 0; background: '+e+'">\n      <div class="hiplayer-thumb">'+J.playThumb+"</div>\n    </div>\n  </div>\n  ",t}(r.theme);return i.appendChild(o),i}function re(e){e.tran,e.index;var t=e.options,r=Q("div",["hiplayer-mobile-controller"]),i=Q("div",["hiplayer-time"]);i.innerHTML='<span class="hiplayer-ptime">00:00</span>',r.appendChild(i);var n=function(e){var t=Q("div",["hiplayer-bar-wrap"]);return t.innerHTML='\n  <div class="hiplayer-bar-preview"></div>\n  <div class="hiplayer-bar">\n      <div class="hiplayer-loaded" style="width: 0;"></div>\n      <div class="hiplayer-played" style="width: 0; background: '+e+'">\n          <span class="hiplayer-thumb"></span>\n      </div>\n  </div>\n  ',t}(t.theme);r.appendChild(n);var a=Q("div",["hiplayer-time"]);a.innerHTML='<span class="hiplayer-dtime">00:00</span>',r.appendChild(a);var o=Q("div",["hiplayer-icon","hiplayer-full-in-icon"]);return o.innerHTML='<span class="hiplayer-icon-content">'+J.full+"</span>",r.appendChild(o),r}function ie(e){var t=e.current,r=void 0!==t&&t,i=e.screenshot,n=void 0!==i&&i,a=e.preload,o=void 0===a?"auto":a,s=e.poster,l=void 0===s?"":s,u=e.url,h=void 0===u?"":u,c=(e.subtitle,Q("video",r?["hiplayer-video","hiplayer-video-current"]:["hiplayer-video"]));return c.setAttribute("webkit-playsinline",""),c.setAttribute("playsinline",""),n&&c.setAttribute("crossorigin","anonymous"),o&&c.setAttribute("preload",o),l&&c.setAttribute("poster",l),h&&c.setAttribute("src",h),c}function ne(e){var t=e.tran,r=e.index,i=e.options,n=Q("div"),a=Q("div",["hiplayer-mask"]);n.appendChild(a);var o=function(e){var t=e.screenshot,r=e.preload,i=e.logo,n=e.video,a=e.logos,o=e.platform,s=Q("div",["hiplayer-video-wrap"]),l=Q("div",["hiplayer-video-inner-wrap"]),h=Q("div",["hiplayer-logo-wrap"]),c=ie({current:!0,poster:null==n?void 0:n.poster,url:null==n?void 0:n.url,screenshot:t,preload:r});if(l.appendChild(c),l.appendChild(h),i){var d=Q("div",["hiplayer-logo"]);d.style.left=i.left,d.style.top=i.top;var f=Q("img");f.setAttribute("src",i.src),d.appendChild(f),l.appendChild(d)}a&&a.forEach((function(e,t){var r=Q("div",["hiplayer-logo"+t,"hiplayer-logo"]),i=Q("img");i.setAttribute("src",e.imgSrc),r.appendChild(i),h.appendChild(r)}));var p=Q("div",["hiplayer-subtitle-wrapper"]);l.appendChild(p);var g=Q("div",["hiplayer-bezel"]),m=Q("div",["hiplayer-loading-icon"]);if(m.innerHTML='<div class="hiplayer-loading-dot hiplayer-loading-dot-1"></div>\n  <div class="hiplayer-loading-dot hiplayer-loading-dot-2"></div>',g.appendChild(m),l.appendChild(g),u.isMobile||"mobile"===o){var v=Q("div",["hiplayer-seek-container"]);v.innerHTML='\n      <div class="hiplayer-icon hiplayer-seek-rew-icon">\n        <span class="hiplayer-icon-content">\n        <span class="seek-rotate">\n          '+J.seekREW+'\n        </span>\n        <span class="seek-10">10</span>\n      </div>\n      <div class="hiplayer-play-icon">\n        <div class="hiplayer-icon-content">'+J.pause+'</div>\n      </div>\n\n      <div class="hiplayer-icon hiplayer-seek-ff-icon">\n        <span class="hiplayer-icon-content">\n        <span class="seek-rotate">'+J.seekFF+'</span>\n        <span class="seek-10">10</span></span>\n      </div>',l.appendChild(v)}return s.appendChild(l),s}(i);n.appendChild(o);var s=Q("div",["hiplayer-controller-mask"]);n.appendChild(s);var l=null;l=u.isMobile||"mobile"===i.platform?re({tran:t,index:r,options:i}):te({tran:t,index:r,options:i}),n.appendChild(l);var h,c=Q("div",["hiplayer-notice"]);if(n.appendChild(c),i.bigPlayIcon){var d=((h=Q("button",["hiplayer-big-play-icon"])).innerHTML=J.bigPlay,h);n.appendChild(d)}return n.innerHTML}function ae(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oe,se=function(){function e(e){var t=e.container,r=e.options,i=e.index,n=e.tran;this._container=void 0,this._container=t,this._container.innerHTML=ne({tran:n,index:i,options:r}),u.addStyle(".hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item-std {\n      color: "+r.theme+";\n    }"),u.addStyle(".hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-pop-list .hiplayer-pop-item:hover {\n      color: "+r.theme+";\n    }"),u.addStyle(".hiplayer-controller .hiplayer-icons .hiplayer-pop-mask .hiplayer-feedback-group-btn:hover {\n      color: "+r.theme+";\n      svg path {\n        stroke: "+r.theme+";\n      }\n    }")}var t,r,i;return e.prototype.getSubtitleList=function(){return this._container.querySelector(".hiplayer-subtitle-list")},t=e,(r=[{key:"volumeText",get:function(){return this._container.querySelector(".hiplayer-volume-text")}},{key:"volumeBar",get:function(){return this._container.querySelector(".hiplayer-volume-bar-inner")}},{key:"volumeBarWrap",get:function(){return this._container.querySelector(".hiplayer-volume-bar")}},{key:"volumeBarWrapWrap",get:function(){return this._container.querySelector(".hiplayer-volume-bar-wrap")}},{key:"volumeButton",get:function(){return this._container.querySelector(".hiplayer-volume")}},{key:"volumeButtonIcon",get:function(){return this._container.querySelector(".hiplayer-volume-icon")}},{key:"volumeIcon",get:function(){return this._container.querySelector(".hiplayer-volume-icon")}},{key:"playedBar",get:function(){return this._container.querySelector(".hiplayer-played")}},{key:"loadedBar",get:function(){return this._container.querySelector(".hiplayer-loaded")}},{key:"playedBarWrap",get:function(){return this._container.querySelector(".hiplayer-bar-wrap")}},{key:"video",get:function(){return this._container.querySelector(".hiplayer-video-current")}},{key:"logoWrap",get:function(){return this._container.querySelector(".hiplayer-logo-wrap")}},{key:"videoWrap",get:function(){return this._container.querySelector(".hiplayer-video-wrap")}},{key:"playButton",get:function(){return this._container.querySelector(".hiplayer-play-icon .hiplayer-icon-content")}},{key:"nextPlayButton",get:function(){return this._container.querySelector(".hiplayer-next-play-icon")}},{key:"bigPlayButton",get:function(){return this._container.querySelector(".hiplayer-big-play-icon")}},{key:"controllerMask",get:function(){return this._container.querySelector(".hiplayer-controller-mask")}},{key:"ptime",get:function(){return this._container.querySelector(".hiplayer-ptime")}},{key:"mask",get:function(){return this._container.querySelector(".hiplayer-mask")}},{key:"speed",get:function(){return this._container.querySelector(".hiplayer-speed-text")}},{key:"speedList",get:function(){return this._container.querySelector(".hiplayer-speed-list")}},{key:"speedItem",get:function(){return this._container.querySelectorAll(".hiplayer-speed-item")}},{key:"dtime",get:function(){return this._container.querySelector(".hiplayer-dtime")}},{key:"controller",get:function(){return this._container.querySelector(".hiplayer-controller")}},{key:"browserFullButton",get:function(){return this._container.querySelector(".hiplayer-full-icon")}},{key:"webFullButton",get:function(){return this._container.querySelector(".hiplayer-full-in-icon")}},{key:"qualityList",get:function(){return this._container.querySelector(".hiplayer-quality-list")}},{key:"camareButton",get:function(){return this._container.querySelector(".hiplayer-camera-icon")}},{key:"qualityButton",get:function(){return this._container.querySelector(".hiplayer-quality-icon")}},{key:"feedbackGroupButton",get:function(){return this._container.querySelector(".hiplayer-feedback-group-btn")}},{key:"autoChargeButton",get:function(){return this._container.querySelector(".hiplayer-auto-charge-btn")}},{key:"barPreview",get:function(){return this._container.querySelector(".hiplayer-bar-preview")}},{key:"barWrap",get:function(){return this._container.querySelector(".hiplayer-bar-wrap")}},{key:"notice",get:function(){return this._container.querySelector(".hiplayer-notice")}},{key:"subtitleWrap",get:function(){return this._container.querySelector(".hiplayer-subtitle-wrapper")}},{key:"subtitleButton",get:function(){return this._container.querySelector(".hiplayer-subtitle-icon")}},{key:"seekContainer",get:function(){return this._container.querySelector(".hiplayer-seek-container")}},{key:"seekRewButton",get:function(){return this._container.querySelector(".hiplayer-seek-rew-icon")}},{key:"seekFFButton",get:function(){return this._container.querySelector(".hiplayer-seek-ff-icon")}},{key:"seekRewCircle",get:function(){return this._container.querySelector(".hiplayer-seek-rew-icon .seek-rotate")}},{key:"seekFFCircle",get:function(){return this._container.querySelector(".hiplayer-seek-ff-icon .seek-rotate")}},{key:"seekFF10",get:function(){return this._container.querySelector(".hiplayer-seek-ff-icon .seek-10")}},{key:"seekRew10",get:function(){return this._container.querySelector(".hiplayer-seek-rew-icon .seek-10")}},{key:"videoLogos",get:function(){return this._container.querySelectorAll(".hiplayer-logo")}}])&&ae(t.prototype,r),i&&ae(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e){e.quality_start="quality_start",e.quality_end="quality_end",e.destroy="destroy",e.resize="resize",e.fullscreen="fullscreen",e.fullscreen_cancel="fullscreen_cancel",e.webfullscreen="webfullscreen",e.webfullscreen_cancel="webfullscreen_cancel",e.next_video="next_video",e.speed_rate="speed_rate",e.subtitle_switch="subtitle_switch",e.play_btn_click="play_btn_click",e.pause_btn_click="pause_btn_click",e.seek_frwd_10="seek_frwd_10",e.seek_back_10="seek_back_10",e.seek_frwd="seek_frwd",e.seek_back="seek_back",e.volume_bar_seek="volume_bar_seek",e.operation_view_toggle="operation_view_toggle",e.ios_play_end="ios_play_end",e.feedback_click="feedback_click",e.switch_auto_charge="switch_auto_charge"}(oe||(oe={}));var le,ue=oe;!function(e){e.abort="abort",e.canplay="canplay",e.canplaythrough="canplaythrough",e.durationchange="durationchange",e.emptied="emptied",e.ended="ended",e.error="error",e.loadeddata="loadeddata",e.loadedmetadata="loadedmetadata",e.loadstart="loadstart",e.mozaudioavailable="mozaudioavailable",e.pause="pause",e.play="play",e.playing="playing",e.progress="progress",e.ratechange="ratechange",e.seeked="seeked",e.seeking="seeking",e.stalled="stalled",e.suspend="suspend",e.timeupdate="timeupdate",e.volumechange="volumechange",e.waiting="waiting"}(le||(le={}));var he=le;function ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var fe=function(){function e(){this.videoEvents=[he.abort,he.canplay,he.canplaythrough,he.durationchange,he.emptied,he.ended,he.error,he.loadeddata,he.loadedmetadata,he.loadstart,he.mozaudioavailable,he.pause,he.play,he.playing,he.progress,he.ratechange,he.seeked,he.seeking,he.stalled,he.suspend,he.timeupdate,he.volumechange,he.waiting],this.playerEvents=[ue.quality_start,ue.quality_end,ue.destroy,ue.resize,ue.fullscreen,ue.fullscreen_cancel,ue.webfullscreen,ue.webfullscreen_cancel,ue.next_video,ue.speed_rate,ue.subtitle_switch,ue.play_btn_click,ue.pause_btn_click,ue.seek_frwd_10,ue.seek_back_10,ue.seek_frwd,ue.seek_back,ue.volume_bar_seek,ue.operation_view_toggle,ue.ios_play_end,ue.feedback_click,ue.switch_auto_charge],this._events={},this._events={}}var t=e.prototype;return t.subscribe=function(e,t){return this._getEventTypeByName(e)&&"function"==typeof t?(this._events[e]||(this._events[e]=[]),this._events[e].push(t),this._events[e].length-1):-1},t.emit=function(e,t){if(this._events[e]&&this._events[e].length)for(var r,i=ce(this._events[e]);!(r=i()).done;){(0,r.value)(t)}},t.unsubscribe=function(e,t){this._getEventTypeByName(e)&&-1!==t&&this._events[e].splice(t,1)},t._getEventTypeByName=function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.videoEvents.indexOf(e)?"video":(console.error("Unknown event name: "+e),null)},e}(),pe=function(){function e(e){var t=this;this._player=void 0,this._lastScrollPosition={left:0,top:0},this._player=e,this._player.events.subscribe(ue.webfullscreen,(function(){t._player.resize()})),this._player.events.subscribe(ue.webfullscreen_cancel,(function(){t._player.resize(),u.setScrollPosition(t._lastScrollPosition)}));var r=function(){t._player.resize(),t.isFullScreen("browser")?t._player.events.emit(ue.fullscreen):(u.setScrollPosition(t._lastScrollPosition),t._player.events.emit(ue.fullscreen_cancel))},i=function(){var e=document,r=e.fullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;r&&r!==t._player.container||(t._player.resize(),r?t._player.events.emit(ue.fullscreen):(u.setScrollPosition(t._lastScrollPosition),t._player.events.emit(ue.fullscreen_cancel)))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",i),document.addEventListener("fullscreenchange",i)):/iPhone|iPad|iPod/i.test(navigator.userAgent)?(this._player.video.addEventListener("webkitbeginfullscreen",(function(){t._player.resize(),t._player.events.emit(ue.fullscreen)})),this._player.video.addEventListener("webkitendfullscreen",(function(){t._player.resize(),u.setScrollPosition(t._lastScrollPosition),t._player.pause(),t._player.events.emit(ue.fullscreen_cancel)}))):(this._player.container.addEventListener("fullscreenchange",r),this._player.container.addEventListener("webkitfullscreenchange",r),document.addEventListener("msfullscreenchange",i),document.addEventListener("MSFullscreenChange",i))}var t=e.prototype;return t.isFullScreen=function(e){void 0===e&&(e="browser");var t=document;switch(e){case"browser":return t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement;case"web":return this._player.container.classList.contains("hiplayer-fulled")}},t.request=function(e){void 0===e&&(e="browser");var t="browser"===e?"web":"browser",r=this.isFullScreen(t);switch(r||(this._lastScrollPosition=u.getScrollPosition()),e){case"browser":this._player.container.requestFullscreen?this._player.container.requestFullscreen():this._player.container.mozRequestFullScreen?this._player.container.mozRequestFullScreen():this._player.container.webkitRequestFullscreen?this._player.container.webkitRequestFullscreen():this._player.video.webkitEnterFullscreen?this._player.video.webkitEnterFullscreen():this._player.video.webkitEnterFullScreen?this._player.video.webkitEnterFullScreen():this._player.container.msRequestFullscreen&&this._player.container.msRequestFullscreen();break;case"web":this._player.container.classList.add("hiplayer-fulled"),document.body.classList.add("hiplayer-web-fullscreen-fix"),this._player.events.emit(ue.webfullscreen)}r&&this.cancel(t)},t.cancel=function(e){void 0===e&&(e="browser");var t=document;switch(e){case"browser":t.cancelFullScreen?t.cancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.webkitCancelFullscreen?t.webkitCancelFullscreen():t.msCancelFullScreen?t.msCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen();break;case"web":this._player.container.classList.remove("hiplayer-fulled"),document.body.classList.remove("hiplayer-web-fullscreen-fix"),this._player.events.emit(ue.webfullscreen_cancel)}},t.toggle=function(e){void 0===e&&(e="browser"),this.isFullScreen(e)?this.cancel(e):this.request(e)},e}(),ge=function(){function e(e){this.storageName={volume:"hiplayer-volume",subtitle:"hiplayer-subtitle",muted:"hiplayer-muted"},this.default={volume:"0.7",subtitle:"",muted:"0"},this.data={},e.volume&&(this.default.volume=e.volume.toString()),this._init()}var t=e.prototype;return t._init=function(){for(var e in this.storageName)if(this.storageName.hasOwnProperty(e)){var t=this.storageName[e],r=u.storage.get(t);this.data[e]=r||this.default[e]}},t.get=function(e){return this.data[e]},t.set=function(e,t){this.data[e]=t,u.storage.set(this.storageName[e],t)},e}(),me=function(){function e(e){this._elements={},this._elements={volume:e.volumeBar,played:e.playedBar,loaded:e.loadedBar}}var t=e.prototype;return t.set=function(e,t,r){t=Math.max(t,0),t=Math.min(t,1);var i=this._elements[e];i&&(i.style[r]=100*t+"%")},t.get=function(e){var t=this._elements[e];return t?parseFloat(t.style.width)/100:0},e}(),ve=function(){function e(e){var t=this;this._player=void 0,this._autoHideTimer=null,this._autoHideTimer1=null,this._autoHideSeek=null,this._disableAutoHide=!1,this._subscriptions={},this._clickTimer=null,this._lastClickTime=0,this._clickCount=0,this._displayTime=0,this._locked=!1,this._player=e,this._autoHideTimer=null,this._autoHideTimer1=null,this._autoHideSeek=null,this._clickTimer=null,this._clickCount=0,this._lastClickTime=0,this._displayTime=0,this._locked=!1,u.isMobile||"mobile"===this._player.options.platform?(this._subscriptions[he.play]=this._player.on(he.play,(function(){t.setMobileAutoHide()})),this._subscriptions[he.pause]=this._player.on(he.pause,(function(){t.setMobileAutoHide()}))):(this._player.container.onmouseover=function(){t._show()},this._player.container.onmouseleave=function(){t._hide()},this._player.container.onclick=function(){t.setAutoHide()},this._subscriptions[he.play]=this._player.on(he.play,(function(){t.setAutoHide()})),this._subscriptions[he.pause]=this._player.on(he.pause,(function(){t.setAutoHide()}))),this._initPlayButton(),this._initPlayTime(),this._initNextPlayButton(),this._initPlayedBar(),this._initFullButton(),this._initQualityButton(),this._initSubtitleButton(),this._initMoreButton(),this._initScreenshotButton(),this._initSeekButton(),u.isMobile||"mobile"===this._player.options.platform||this._initVolumeButton()}var t=e.prototype;return t._initPlayButton=function(){var e=this;this._player.template.playButton&&(this._player.template.playButton.innerHTML=this._player.isPaused()?J.play:J.pause,this._player.template.playButton.onclick=function(t){e._isShow()&&(e._player.toggle(),(u.isMobile||"mobile"===e._player.options.platform)&&(t.stopPropagation(),e.setMobileAutoHide()))}),this._player.template.bigPlayButton&&(this._player.template.bigPlayButton.innerHTML=this._player.isPaused()?J.bigPlay:J.bigPause,this._player.template.bigPlayButton.onclick=function(){e._player.toggle()}),u.isMobile||"mobile"===this._player.options.platform?(this._player.template.videoWrap&&(this._player.template.videoWrap.onclick=function(t){e._clickHalfArea(t)}),this._player.template.controllerMask&&(this._player.template.controllerMask.onclick=function(t){e._clickHalfArea(t)})):(this._player.template.videoWrap&&(this._player.template.videoWrap.onclick=function(){e._player.toggle()}),this._player.template.controllerMask&&(this._player.template.controllerMask.onclick=function(){e._player.toggle()}))},t._clickHalfArea=function(e){var t=this;this._clickCount++,this._clickTimer=setTimeout((function(){return t._clickTimer&&clearTimeout(t._clickTimer),t._clickCount>=2?(t._locked||(window.innerWidth/e.clientX>2?(t._isShow()?t.setMobileAutoHide():(t._showSeekRew(),t._hideSeek()),t.seekRewVideo(10)):(t._isShow()?t.setMobileAutoHide():(t._showSeekFF(),t._hideSeek()),t.seekffVideo(10))),t._clickCount=0):(t._toggle(),t._clickCount=0)}),300)},t._initNextPlayButton=function(){var e=this;this._player.template.nextPlayButton&&(this._player.template.nextPlayButton.onclick=function(){e._player.events.emit(ue.next_video)})},t._initPlayTime=function(){var e=this._player.video.duration;e&&e!==1/0&&this._player.template.dtime&&(this._player.template.dtime.innerHTML=u.secondToTime(e)),this._player.template.ptime&&(this._player.template.ptime.innerHTML=u.secondToTime(0))},t._initPlayedBar=function(){var e=this,t=this._player.template.playedBarWrap;if(t){this._player.bar.set("played",this._player.video.currentTime/this._player.video.duration,"width"),this._player.template.ptime&&(this._player.template.ptime.innerHTML=u.secondToTime(this._player.video.currentTime));var r=this._player.video.buffered.length?this._player.video.buffered.end(this._player.video.buffered.length-1)/this._player.video.duration:0;this._player.bar.set("loaded",r,"width");var i=function(r){e._show();var i=((r.clientX||r.changedTouches&&r.changedTouches[0]&&r.changedTouches[0].clientX)-u.getBoundingClientRectViewLeft(t))/t.clientWidth;i=Math.max(i,0),i=Math.min(i,1),e._player.bar.set("played",i,"width"),e._player.pause(),e._player.template.ptime&&(e._player.template.ptime.innerHTML=u.secondToTime(i*e._player.video.duration))},n=function r(n){e.setMobileAutoHide(),document.removeEventListener(u.nameMap.dragEnd,r),document.removeEventListener(u.nameMap.dragMove,i);var a=((n.clientX||n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].clientX)-u.getBoundingClientRectViewLeft(t))/t.clientWidth;a=Math.max(a,0),a=Math.min(a,1),e._player.bar.set("played",a,"width");var o=e._player.bar.get("played")*e._player.video.duration;e._player.video.currentTime<o?e._player.events.emit(ue.seek_frwd,o-e._player.video.currentTime):e._player.video.currentTime>o&&e._player.events.emit(ue.seek_back,e._player.video.currentTime-o),e._player.seek(o),a<1&&e._player.play(),1===a&&navigator.userAgent.match(/iPhone|iPad|iPod|Mac/i)&&e._player.events.emit(ue.ios_play_end,{player:e._player})},a=function(){document.addEventListener(u.nameMap.dragMove,i),document.addEventListener(u.nameMap.dragEnd,n)},o=function(r){if(e._player.video.duration){var i=t.getBoundingClientRect().left,n=(r.clientX||r.changedTouches&&r.changedTouches[0]&&r.changedTouches[0].clientX)-i;if(n<0||n>t.offsetWidth)return;e._player.video.duration,t.offsetWidth}};u.isMobile?(t.ontouchstart=a,t.ontouchmove=o):(t.onmousedown=a,t.onmousemove=o),u.isMobile||(t.onmouseenter=function(){e._player.video.duration},t.onmouseleave=function(){e._player.video.duration})}},t._initFullButton=function(){var e=this;this._player.template.browserFullButton&&(this._player.template.browserFullButton.onclick=function(){e._player.fullScreen.toggle("ontouchstart"in window?"web":"browser")}),this._player.template.webFullButton&&(this._player.template.webFullButton.onclick=function(){e.setMobileAutoHide(),e._player.fullScreen.toggle("web")})},t._initVolumeButton=function(){var e=this,t=parseFloat(this._player.user.get("volume"));this._player.bar.set("volume",t,"height"),this._player.template.volumeText&&(this._player.template.volumeText.innerText=(100*t).toFixed(0)+"%"),this.switchVolumeIcon();var r=function(t){var r=t||window.event,i=((r.clientY||r.changedTouches&&r.changedTouches[0]&&r.changedTouches[0].clientY)-u.getBoundingClientRectViewTop(e._player.template.volumeBarWrap))/120;e._player.volume(1-i,!1,!0)},i=function t(){var i;document.removeEventListener(u.nameMap.dragEnd,t),document.removeEventListener(u.nameMap.dragMove,r),null===(i=e._player.template.volumeButton)||void 0===i||i.classList.remove("hiplayer-volume-active")},n=function(){var t;document.addEventListener(u.nameMap.dragMove,r),document.addEventListener(u.nameMap.dragEnd,i),null===(t=e._player.template.volumeButton)||void 0===t||t.classList.add("hiplayer-volume-active")},a=this._player.template.volumeBarWrapWrap;a&&(a.onclick=function(t){var r=t||window.event,i=((r.clientY||r.changedTouches&&r.changedTouches[0]&&r.changedTouches[0].clientY)-u.getBoundingClientRectViewTop(e._player.template.volumeBarWrap))/120;e._player.volume(1-i,!1,!0),e._player.events.emit(ue.volume_bar_seek,1-i)},u.isMobile?a.ontouchstart=n:a.onmousedown=n);var o=this._player.template.volumeButtonIcon;o&&(o.onclick=function(){e._player.video.muted?e._player.muted(!1,!1):e._player.muted(!0,!1)})},t._initQualityButton=function(){var e=this;this._player.options.video.qualities&&this._player.template.qualityList&&(this._player.template.qualityList.onclick=function(t){t.target&&t.target.classList.contains("hiplayer-quality-item")&&e._player.onQualitySwitch(t.target.dataset.id)})},t._initSubtitleButton=function(){var e=this;this._player.options.video.subtitles&&this._player.template.getSubtitleList()&&(this._player.template.getSubtitleList().onclick=function(t){t.target&&t.target.classList.contains("hiplayer-subtitle-item")&&e._player.onSubtitleSwitch(t.target.dataset.id)})},t._initMoreButton=function(){var e=this;this._player.options.feedback&&this._player.template.feedbackGroupButton&&(this._player.template.feedbackGroupButton.onclick=function(){e._player.goFeedback()}),this._player.options.autoChargeSetting&&this._player.template.autoChargeButton&&(this._player.template.autoChargeButton.onclick=function(t){t.target&&e._player.switchAutoCharge(!e._player.options.autoChargeState)})},t._initScreenshotButton=function(){var e=this;this._player.options.screenshot&&this._player.template.camareButton&&(this._player.template.camareButton.onclick=function(){var t,r,i=document.createElement("canvas");i.width=e._player.video.videoWidth,i.height=e._player.video.videoHeight,null===(t=i.getContext("2d"))||void 0===t||t.drawImage(e._player.video,0,0,i.width,i.height),i.toBlob((function(e){if(e){r=URL.createObjectURL(e);var t=""+Date.now(),i=document.createElement("a");i.href=r,i.download=t+".png",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}})),e._player.events.emit("screenshot",r)})},t._toggleLock=function(e){this._locked=e},t._initSeekButton=function(){var e=this,t=this._player.template.seekFFButton,r=this._player.template.seekRewButton;t&&(t.onclick=function(t){if(u.isMobile||"mobile"===e._player.options.platform){if(!e._isShow())return;return t.stopPropagation(),e.seekffVideo(10),e.setMobileAutoHide(),e._clickCount=0}e._player.seek(e._player.video.currentTime+10,!1),e._player.events.emit(ue.seek_frwd_10)}),r&&(r.onclick=function(t){if(u.isMobile||"mobile"===e._player.options.platform){if(!e._isShow())return;return t.stopPropagation(),e.seekRewVideo(10),e.setMobileAutoHide(),e._clickCount=0}e._player.seek(e._player.video.currentTime-10,!1),e._player.events.emit(ue.seek_back_10)})},t.seekRewVideo=function(e){var t=this,r=(new Date).getTime(),i=r-this._lastClickTime;this._lastClickTime=r,this._displayTime=i<500?this._displayTime+e:e,this._player.template.seekRewCircle.classList.add("seek-rotate-animation"),this._player.template.seekRew10.classList.add("seek-rew10-animation"),this._player.template.seekRew10.innerHTML="-"+this._displayTime+"s",setTimeout((function(){t._player.template.seekRewCircle.classList.remove("seek-rotate-animation"),t._player.template.seekRew10.classList.remove("seek-rew10-animation"),t._player.template.seekRew10.innerHTML="10"}),500),this._player.seek(this._player.video.currentTime-e,!1),this._player.events.emit(ue.seek_back_10)},t.seekffVideo=function(e){var t=this,r=(new Date).getTime(),i=r-this._lastClickTime;this._lastClickTime=r,this._displayTime=i<500?this._displayTime+e:e,this._player.template.seekFFCircle.classList.add("seek-rotate-animation"),this._player.template.seekFF10.classList.add("seek-ff10-animation"),this._player.template.seekFF10.innerHTML="+"+this._displayTime+"s",setTimeout((function(){t._player.template.seekFFCircle.classList.remove("seek-rotate-animation"),t._player.template.seekFF10.classList.remove("seek-ff10-animation"),t._player.template.seekFF10.innerHTML="10"}),500),this._player.seek(this._player.video.currentTime+e,!1),this._player.events.emit(ue.seek_frwd_10)},t.setAutoHide=function(){var e=this;this._show(),this._autoHideTimer&&clearTimeout(this._autoHideTimer),this._autoHideTimer=setTimeout((function(){!e._player.video.played.length||e._player.isPaused()||e._disableAutoHide||e._hide()}),3e3)},t.setMobileAutoHide=function(){var e=this;this._show(),this._autoHideTimer1&&clearTimeout(this._autoHideTimer1),this._autoHideTimer1=setTimeout((function(){e._player.video.played.length&&e._hide()}),3e3)},t.setDisableAutoHide=function(e){this._disableAutoHide=e},t._show=function(){this._player.events.emit(ue.operation_view_toggle,!1),this._player.container.classList.remove("hiplayer-hide-controller")},t._hide=function(){this._player.events.emit(ue.operation_view_toggle,!0),this._player.container.classList.add("hiplayer-hide-controller")},t._showSeekFF=function(){this._player.template.seekContainer.classList.add("hiplayer-seekff")},t._showSeekRew=function(){this._player.template.seekContainer.classList.add("hiplayer-seekrew")},t._hideSeek=function(){var e=this;this._autoHideSeek&&clearTimeout(this._autoHideSeek),this._autoHideSeek=setTimeout((function(){e._player.template.seekContainer.className="hiplayer-seek-container"}),480)},t._isShow=function(){return!this._player.container.classList.contains("hiplayer-hide-controller")},t._toggle=function(){this._isShow()?this._hide():this.setMobileAutoHide()},t.switchVolumeIcon=function(){var e=this._player.template.volumeIcon;e&&(this._player.volume()>=.95||this._player.volume()>0?e.innerHTML=J.volumeUp:e.innerHTML=J.volumeOff)},t.destroy=function(){for(var e in this._autoHideTimer&&(clearTimeout(this._autoHideTimer),this._autoHideTimer=null),this._subscriptions)this._subscriptions.hasOwnProperty(e)&&this._player.unsubscribe(e,this._subscriptions[e])},e}(),ye=function(){function e(e){var t=this;this.loop=void 0,this._player=void 0,this._subscriptions={},this._player=e,this.loop=this._player.options.loop,this._player.template.speedList&&(this._player.template.speedList.onclick=function(e){if(e.target&&e.target.classList.contains("hiplayer-speed-item")){var r=e.target.dataset.speed;r&&(t._player.speed(parseFloat(r),!0),t._player.events.emit(ue.speed_rate,r))}})}return e.prototype.destroy=function(){for(var e in this._subscriptions)this._subscriptions.hasOwnProperty(e)&&this._player.unsubscribe(e,this._subscriptions[e])},e}(),be=function(e){var t=this;this._isFocus=!1,document.addEventListener("click",(function(){t._isFocus=!1}),!0),e.container.addEventListener("click",(function(){t._isFocus=!0}),!0),e.options.hotkey&&document.addEventListener("keydown",(function(r){if(t._isFocus){var i,n,a=null===(i=document.activeElement)||void 0===i?void 0:i.tagName.toUpperCase(),o=null===(n=document.activeElement)||void 0===n?void 0:n.getAttribute("contenteditable");if("INPUT"!==a&&"TEXTAREA"!==a&&""!==o&&"true"!==o){var s,l=r||window.event;switch(l.code&&l.code.toLowerCase()){case"space":l.preventDefault(),e.toggle();break;case"arrowleft":if(l.preventDefault(),e.options.live)break;e.seek(e.video.currentTime-5),e.controller.setAutoHide();break;case"arrowright":if(l.preventDefault(),e.options.live)break;e.seek(e.video.currentTime+5),e.controller.setAutoHide();break;case"arrowup":l.preventDefault(),s=e.volume()+.1,e.volume(s);break;case"arrowdown":l.preventDefault(),s=e.volume()-.1,e.volume(s)}}}})),document.addEventListener("keydown",(function(t){var r=t||window.event;switch(r.code&&r.code.toLowerCase()){case"escape":e.fullScreen.isFullScreen("web")&&e.fullScreen.cancel("web")}}))};function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we={fLoader:function(e){var t,r;function i(t){var r,i=(r=e.call(this,t)||this).load.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.load=function(e,t,r){if(e.url.endsWith(".ts")){var n="",a=e.frag.baseurl||e.frag.url,o=a.indexOf("?");-1!==o&&(n=a.substring(o)),e.url+=n}i(e,t,r)},r}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,_e(t,r),i}(r(12).DefaultConfig.loader)};function ke(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Se=function(){function e(e){this.container=void 0,this.theme=void 0,this.live=void 0,this.autoplay=void 0,this.loop=void 0,this.direction=void 0,this.screenshot=void 0,this.hotkey=void 0,this.preload=void 0,this.volume=void 0,this.mutex=void 0,this.muted=void 0,this.playbackSpeed=void 0,this.webfullscreen=void 0,this.fullscreen=void 0,this.feedback=void 0,this.autoChargeSetting=void 0,this.autoChargeState=void 0,this.logos=void 0,this.logo=void 0,this.platform=void 0,this._lang=void 0,this._video={type:"auto",url:"",qualities:[],subtitles:[]},this.pluginOptions=void 0,this.nextPlayIcon=void 0,this.bigPlayIcon=void 0,this.container=e.container?e.container:document.getElementsByClassName("hiplayer")[0],this.theme=e.theme?e.theme:"#ff5593",this.live=!!e.live&&e.live,this.autoplay=!!e.autoplay&&e.autoplay,this.loop=!!e.loop&&e.loop,this._lang=e.lang?e.lang:navigator.language,this.direction=this.getDirByLang(this.lang),this.screenshot=void 0!==e.screenshot&&e.screenshot,this.hotkey=void 0===e.hotkey||e.hotkey,this.preload=e.preload?e.preload:"auto",this.volume=e.volume?e.volume:.7,this.mutex=!!e.mutex&&e.mutex,this.muted=!!e.muted&&e.muted,this.playbackSpeed=e.playbackSpeed?e.playbackSpeed:null,this.webfullscreen=void 0===e.webfullscreen||e.webfullscreen,this.fullscreen=void 0===e.fullscreen||e.fullscreen,this.webfullscreen=this.fullscreen&&this.webfullscreen,this.feedback=!!e.feedback&&e.feedback,this.autoChargeSetting=!!e.autoChargeSetting&&e.autoChargeSetting,this.autoChargeState=!!e.autoChargeState&&e.autoChargeState,this.pluginOptions=e.pluginOptions,this.nextPlayIcon=void 0===e.nextPlayIcon||e.nextPlayIcon,this.bigPlayIcon=void 0===e.bigPlayIcon||e.bigPlayIcon,e.platform&&(this.platform=e.platform),e.logo&&(this.logo={src:e.logo.src,top:e.logo.top||"20px",left:e.logo.left||"80%"}),e.logos&&(this.logos=e.logos),e.video&&this.setVideo(e.video)}var t,r,i,n=e.prototype;return n.setVideo=function(e){var t=JSON.parse(JSON.stringify(e));this._video.type=t.type?t.type:"auto",this._video.url=t.url,this._video.poster=t.poster,this._video.customType=t.customType,this._video.defaultQuality=t.defaultQuality,this._video.qualities=t.qualities||[],this._video.defaultSubtitle=t.defaultSubtitle,this._video.subtitles=t.subtitles||[],this._video.qualities.length>0&&!this._video.defaultQuality&&(this._video.defaultQuality=this._video.qualities[0].id),this._video.subtitles.length>0&&!this._video.defaultSubtitle&&(this._video.defaultSubtitle=this._video.subtitles[0].id)},n.getDirByLang=function(e){return"ar-AE"===e?"rtl":"ltr"},t=e,(r=[{key:"lang",get:function(){return this._lang},set:function(e){this._lang=e,this.direction=this.getDirByLang(this._lang)}},{key:"video",get:function(){return this._video}}])&&ke(t.prototype,r),i&&ke(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Te=function(e){var t=e.querySelector(".hiplayer-notice"),r=null;return function(e,i,n){void 0===i&&(i=2e3),void 0===n&&(n=.8),t&&(t.innerHTML=e,t.style.opacity=""+n,r&&(clearTimeout(r),r=null),i>0&&(r=setTimeout((function(){t.style.opacity="0"}),i)))}},Ee=r(49);function xe(e){return{key:e.slice(0,16),iv:e.slice(16)}}function Ae(e,t,r){var i="";try{e=Ee.enc.Utf8.parse(e),t=Ee.enc.Utf8.parse(t);var n=Ee.enc.Base64.parse(r),a=Ee.enc.Base64.stringify(n);i=Ee.AES.decrypt(a,e,{iv:t,mode:Ee.mode.CBC,padding:Ee.pad.Pkcs7}).toString(Ee.enc.Utf8)}catch(e){}return i}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oe=r(75),Ie=function(){function e(e){this._player=void 0,this.activeCues=[],this._player=e,this.init()}var t,r,i,n=e.prototype;return n.init=function(){this.switchSubtitle(this.activeSubtitle)},n.switchSubtitle=function(e,t){if(void 0===t&&(t=!1),!e)return this.removeTrack(),void(this.activeSubtitle="");if("off"===e)return this.removeTrack(),this.updateSubtitleController("off"),this.activeSubtitle="off",void(t&&this._player.notice(this.tran("NoSubtitle")));this.removeTrack();var r=this.findSubtitleById(e);this.addTrack(r),this.updateSubtitleController(e),this.activeSubtitle=e,t&&this._player.notice(this.tran("Switching to")+" "+(null==r?void 0:r.name))},n.addTrack=function(e){var t,r=this;if(e)switch(e.type){case"vtt":this.video.innerHTML='<track src="'+e.url+'" label="subtitle-vtt" kind="metadata" default/>',this.video.textTracks&&this.video.textTracks[0]&&(t=this.video.textTracks[0])&&this.initTrack(t);break;case"xml":this.fetchSubtitlesFromXML(e.id,e.url).then((function(i){var n=i.id,a=i.subtitleDoc;if(r.activeSubtitle===n){var o,s=u.transSubtitleXml(a);if(e.secret&&e.secret.key){var l=xe(e.secret.key);o={key:l.key,iv:l.iv}}(t=r.resolveSubtitle(s,{offset:e.offset||0,secret:o}))&&r.initTrack(t)}}));break;case"zip":this.getZip(e.id,e.url).then((function(i){var n=i.id,a=i.subtitleDoc;if(r.activeSubtitle===n){var o,s=u.transSubtitleXml(a);if(e.secret&&e.secret.key){var l=xe(e.secret.key);o={key:l.key,iv:l.iv}}(t=r.resolveSubtitle(s,{offset:e.offset||0,secret:o}))&&r.initTrack(t)}}))}},n.getZip=function(e,t){return new Promise((function(r,i){var n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var t=this.response;Oe.loadAsync(t).then((function(e){return e.file("subtitle.xml").async("text")})).then((function(t){var i=(new DOMParser).parseFromString(t,"text/xml");r({id:e,subtitleDoc:i})}))}},n.onerror=function(){i()},n.send()}))},n.initTrack=function(e){var t=this;e&&(e.oncuechange=function(){var r=e.activeCues||[];if(r&&0!==r.length&&t.container&&(t.container.innerHTML="",r.length>0)){for(var i=document.createElement("div"),n=[],a={},o=0;o<=r.length-1;o++){var s=r[o];if(t.activeCues.push(s),s.style&&s.style.position&&1===s.style.position.type){var l=s.style.position.alignment+"/"+s.style.position.ml+"/"+s.style.position.mr+"/"+s.style.position.mv;a[l]?a[l].push(s):a[l]=[s]}else n.push(s)}for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];1===h.length&&(n.push(h[0]),delete a[u])}n=n.sort((function(e,t){return e.startTime-t.startTime}));for(var c=0;c<n.length;c++){var d=n[c],f=t.createCueHtmlWithStyle(d);i.innerHTML+=f}for(var p in a)if(a.hasOwnProperty(p)){var g=a[p],m=t.createGroupCuesHtmlWithStyle(g);i.innerHTML+=m}t.container.innerHTML=i.innerHTML;var v=document.getElementsByClassName("span-wrapper");if(v.length>0)for(var y=0;y<=v.length-1;y++){var b=v[y];if(b){var _=b.getBoundingClientRect(),w=b.getAttribute("alignment"),k=t.resolveRotatePotion(parseInt(w),_),S=k.centerX,T=k.centerY,E=b.getAttribute("data-rotate");if(E)switch(b.style.transform=""+E,parseInt(w)){case 1:b.style.transformOrigin="left bottom";break;case 2:b.style.transformOrigin="center bottom";break;case 3:b.style.transformOrigin="right bottom";break;case 4:b.style.transformOrigin="left center";break;case 5:b.style.transformOrigin="center";break;case 6:b.style.transformOrigin="right center";break;case 7:b.style.transformOrigin="left top";break;case 8:b.style.transformOrigin="center top";break;case 9:b.style.transformOrigin="right top"}else for(var x=b.getElementsByTagName("span"),A=0;A<x.length;A++){var R=x[A],C=R.getAttribute("data-transform"),L=R.getAttribute("data-rotate");if(L){var D=R.getBoundingClientRect();if(L.indexOf("rotate")>-1){R.style.transform=C+L;var O=S-D.left,I=T-D.top;R.style.transformOrigin=O+"px "+I+"px"}}}}}for(var F=t.container.getElementsByClassName("subtitle-text"),P=0;P<F.length;P++){var B=F[P],M=B.childNodes;M.length>0&&M[0]&&M[0].textContent&&B.setAttribute("data-text",M[0].textContent)}}},this.video.addEventListener("timeupdate",this.removeCueOnTimeChange.bind(this)))},n.createCueHtmlWithStyle=function(e){var t="";if(e.style){var r,i=this.resolveCueStyle(e.style.baseW,e.style.baseH,e.style),n=this.resolveCuePosition(e.style.baseW,e.style.baseH,e.style.position);t+=n.position+i.style,(r=(i.transform+n.transform).trim())&&(t+="transform: "+r+";")}var a=this.createCueHtml(e);return'<div class="subtitle-cue" id="cue'+e.id+'"\n    base-font-size="'+(e.style&&e.style.font&&e.style.font.size||"")+'"\n    base-shadow="'+(e.style&&e.style.border&&e.style.border.shadow||"")+'"\n    base-shadow-color="'+(e.style&&e.style.color&&e.style.color.back||"")+'"\n    base-letter-spacing="'+(e.style&&e.style.font&&e.style.font.spacing||"")+'"\n    style="'+t+'">'+a+"</div>"},n.createGroupCuesHtmlWithStyle=function(e){if(!e||0===e.length)return"";var t="",r=e[0].style.position,i=e[0].style.baseW,n=e[0].style.baseH,a=e.sort((function(e,t){return e.startTime-t.startTime}));r&&r.alignment>=1&&r.alignment<=3&&(a=e.sort((function(e,t){return t.startTime-e.startTime})));for(var o=0;o<a.length;o++){var s=a[o],l=this.createCueHtml(s),u="";if(s.style){var h=this.resolveCueStyle(s.style.baseW,s.style.baseH,s.style),c=h.style,d=h.transform;u+=c,(d=d.trim())&&(u+="transform: "+d+";")}t+='<div class="subtitle-cue" id="cue'+s.id+'"\n      base-font-size="'+(s.style&&s.style.font&&s.style.font.size||"")+'"\n      base-shadow="'+(s.style&&s.style.border&&s.style.border.shadow||"")+'"\n      base-shadow-color="'+(s.style&&s.style.color&&s.style.color.back||"")+'"\n      base-letter-spacing="'+(s.style&&s.style.font&&s.style.font.spacing||"")+'"\n      style="'+u+'">'+l+"</div>"}var f=this.resolveCuePosition(i,n,r),p=f.position,g=f.transform;return g&&(p+="transform: "+g.trim()+";"),'<div class="subtitle-cues-group" style="'+p+'">'+t+"</div>"},n.getSplitHtml=function(e,t){var r=Array.from({length:e-0},(function(e,t){return t+0})).filter((function(e){return!t.some((function(t){return e>=t.start&&e<t.end}))}));if(0===r.length)return[];for(var i=[],n=r[0],a=r[0],o=1;o<r.length;o++)r[o]===a+1||(i.push({start:n,end:a+1}),n=r[o]),a=r[o];return i.push({start:n,end:a+1}),i},n.createCueHtml=function(e){var t=document.createElement("div");t.appendChild(e.getCueAsHTML());var r=t.innerHTML,i=[];if(e.style.inlines&&e.style.inlines.length>0){var n=this.getSplitHtml(r.length,e.style.inlines);(i=e.style.inlines.concat(n)).sort((function(e,t){return e.start-t.start}));var a=this.resolveInlineHtml(r,i,e);r='<div><p class="span-wrapper" alignment="'+e.style.position.alignment+'">'+a+"<p></div>"}else{var o="";e.style&&e.style.font.angle&&(o=e.style.font.angle?"rotate("+-e.style.font.angle+"deg)":"");var s=r.replace(/\\n/g,"\\N").split(/\\N/).map((function(t){if(!t)return"";var r=t.replace(/\\h/g,"&nbsp;");return e.style&&3===e.style.border.style?'<span style="background: '+e.style.color.outline+'">'+r+"</span>":e.style&&e.style.border.outline?'<span class="subtitle-text">'+r+"</div>":"<span>"+r+"</span>"})).join("<br />");r='<div><p class="span-wrapper" data-rotate="'+o+'" alignment="'+e.style.position.alignment+'">'+s+"</p></div>"}return r},n.resolveInlineHtml=function(e,t,r){for(var i=this,n="",a=function(a){var o="",s=e.slice(t[a].start,t[a].end).replace(/\\n/g,"&nbsp;").replace(/\\N/g,"<br/>").replace(/\\h/g,"&nbsp;").replace(/ /g,"&nbsp;");if(t[a].style){var l,u=i.resolveCueStyle(r.style.baseW,r.style.baseH,t[a].style);o+=u.style,(l=u.transform.trim())&&(o+="transform: "+l+";");var h=u.rotate;n+=s.split("<br/>").map((function(e){var r,i;return e?3===(null===(r=t[a].style)||void 0===r?void 0:r.border.style)?(o+="background: "+t[a].style.color.outline+";",'<span data-transform="'+l+'" data-rotate="'+h+'" style="'+o+'">'+e+"</span>"):null!==(i=t[a].style)&&void 0!==i&&i.border.outline?'<span style="'+o+'" data-transform="'+l+'" data-rotate="'+h+'" class="subtitle-text">'+e+"</span>":'<span style="'+o+'" data-transform="'+l+'" data-rotate="'+h+'">'+e+"</span>":""})).join("<br />")}else{var c=i.resolveCueStyle(r.style.baseW,r.style.baseH,r.style).rotate;n+=s.split("<br/>").map((function(e){return e?r.style&&3===r.style.border.style?'<span style="background: '+r.style.color.outline+';" data-transform="" data-rotate="'+c+'">'+e+"</span>":r.style&&r.style.border.outline?'<span class="subtitle-text" data-transform="" data-rotate="'+c+'">'+e+"</span>":'<span data-transform="" data-rotate="'+c+'">'+e+"</span>":""})).join("<br />")}},o=0;o<t.length;o++)a(o);return n},n.fetchSubtitlesFromXML=function(e,t){return new Promise((function(r,i){var n=new XMLHttpRequest;n.open("get",t,!0),n.onload=function(){if(200===this.status){var t=this.response,i=(new DOMParser).parseFromString(t,"text/xml");r({id:e,subtitleDoc:i})}},n.onerror=function(){i()},n.send()}))},n.resolveSubtitle=function(e,t){var r;if(this.video.textTracks&&this.video.textTracks.length>0)for(var i=this.video.textTracks.length,n=0;n<i;n++){var a=this.video.textTracks[n];a&&"subtitle-xml"===a.label&&(r=a)}r||((r=this.video.addTextTrack("metadata","subtitle-xml")).mode="showing");for(var o=e.dias||[],s=0;s<o.length;s++){var l=o[s],u=l.st,h=l.et,c=l.con;t.offset&&(u+=t.offset,h+=t.offset),t.secret&&(c=Ae(t.secret.key,t.secret.iv,c));var d=new VTTCue(u,h,c),f=e.note.height,p=e.note.width;this.container&&this.container.setAttribute("base-width",""+p),l.style&&(d.style=Ce({baseW:p,baseH:f},l.style)),d.id=s+"",r.addCue(d)}return r},n.resolveCueStyle=function(e,t,r){var i=this.container?this.container.getBoundingClientRect().width:0;this.container.setAttribute("base-width",""+e);var n=i/e,a="",o="",s="",l=r.font;if(l){if(l.name&&(s="font-family: "+l.name+";"),l.size)s+="font-size: "+.85*Math.floor(l.size*n)+"px;";l.spacing&&(s+="letter-spacing: "+(l.spacing*n).toFixed(1)+"px;"),l.bold&&(s+="font-weight: bold;"),l.italic?s+="font-style: italic;":s+="font-style: normal;",l.underline&&(s+="text-decoration: underline; text-decoration-color: "+r.color.primary+";"),l.strikeout&&(s+="text-decoration: line-through; text-decoration-thickness: from-font; text-decoration-color: "+r.color.primary+";"),l.angle&&(o+=" rotate("+-l.angle+"deg)")}var u="",h=r.color;h&&h.primary&&(u+="color: "+h.primary+";");var c=r.scale;c&&(100!==c.x&&(a+=" scaleX("+c.x/100+")"),100!==c.y&&(a+=" scaleY("+c.y/100+")"));var d="",f=r.border;return f&&(1===f.style?(f.outline&&(d+="-webkit-text-stroke-color: "+h.outline+";"),f.shadow&&(d+="text-shadow: "+f.shadow*n+"px "+f.shadow*n+"px "+h.back+";")):f.style),{style:s+u+d,transform:a,rotate:o}},n.resolveRotatePotion=function(e,t){return 1===e?{centerX:t.left,centerY:t.top+t.height}:2===e?{centerX:t.left+t.width/2,centerY:t.top+t.height}:3===e?{centerX:t.left+t.width,centerY:t.top+t.height}:4===e?{centerX:t.left,centerY:t.top+t.height/2}:5===e?{centerX:t.left+t.width/2,centerY:t.top+t.height/2}:6===e?{centerX:t.left+t.width,centerY:t.top+t.height/2}:7===e?{centerX:t.left,centerY:t.top}:8===e?{centerX:t.left+t.width/2,centerY:t.top}:9===e?{centerX:t.left+t.width,centerY:t.top}:{centerX:t.left+t.width/2,centerY:t.top+t.height/2}},n.resolveCuePosition=function(e,t,r){var i="position: absolute; bottom: 13%; max-width: 100%; text-align: center;",n="";if(!r)return{position:i,transform:n};if(1===r.type){var a=parseFloat((r.ml/e*100).toFixed(1)),o=parseFloat((r.mr/e*100).toFixed(1)),s=parseFloat((r.mv/t*100).toFixed(1));i="position: absolute; width: "+(100-a-o)+"%;",7===r.alignment&&(i+="top: "+s+"%; left: "+a+"%; text-align: left;"),8===r.alignment&&(i+="top: "+s+"%; left: "+a+"%; text-align: center;"),9===r.alignment&&(i+="top: "+s+"%; right: "+o+"%; text-align: right;"),4===r.alignment&&(i+="top: 46.5%; left: "+a+"%; text-align: left;"),5===r.alignment&&(i+="top: 46.5%; left: "+a+"%; text-align: center;"),6===r.alignment&&(i+="top: 46.5%; right: "+o+"%; text-align: right;"),1===r.alignment&&(i+="bottom: "+s+"%; left: "+a+"%; text-align: left;"),2===r.alignment&&(i+="bottom: "+s+"%; left: "+a+"%; text-align: center;"),3===r.alignment&&(i+="bottom: "+s+"%; right: "+o+"%; text-align: right;")}else if(2===r.type){var l=(r.ml/e*100).toFixed(1)+"%";i="position: absolute; top: "+((r.mv/t*100).toFixed(1)+"%")+"; left: "+l+"; text-align: left;"}else if(3===r.type){var u=parseFloat((r.ml/e*100).toFixed(1));i="position: absolute; top: "+parseFloat((r.mv/t*100).toFixed(1)).toFixed(1)+"%; left: "+u.toFixed(1)+"%; width: 100%;",7===r.alignment&&(i+="text-align: left;"),8===r.alignment&&(n+=" translateX(-50%)",i+="text-align: center;"),9===r.alignment&&(n+=" translateX(-100%)",i+="text-align: right;"),4===r.alignment&&(n+=" translateY(-50%)",i+="text-align: left;"),5===r.alignment&&(n+=" translateX(-50%) translateY(-50%)",i+="text-align: center;"),6===r.alignment&&(n+=" translateX(-100%) translateY(-50%)",i+="text-align: right;"),1===r.alignment&&(n+=" translateY(-100%)",i+="text-align: left;"),2===r.alignment&&(n+=" translateX(-50%) translateY(-100%)",i+="text-align: center;"),3===r.alignment&&(n+=" translateX(-100%) translateY(-100%)",i+="text-align: right;")}return{position:i,transform:n}},n.removeCueOnTimeChange=function(){var e=this;this.activeCues&&0!==this.activeCues.length&&(this.activeCues=this.activeCues.filter((function(e){return null!==e})),this.activeCues.forEach((function(t,r){if(t){var i=e.video.currentTime;if(i>t.endTime||i<t.startTime){var n=e.container&&e.container.querySelector("#cue"+t.id);n&&(n.innerHTML=""),e.activeCues[r]=null}}})))},n.updateSubtitleController=function(e){var t=this.findSubtitleById(e);if(t){var r=this.subtitleList;if(r)for(var i=r.children,n=0;n<i.length;n++){var a=i[n];if(a&&a.getAttribute("data-id"))a.getAttribute("data-id")===t.id?a.classList.add("hiplayer-pop-item-std"):a.classList.remove("hiplayer-pop-item-std");else a.classList.remove("hiplayer-pop-item-std")}}},n.findSubtitleById=function(e){var t;if(e)return"off"===e?t={id:"off",name:this.tran("NoSubtitle"),type:"",url:""}:this.subtitles.forEach((function(r){r.id===e&&(t=r)})),t},n.removeTrack=function(){if(this.video.textTracks&&this.video.textTracks.length>0)for(var e=0;e<this.video.textTracks.length;e++){var t=this.video.textTracks[e];t.oncuechange=null,t.mode="hidden";for(var r=t.cues||[],i=r.length,n=0;n<i;n++){var a=r[e];a&&t.removeCue(a)}}this.activeCues=[],this.container&&(this.container.innerHTML=""),this.video&&(this.video.innerHTML="")},n.destroy=function(){this.removeTrack(),this.video.removeEventListener("timeupdate",this.removeCueOnTimeChange.bind(this))},t=e,(r=[{key:"container",get:function(){return this._player.template.subtitleWrap}},{key:"subtitleList",get:function(){return this._player.template.getSubtitleList()}},{key:"video",get:function(){return this._player.video}},{key:"tran",get:function(){return this._player.tran}},{key:"activeSubtitle",get:function(){return this._player.options.video.defaultSubtitle||""},set:function(e){this._player.options.video.defaultSubtitle=e}},{key:"subtitles",get:function(){return this._player.options.video.subtitles}}])&&De(t.prototype,r),i&&De(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Fe=function(){function e(e,t){this._video=void 0,this._container=void 0,this._loadingChecker=void 0,this._video=e,this._container=t,this.init()}var t=e.prototype;return t.init=function(){this.initloadingChecker()},t.initloadingChecker=function(){var e=this,t=0,r=0,i=!1;this._loadingChecker=setInterval((function(){r=e._video.currentTime,i||r!==t||e._video.paused||(e.show(),i=!0),i&&r>t&&!e._video.paused&&(e.hide(),i=!1),t=r}),100)},t.show=function(){this._container.classList.add("hiplayer-loading")},t.hide=function(){this._container.classList.remove("hiplayer-loading")},t.destroy=function(){this._loadingChecker&&clearInterval(this._loadingChecker)},e}(),Pe=function(){function e(e,t,r){this.container=void 0,this.template=void 0,this.logos=void 0,this.container=e,this.template=t,r&&(this.logos=r),this.init()}var t=e.prototype;return t.init=function(){var e=this;window.addEventListener("resize",(function(){e.initResize(),e.resizeLogo()})),this.initResize()},t.updateLogos=function(e){this.logos=e},t.initResize=function(){var e=this.container.getBoundingClientRect().width;e>=750?this.setArrow(!1):this.setArrow(!0),e>=620?this.showVolume():this.hideVolume(),e>=575?this.showSpeed():this.hideSpeed(),e>=520?this.showSubtitle():this.hideSubtitle(),e>=450?this.showQuality():this.hideQuality(),this.updateSubtitleFontSize(e)},t.updateSubtitleFontSize=function(e){if(this.template.subtitleWrap){var t,r=this.template.subtitleWrap.getElementsByClassName("subtitle-cue"),i=this.template.subtitleWrap.getAttribute("base-width");if(i)t=e/parseInt(i);if(r&&t)for(var n=0;n<r.length;n++){var a=r[n],o=a.getAttribute("base-font-size");if(o){var s=parseInt(o),l=Math.floor(s*t)-4;l<14&&(l=14),a.style.fontSize=l+"px"}var u=a.getAttribute("base-letter-spacing");if(u){var h=parseFloat(u)*t;a.style.letterSpacing=h.toFixed(1)+"px"}var c=a.getAttribute("base-shadow"),d=a.getAttribute("base-shadow-color");if(c&&d){var f=parseFloat(c)*t;f<.5&&(f=.5),a.style.textShadow=f.toFixed(1)+"px "+f.toFixed(1)+"px "+d}}}},t.setArrow=function(e){e?this.container.classList.add("hiplayer-arrow"):this.container.classList.remove("hiplayer-arrow")},t.showSpeed=function(){this.template.speed&&this.template.speed.style.removeProperty("display")},t.hideSpeed=function(){this.template.speed&&(this.template.speed.style.display="none")},t.showVolume=function(){this.template.volumeIcon&&this.template.volumeIcon.style.removeProperty("display")},t.hideVolume=function(){this.template.volumeIcon&&(this.template.volumeIcon.style.display="none")},t.showSubtitle=function(){this.template.subtitleButton&&this.template.subtitleButton.style.removeProperty("display")},t.hideSubtitle=function(){this.template.subtitleButton&&(this.template.subtitleButton.style.display="none")},t.showQuality=function(){this.template.qualityButton&&this.template.qualityButton.style.removeProperty("display")},t.hideQuality=function(){this.template.qualityButton&&(this.template.qualityButton.style.display="none")},t.resizeLogo=function(){var e=this.logos;if(e){var t=this.template.video;e.forEach((function(e,r){var i=document.querySelector(".hiplayer-logo"+r),n=i&&i.firstElementChild;if(t&&n){i.style.top=e.coory*t.offsetHeight/720+"px",i.style.left=e.coorx*t.offsetHeight/720+"px";var a=e.width*t.offsetHeight/720,o=e.height*t.offsetHeight/720;n.style.width=(a>t.offsetWidth?t.offsetWidth:a)+"px",n.style.height=(o>t.offsetHeight?t.offsetHeight:o)+"px"}}))}},t.destroy=function(){var e=this;window.removeEventListener("resize",(function(){e.initResize()}))},e}(),Be=r(12),Me=0,Ue=[],Ne=function(){function e(e){this.options=void 0,this.container=void 0,this.events=void 0,this.user=void 0,this.template=void 0,this.video=void 0,this.bar=void 0,this.fullScreen=void 0,this.controller=void 0,this.setting=void 0,this.tran=void 0,this.notice=void 0,this.subtitle=void 0,this.loading=void 0,this._resizeHandler=void 0,this._qualitySwitching=!1,this._paused=!0,this._subscriptions={},this.options=new Se(e),this.events=new fe,this.user=new ge(this.options),this.isStoredSubtitleExist()&&(this.options.video.defaultSubtitle=this.user.get("subtitle")),this.container=this.options.container,this.container.classList.add("hiplayer"),this.container.classList.add("hiplayer-"+this.options.lang.toLowerCase()),"rtl"===this.options.direction?this.container.classList.add("hiplayer-rtl"):this.container.classList.remove("hiplayer-rtl"),(u.isMobile||"mobile"===this.options.platform)&&this.container.classList.add("hiplayer-mobile"),this.tran=Object(h.default)(this.options.lang),this.template=new se({container:this.container,options:this.options,index:Me,tran:this.tran}),this.video=this.template.video,this.options.live?this.container.classList.add("hiplayer-live"):this.container.classList.remove("hiplayer-live"),this.bar=new me(this.template),this.controller=new ve(this),this.setting=new ye(this),this._initVideo(this.video),this.notice=Te(this.container);new be(this);this.fullScreen=new pe(this),this.loading=new Fe(this.video,this.container),this.subtitle=new Ie(this),this._resizeHandler=new Pe(this.container,this.template,this.options.logos?this.options.logos:void 0),this.options.muted&&this.muted(!0,!0),this.options.autoplay&&this.play(),Me++,Ue.push(this)}var t=e.prototype;return t.seek=function(e,t){void 0===t&&(t=!1),e&&e!==1/0&&e!==-1/0||(e=0),e=Math.max(e,0),this.video.duration&&(e=Math.min(e,this.video.duration)),t&&(this.video.currentTime<e?this.notice(this.tran("FF")+" "+(e-this.video.currentTime).toFixed(0)+" "+this.tran("s")):this.video.currentTime>e&&this.notice(this.tran("REW")+" "+(this.video.currentTime-e).toFixed(0)+" "+this.tran("s"))),this.video.currentTime=e,this.bar.set("played",e/this.video.duration,"width"),this.template.ptime&&(this.template.ptime.innerHTML=u.secondToTime(e))},t.play=function(e){var t=this;(void 0===e&&(e=!1),this._paused=!1,this.template.playButton&&(this.template.playButton.innerHTML=J.pause),this.template.bigPlayButton&&(this.template.bigPlayButton.innerHTML=J.bigPause),e)||Promise.resolve(this.video.play()).catch((function(e){0===e.code&&(console.warn("[HiPlayer]",e),t.pause())}));if(this.container.classList.remove("hiplayer-paused"),this.container.classList.add("hiplayer-playing"),this.options.mutex)for(var r=0;r<Ue.length;r++)this!==Ue[r]&&Ue[r].pause()},t.pause=function(e){void 0===e&&(e=!1),this._paused=!0,this.loading.hide(),this.template.playButton&&(this.template.playButton.innerHTML=J.play),this.template.bigPlayButton&&(this.template.bigPlayButton.innerHTML=J.bigPlay),e||this.video.pause(),this.container.classList.remove("hiplayer-playing"),this.container.classList.add("hiplayer-paused")},t.volume=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=!1),void 0!==e){var i="string"==typeof e?parseFloat(e):e;i=Math.max(i,0),i=Math.min(i,1),this.bar.set("volume",i,"height"),t||(this.user.set("volume",i.toString()),this.video.muted&&this.muted(!1)),this.template.volumeText&&(this.template.volumeText.innerText=(100*i).toFixed(0)+"%"),this.video.volume=i,this.controller.switchVolumeIcon()}return parseFloat(this.user.get("volume"))||this.video.volume},t.muted=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(this.video.muted=e,this.video.muted?(this.template.volumeIcon&&(this.template.volumeIcon.innerHTML=J.volumeOff),this.bar.set("volume",0,"height"),this.template.volumeText&&(this.template.volumeText.innerText="0%")):(this.controller.switchVolumeIcon(),this.bar.set("volume",this.volume(),"height"),this.template.volumeText&&(this.template.volumeText.innerText=(100*this.volume()).toFixed(0)+"%"))),t||this.user.set("muted",this.video.muted?"1":"0"),this.video.muted},t.toggle=function(){this.video.paused?(this.play(),this.events.emit(ue.play_btn_click)):(this.pause(),this.events.emit(ue.pause_btn_click))},t.on=function(e,t){return this.events.subscribe(e,t)},t._subscribe=function(e,t){var r=this.on(e,t);return this._subscriptions[e]=r,r},t.unsubscribe=function(e,t){this.events.unsubscribe(e,t)},t.loadVideo=function(e){this.options.setVideo(e),this.isStoredSubtitleExist()&&(this.options.video.defaultSubtitle=this.user.get("subtitle")),this._updateController(),this.video.poster=e.poster||"",this.video.src=e.url,this._initMSE(this.video,e.type||"auto"),this.speed(1),this.bar.set("played",0,"width"),this.volume(this.user.get("volume"),!0,!0),this.muted(!!parseInt(this.user.get("muted")),!0),this.subtitle.init(),this.options.autoplay?this.play():this.pause()},t._initMSE=function(e,t){if(this.options.video.customType&&this.options.video.customType[t])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[t])?this.options.video.customType[t](this.video,this):console.error("[HiPlayer]","Illegal customType: "+t);else switch("auto"===t&&(t=/m3u8(#|\?|$)/i.exec(e.src)?"hls":"normal"),"hls"===t&&(e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&(t="hls-support"),t){case"hls":case"hls-support":if(Be.isSupported()){var r=this.options.pluginOptions?this.options.pluginOptions.hls:we,i=new Be(r);i.loadSource(e.src),i.attachMedia(e),this._subscribe(ue.destroy,(function(){i.destroy()}))}}},t._initVideo=function(e,t){var r=this;this._initMSE(e,t||this.options.video.type),this._subscribe(he.durationchange,(function(){r._initVideoLogos(),1!==e.duration&&e.duration!==1/0&&r.template.dtime&&(r.template.dtime.innerHTML=u.secondToTime(e.duration))})),this._subscribe(he.progress,(function(){var t=e.buffered.length?e.buffered.end(e.buffered.length-1)/e.duration:0;r.bar.set("loaded",t,"width")})),this._subscribe(he.error,(function(){r.video.error})),this._subscribe(he.ended,(function(){r.bar.set("played",1,"width"),r.setting.loop?(r.seek(0),r.play()):r.pause()})),this._subscribe(he.play,(function(){r._paused&&r.play(!0)})),this._subscribe(he.timeupdate,(function(){r.bar.set("played",r.video.currentTime/r.video.duration,"width");var e=u.secondToTime(r.video.currentTime);r.template.ptime&&r.template.ptime.innerHTML!==e&&(r.template.ptime.innerHTML=e),r.options.logos&&0!==r.options.logos.length&&r.options.logos.forEach((function(e,t){var i=document.querySelector(".hiplayer-logo"+t);i&&(e.timeAxis<=r.video.currentTime&&e.timeAxis+e.duration>=r.video.currentTime?("block"!==i.style.display&&(i.style.display="block"),i.style.display="block"):"none"!==i.style.display&&(i.style.display="none"))}))}));for(var i=function(t){e.addEventListener(r.events.videoEvents[t],(function(){"timeupdate"!==r.events.videoEvents[t]&&r.events.videoEvents[t],r.events.emit(r.events.videoEvents[t])}))},n=0;n<this.events.videoEvents.length;n++)i(n);this.volume(this.user.get("volume"),!0,!0),this.muted(!!parseInt(this.user.get("muted")),!0)},t._initVideoLogos=function(){var e=this.options.logos;if(e){var t=this.template.video;e.forEach((function(e,r){var i=document.querySelector(".hiplayer-logo"+r),n=i.firstElementChild;if(e.timeAxis<=0&&(i.style.display="block"),t){i.style.top=e.coory*t.offsetHeight/720+"px",i.style.left=e.coorx*t.offsetHeight/720+"px";var a=e.width*t.offsetHeight/720,o=e.height*t.offsetHeight/720;n.style.width=(a>t.offsetWidth?t.offsetWidth:a)+"px",n.style.height=(o>t.offsetHeight?t.offsetHeight:o)+"px"}}))}},t.onSubtitleSwitch=function(e){this.subtitle.activeSubtitle!==e&&(this.subtitle.switchSubtitle(e,!0),this.events.emit(ue.subtitle_switch,e),this.user.set("subtitle",e))},t.onQualitySwitch=function(e){if(this.options.video.qualities&&this.options.video.defaultQuality!==e){var t=this.options.video.qualities.find((function(t){return t.id===e}));if(this.events.emit(ue.quality_start,t),this.template.qualityButton&&(this.template.qualityButton.innerHTML=t?t.name:""),this.template.qualityList)for(var r=this.template.qualityList.children,i=0;i<r.length;i++){var n=r[i];if(n&&n.getAttribute("data-id"))n.getAttribute("data-id")===(null==t?void 0:t.id)?n.classList.add("hiplayer-pop-item-std"):n.classList.remove("hiplayer-pop-item-std");else n.classList.remove("hiplayer-pop-item-std")}}},t.switchQuality=function(e){var t=this;e&&e.id&&e.url?this.options.video.defaultQuality===e.id||this._qualitySwitching||(this.options.video.defaultQuality=e.id,this._qualitySwitching=!0,this.notice(this.tran("Switching to")+" "+e.name,-1),this._switchVideoSrc({src:e.url,type:e.type},(function(){t.subtitle.init(),t.notice(t.tran("Switched to")+" "+e.name),t._qualitySwitching=!1,t.events.emit(ue.quality_end)}))):console.error("[HiPlayer]","Bad quality paramas: "+e)},t._switchVideoSrc=function(e,t){var r=this,i=e.src,n=(e.type,ie({current:!1,poster:this.video.poster,screenshot:this.options.screenshot,preload:"auto",url:i}));this._initMSE(n,"auto"),n.load(),n.addEventListener("canplaythrough",(function(){var e=r.video.currentTime;r.video&&(r.video.src=i,r.video.poster="",r._initMSE(r.video,"auto"),r.video.play(),r.video.addEventListener("canplay",(function(){if(-1!==e&&r.video.currentTime!==e)return r.seek(e),void(e=-1);r.play()}))),t()}))},t._updateController=function(){this.controller.destroy(),this.setting.destroy();var e=te({tran:this.tran,index:Me,options:this.options});this.template.controller&&(this.template.controller.innerHTML=e.innerHTML),this.bar=new me(this.template),this.setting=new ye(this),this.controller=new ve(this)},t.goFeedback=function(){this.events.emit(ue.feedback_click)},t.switchAutoCharge=function(e){void 0===e&&(e=!1),this.events.emit(ue.switch_auto_charge,e),this.options.autoChargeState=e,this.template.autoChargeButton&&(this.template.autoChargeButton.innerHTML=e?J.switchOn:J.switchOff)},t.resize=function(){this.events.emit(ue.resize)},t.speed=function(e,t){if(void 0===t&&(t=!1),e){this.video.playbackRate=e,this.template.speed&&(this.template.speed.innerText=(e%1==0?e.toFixed(1):e)+"x");var r=this.template.speedList;if(r)for(var i=r.children,n=0;n<i.length;n++){var a=i[n];if(a&&a.getAttribute("data-speed")){var o=a.getAttribute("data-speed")||"";parseFloat(o)===e?a.classList.add("hiplayer-pop-item-std"):a.classList.remove("hiplayer-pop-item-std")}else a.classList.remove("hiplayer-pop-item-std")}t&&this.notice(this.tran("Switching to")+" "+(e%1==0?e.toFixed(1):e)+"x")}return this.video.playbackRate},t.isPaused=function(){return this._paused},t.isSubtitleStored=function(){return!!this.user.get("subtitle")},t.isStoredSubtitleExist=function(){var e=this.user.get("subtitle");if(!e)return!1;if(!this.options.video.subtitles)return!1;for(var t=0;t<this.options.video.subtitles.length;t++)if(this.options.video.subtitles[t].id===e)return!0;return!1},t.logoChange=function(e){this.options.logos=e,this._resizeHandler.updateLogos(e);var t=this.template.logoWrap;this.template.videoLogos.length>0&&this.template.videoLogos.forEach((function(e){e.remove()})),0===this.template.videoLogos.length&&(null==e||e.forEach((function(e,r){var i=Q("div",["hiplayer-logo"+r,"hiplayer-logo"]),n=Q("img");n.setAttribute("src",e.imgSrc),i.appendChild(n),t.appendChild(i)})))},t.switchLanguage=function(e,t){this.container.classList.remove("hiplayer-"+this.options.lang.toLowerCase()),this.options.lang=e,this.tran=Object(h.default)(this.options.lang),this.container.classList.add("hiplayer-"+this.options.lang.toLowerCase()),"rtl"===this.options.direction?this.container.classList.add("hiplayer-rtl"):this.container.classList.remove("hiplayer-rtl"),t.qualities&&(this.options.video.qualities=t.qualities),t.subtitles&&(this.options.video.subtitles=t.subtitles),this._updateController(),t.defaultSubtitle&&!this.isSubtitleStored()&&(this.options.video.defaultSubtitle=t.defaultSubtitle,this.subtitle.init())},t.destroy=function(){for(var e in Ue.splice(Ue.indexOf(this),1),this._subscriptions)this._subscriptions.hasOwnProperty(e)&&(this.unsubscribe(e,this._subscriptions[e]),delete this._subscriptions[e]);this.setting.destroy(),this.controller.destroy(),this.loading.destroy(),this.subtitle.destroy(),this._resizeHandler.destroy(),this.pause(),this.video.src="",this.container.innerHTML="",this.events.emit(ue.destroy)},e}();t.default=Ne}]).default}));
